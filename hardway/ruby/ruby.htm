<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
	.highlight .hll { background-color: #ffffcc }
	.highlight  { background: #eeffcc; }
	.highlight .c { color: #408090; font-style: italic } /* Comment */
	.highlight .err { border: 1px solid #FF0000 } /* Error */
	.highlight .k { color: #007020; font-weight: bold } /* Keyword */
	.highlight .o { color: #666666 } /* Operator */
	.highlight .cm { color: #408090; font-style: italic } /* Comment.Multiline */
	.highlight .cp { color: #007020 } /* Comment.Preproc */
	.highlight .c1 { color: #408090; font-style: italic } /* Comment.Single */
	.highlight .cs { color: #408090; background-color: #fff0f0 } /* Comment.Special */
	.highlight .gd { color: #A00000 } /* Generic.Deleted */
	.highlight .ge { font-style: italic } /* Generic.Emph */
	.highlight .gr { color: #FF0000 } /* Generic.Error */
	.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
	.highlight .gi { color: #00A000 } /* Generic.Inserted */
	.highlight .go { color: #303030 } /* Generic.Output */
	.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
	.highlight .gs { font-weight: bold } /* Generic.Strong */
	.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
	.highlight .gt { color: #0040D0 } /* Generic.Traceback */
	.highlight .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
	.highlight .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
	.highlight .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
	.highlight .kp { color: #007020 } /* Keyword.Pseudo */
	.highlight .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
	.highlight .kt { color: #902000 } /* Keyword.Type */
	.highlight .m { color: #208050 } /* Literal.Number */
	.highlight .s { color: #4070a0 } /* Literal.String */
	.highlight .na { color: #4070a0 } /* Name.Attribute */
	.highlight .nb { color: #007020 } /* Name.Builtin */
	.highlight .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
	.highlight .no { color: #60add5 } /* Name.Constant */
	.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
	.highlight .ni { color: #d55537; font-weight: bold } /* Name.Entity */
	.highlight .ne { color: #007020 } /* Name.Exception */
	.highlight .nf { color: #06287e } /* Name.Function */
	.highlight .nl { color: #002070; font-weight: bold } /* Name.Label */
	.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
	.highlight .nt { color: #062873; font-weight: bold } /* Name.Tag */
	.highlight .nv { color: #bb60d5 } /* Name.Variable */
	.highlight .ow { color: #007020; font-weight: bold } /* Operator.Word */
	.highlight .w { color: #bbbbbb } /* Text.Whitespace */
	.highlight .mf { color: #208050 } /* Literal.Number.Float */
	.highlight .mh { color: #208050 } /* Literal.Number.Hex */
	.highlight .mi { color: #208050 } /* Literal.Number.Integer */
	.highlight .mo { color: #208050 } /* Literal.Number.Oct */
	.highlight .sb { color: #4070a0 } /* Literal.String.Backtick */
	.highlight .sc { color: #4070a0 } /* Literal.String.Char */
	.highlight .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
	.highlight .s2 { color: #4070a0 } /* Literal.String.Double */
	.highlight .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
	.highlight .sh { color: #4070a0 } /* Literal.String.Heredoc */
	.highlight .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
	.highlight .sx { color: #c65d09 } /* Literal.String.Other */
	.highlight .sr { color: #235388 } /* Literal.String.Regex */
	.highlight .s1 { color: #4070a0 } /* Literal.String.Single */
	.highlight .ss { color: #517918 } /* Literal.String.Symbol */
	.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
	.highlight .vc { color: #bb60d5 } /* Name.Variable.Class */
	.highlight .vg { color: #bb60d5 } /* Name.Variable.Global */
	.highlight .vi { color: #bb60d5 } /* Name.Variable.Instance */
	.highlight .il { color: #208050 } /* Literal.Number.Integer.Long */
	/**
	 * Sphinx stylesheet -- sphinxdoc theme
	 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	 *
	 * Originally created by Armin Ronacher for Werkzeug, adapted by Georg Brandl.
	 */

	@import url("basic.css");

	/* -- page layout ----------------------------------------------------------- */

	body {
		font-family: 'Lucida Grande', 'Lucida Sans Unicode', 'Geneva',
					 'Verdana', sans-serif;
		font-size: 14px;
		letter-spacing: -0.01em;
		line-height: 150%;
		background-color: #BFD1D4;
		color: black;
		padding: 0;
		border: 1px solid #aaa;

		margin: 0px 80px 0px 80px;
		min-width: 740px;
	}

	div.document {
		background-color: white;
		text-align: left;
		background-image: url(contents.png);
		background-repeat: repeat-x;
	}

	div.bodywrapper {
		margin: 0 240px 0 0;
		border-right: 1px solid #ccc;
	}

	div.body {
		margin: 0;
		padding: 0.5em 20px 20px 20px;
	}

	div.related {
		font-size: 1em;
	}

	div.related ul {
		background-image: url(navigation.png);
		height: 2em;
		border-top: 1px solid #ddd;
		border-bottom: 1px solid #ddd;
	}

	div.related ul li {
		margin: 0;
		padding: 0;
		height: 2em;
		float: left;
	}

	div.related ul li.right {
		float: right;
		margin-right: 5px;
	}

	div.related ul li a {
		margin: 0;
		padding: 0 5px 0 5px;
		line-height: 1.75em;
		color: #EE9816;
	}

	div.related ul li a:hover {
		color: #3CA8E7;
	}

	div.sphinxsidebarwrapper {
		padding: 0;
	}

	div.sphinxsidebar {
		margin: 0;
		padding: 0.5em 15px 15px 0;
		width: 210px;
		float: right;
		font-size: 1em;
		text-align: left;
	}

	div.sphinxsidebar h3, div.sphinxsidebar h4 {
		margin: 1em 0 0.5em 0;
		font-size: 1em;
		padding: 0.1em 0 0.1em 0.5em;
		color: white;
		border: 1px solid #86989B;
		background-color: #AFC1C4;
	}

	div.sphinxsidebar h3 a {
		color: white;
	}

	div.sphinxsidebar ul {
		padding-left: 1.5em;
		margin-top: 7px;
		padding: 0;
		line-height: 130%;
	}

	div.sphinxsidebar ul ul {
		margin-left: 20px;
	}

	div.footer {
		background-color: #E3EFF1;
		color: #86989B;
		padding: 3px 8px 3px 0;
		clear: both;
		font-size: 0.8em;
		text-align: right;
	}

	div.footer a {
		color: #86989B;
		text-decoration: underline;
	}

	/* -- body styles ----------------------------------------------------------- */

	p {    
		margin: 0.8em 0 0.5em 0;
	}

	a {
		color: #CA7900;
		text-decoration: none;
	}

	a:hover {
		color: #2491CF;
	}

	div.body a {
		text-decoration: underline;
	}

	h1 {
		margin: 0;
		padding: 0.7em 0 0.3em 0;
		font-size: 1.5em;
		color: #11557C;
	}

	h2 {
		margin: 1.3em 0 0.2em 0;
		font-size: 1.35em;
		padding: 0;
	}

	h3 {
		margin: 1em 0 -0.3em 0;
		font-size: 1.2em;
	}

	div.body h1 a, div.body h2 a, div.body h3 a, div.body h4 a, div.body h5 a, div.body h6 a {
		color: black!important;
	}

	h1 a.anchor, h2 a.anchor, h3 a.anchor, h4 a.anchor, h5 a.anchor, h6 a.anchor {
		display: none;
		margin: 0 0 0 0.3em;
		padding: 0 0.2em 0 0.2em;
		color: #aaa!important;
	}

	h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor,
	h5:hover a.anchor, h6:hover a.anchor {
		display: inline;
	}

	h1 a.anchor:hover, h2 a.anchor:hover, h3 a.anchor:hover, h4 a.anchor:hover,
	h5 a.anchor:hover, h6 a.anchor:hover {
		color: #777;
		background-color: #eee;
	}

	a.headerlink {
		color: #c60f0f!important;
		font-size: 1em;
		margin-left: 6px;
		padding: 0 4px 0 4px;
		text-decoration: none!important;
	}

	a.headerlink:hover {
		background-color: #ccc;
		color: white!important;
	}

	cite, code, tt {
		font-family: 'Consolas', 'Deja Vu Sans Mono',
					 'Bitstream Vera Sans Mono', monospace;
		font-size: 0.95em;
		letter-spacing: 0.01em;
	}

	tt {
		background-color: #f2f2f2;
		border-bottom: 1px solid #ddd;
		color: #333;
	}

	tt.descname, tt.descclassname, tt.xref {
		border: 0;
	}

	hr {
		border: 1px solid #abc;
		margin: 2em;
	}

	a tt {
		border: 0;
		color: #CA7900;
	}

	a tt:hover {
		color: #2491CF;
	}

	pre {
		font-family: 'Consolas', 'Deja Vu Sans Mono',
					 'Bitstream Vera Sans Mono', monospace;
		font-size: 0.95em;
		letter-spacing: 0.015em;
		line-height: 120%;
		padding: 0.5em;
		border: 1px solid #ccc;
		background-color: #f8f8f8;
	}

	pre a {
		color: inherit;
		text-decoration: underline;
	}

	td.linenos pre {
		padding: 0.5em 0;
	}

	div.quotebar {
		background-color: #f8f8f8;
		max-width: 250px;
		float: right;
		padding: 2px 7px;
		border: 1px solid #ccc;
	}

	div.topic {
		background-color: #f8f8f8;
	}

	table {
		border-collapse: collapse;
		margin: 0 -0.5em 0 -0.5em;
	}

	table td, table th {
		padding: 0.2em 0.5em 0.2em 0.5em;
	}

	div.admonition, div.warning {
		font-size: 0.9em;
		margin: 1em 0 1em 0;
		border: 1px solid #86989B;
		background-color: #f7f7f7;
		padding: 0;
	}

	div.admonition p, div.warning p {
		margin: 0.5em 1em 0.5em 1em;
		padding: 0;
	}

	div.admonition pre, div.warning pre {
		margin: 0.4em 1em 0.4em 1em;
	}

	div.admonition p.admonition-title,
	div.warning p.admonition-title {
		margin: 0;
		padding: 0.1em 0 0.1em 0.5em;
		color: white;
		border-bottom: 1px solid #86989B;
		font-weight: bold;
		background-color: #AFC1C4;
	}

	div.warning {
		border: 1px solid #940000;
	}

	div.warning p.admonition-title {
		background-color: #CF0000;
		border-bottom-color: #940000;
	}

	div.admonition ul, div.admonition ol,
	div.warning ul, div.warning ol {
		margin: 0.1em 0.5em 0.5em 3em;
		padding: 0;
	}

	div.versioninfo {
		margin: 1em 0 0 0;
		border: 1px solid #ccc;
		background-color: #DDEAF0;
		padding: 8px;
		line-height: 1.3em;
		font-size: 0.9em;
	}
	</style>
    <title>Learn Ruby The Hard Way — Learn Ruby The Hard Way</title>
    <link rel="stylesheet" href="./ruby_files/sphinxdoc.css" type="text/css">
    <link rel="stylesheet" href="./ruby_files/pygments.css" type="text/css">
    <script type="text/javascript" async="" src="./ruby_files/ga.js"></script><script type="text/javascript" async="" src="./ruby_files/ga(1).js"></script><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="./ruby_files/jquery.js"></script>
    <script type="text/javascript" src="./ruby_files/underscore.js"></script>
    <script type="text/javascript" src="./ruby_files/doctools.js"></script>
    <link rel="top" title="Learn Ruby The Hard Way" href="http://ruby.learncodethehardway.org/book/#">
    <link rel="next" title="The Hard Way Is Easier" href="http://ruby.learncodethehardway.org/book/intro.html"> 
  <script type="text/javascript" async="" src="./ruby_files/embed.js"></script><link type="text/css" rel="stylesheet" href="chrome-extension://cpngackimfmofbokmjmljamhdncknpmg/style.css"><script type="text/javascript" charset="utf-8" src="chrome-extension://cpngackimfmofbokmjmljamhdncknpmg/page_context.js"></script><link rel="stylesheet" type="text/css" href="chrome-extension://pbcgnkmbeodkmiijjfnliicelkjfcldg/css/gmail.css"><script src="./ruby_files/thread.js" async="" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="./ruby_files/defaults.css"><script src="./ruby_files/disqus.js" async="" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="./ruby_files/theme.css"><script src="./ruby_files/theme.js" async="" charset="UTF-8"></script><script src="./ruby_files/event.js" async="" charset="UTF-8"></script><script type="text/javascript" async="" src="./ruby_files/embed(1).js"></script><script src="./ruby_files/thread(1).js" async="" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="./ruby_files/defaults(1).css"><script src="./ruby_files/disqus(1).js" async="" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="./ruby_files/theme(1).css"><script src="./ruby_files/thread(2).js" async="" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="./ruby_files/defaults(1).css"><script src="./ruby_files/disqus(1).js" async="" charset="UTF-8"></script></head>
  <body screen_capture_injected="true" style="-webkit-user-select: auto; ">

		<div class="document" id="ex0a">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="learn-ruby-the-hard-way">
<h1>Learn Ruby The Hard Way<a class="headerlink" href="#learn-ruby-the-hard-way" title="Permalink to this headline">¶</a></h1>
<p>Welcome to Learn Ruby the hard way. This is a translation of "Learn Python The
Hard Way" to teach total beginners Ruby.   It's in the same style, and the
content is nearly the same, but it will teach you Ruby.  If you have problems
email <a class="reference external" href="mailto:help%40learncodethehardway.org">help<span>@</span>learncodethehardway<span>.</span>org</a>.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="#ex0b">The Hard Way Is Easier</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex0c">Exercise 0: The Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex1">Exercise 1: A Good First Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex2">Exercise 2: Comments And Pound Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex3">Exercise 3: Numbers And Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex4">Exercise 4: Variables And Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex5">Exercise 5: More Variables And Printing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex6">Exercise 6: Strings And Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex7">Exercise 7: More Printing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex8">Exercise 8: Printing, Printing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex9">Exercise 9: Printing, Printing, Printing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex10">Exercise 10: What Was That?</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex11">Exercise 11: Asking Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex12">Exercise 12: Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex13">Exercise 13: Parameters, Unpacking, Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex14">Exercise 14: Prompting And Passing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex15">Exercise 15: Reading Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex16">Exercise 16: Reading And Writing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex17">Exercise 17: More Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex18">Exercise 18: Names, Variables, Code, Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex19">Exercise 19: Functions And Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex20">Exercise 20: Functions And Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex21">Exercise 21: Functions Can Return Something</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex22">Exercise 22: What Do You Know So Far?</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex23">Exercise 23: Read Some Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex24">Exercise 24: More Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex25">Exercise 25: Even More Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex26">Exercise 26: Congratulations, Take A Test!</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex27">Exercise 27: Memorizing Logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex28">Exercise 28: Boolean Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex29">Exercise 29: What If</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex30">Exercise 30: Else And If</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex31">Exercise 31: Making Decisions</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex32">Exercise 32: Loops And Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex33">Exercise 33: While Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex34">Exercise 34: Accessing Elements Of Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex35">Exercise 35: Branches and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex36">Exercise 36: Designing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex37">Exercise 37: Symbol Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex38">Exercise 38: Reading Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex39">Exercise 39: Doing Things To Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex40">Exercise 40: Dictionaries, Oh Lovely Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex41">Exercise 41: Gothons From Planet Percal #25</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex42">Exercise 42: Gothons Are Getting Classy</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex43">Exercise 43: You Make A Game</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex44">Exercise 44: Evaluating Your Game</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex45">Exercise 45: Is-A, Has-A, Objects, and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex46">Exercise 46: A Project Skeleton</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex47">Exercise 47: Automated Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex48">Exercise 48: Advanced User Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex49">Exercise 49: Making Sentences</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex50">Exercise 50: Your First Website</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex51">Exercise 51: Getting Input From A Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ex52">Exercise 52: The Start Of Your Web Game</a></li>
<li class="toctree-l1"><a class="reference internal score-1500" href="#next">Next Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="#advice">Advice From An Old Programmer</a></li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex0b">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="the-hard-way-is-easier">
<h1>The Hard Way Is Easier<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#the-hard-way-is-easier" title="Permalink to this headline">¶</a></h1>
<p>This simple book is meant to get you started in programming. The title
says it's the hard way to learn to write code; but it's actually not.
It's only the "hard" way because it's the way people <em>used</em> to teach
things. With the help of this book, you will do the incredibly simple
things that all programmers need to do to learn a language:</p>
<ol class="arabic simple">
<li>Go through each exercise.</li>
<li>Type in each sample exactly.</li>
<li>Make it run.</li>
</ol>
<p>That's it. This will be <em>very</em> difficult at first, but stick with it. If
you go through this book, and do each exercise for one or two hours a
night, you will have a good foundation for moving onto another book. You
might not really learn "programming" from this book, but you will learn
the foundation skills you need to start learning the language.</p>
<p>This book's job is to teach you the three most essential skills that a
beginning programmer needs to know: Reading and Writing, Attention to
Detail, Spotting Differences.</p>
<div class="section" id="reading-and-writing">
<h2>Reading and Writing<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#reading-and-writing" title="Permalink to this headline">¶</a></h2>
<p>It seems stupidly obvious, but, if you have a problem typing, you will
have a problem learning to code. Especially if you have a problem typing
the fairly odd characters in source code. Without this simple skill you
will be unable to learn even the most basic things about how software
works.</p>
<p>Typing the code samples and getting them to run will help you learn the
names of the symbols, get familiar with typing them, and get you reading
the language.</p>
</div>
<div class="section" id="attention-to-detail">
<h2>Attention to Detail<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#attention-to-detail" title="Permalink to this headline">¶</a></h2>
<p>The one skill that separates bad programmers from good programmers is
attention to detail. In fact, it's what separates the good from the bad
in any profession. Without paying attention to the tiniest details of
your work, you will miss key elements of what you create. In
programming, this is how you end up with bugs and difficult-to-use
systems.</p>
<p>By going through this book, and copying each example <em>exactly</em>, you will
be training your brain to focus on the details of what you are doing, as
you are doing it.</p>
</div>
<div class="section" id="spotting-differences">
<h2>Spotting Differences<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#spotting-differences" title="Permalink to this headline">¶</a></h2>
<p>A very important skill -- that most programmers develop over time -- is
the ability to visually notice differences between things. An
experienced programmer can take two pieces of code that are slightly
different and immediately start pointing out the differences.
Programmers have invented tools to make this even easier, but we won't
be using any of these. You first have to train your brain the hard way,
then you can use the tools.</p>
<p>While you do these exercises, typing each one in, you will be making
mistakes. It's inevitable; even seasoned programmers would make a few.
Your job is to compare what you have written to what's required, and fix
all the differences. By doing so, you will train yourself to notice
mistakes, bugs, and other problems.</p>
</div>
<div class="section" id="do-not-copy-paste">
<h2>Do Not Copy-Paste<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#do-not-copy-paste" title="Permalink to this headline">¶</a></h2>
<p>You must <em>type</em> each of these exercises in, manually. If you copy and
paste, you might as well just not even do them. The point of these
exercises is to train your hands, your brain, and your mind in how to
read, write, and see code. If you copy-paste, you are cheating yourself
out of the effectiveness of the lessons.</p>
</div>
<div class="section" id="a-note-on-practice-and-persistence">
<h2>A Note On Practice And Persistence<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#a-note-on-practice-and-persistence" title="Permalink to this headline">¶</a></h2>
<p>While you are studying programming, I'm studying how to play guitar. I
practice it every day for at least 2 hours a day. I play scales, chords,
and arpeggios for an hour at least and then learn music theory, ear
training, songs and anything else I can. Some days I study guitar and
music for 8 hours because I feel like it and it's fun. To me repetitive
practice is natural and just how to learn something. I know that to get
good at anything you have to practice every day, even if I suck that day
(which is often) or it's difficult. Keep trying and eventually it'll be
easier and fun.</p>
<p>As you study this book, and continue with programming, remember that
anything worth doing is difficult at first. Maybe you are the kind of
person who is afraid of failure so you give up at the first sign of
difficulty. Maybe you never learned self-discipline so you can't do
anything that's "boring". Maybe you were told that you are "gifted" so
you never attempt anything that might make you seem stupid or not a
prodigy. Maybe you are competitive and unfairly compare yourself to
someone like me who's been programming for 20+ years.</p>
<p>Whatever your reason for wanting to quit, keep at it. Force yourself. If
you run into an Extra Credit you can't do, or a lesson you just do not
understand, then skip it and come back to it later. Just keep going
because with programming there's this very odd thing that happens.</p>
<p>At first, you will not understand anything. It'll be weird, just like
with learning any human language. You will struggle with words, and not
know what symbols are what, and it'll all be very confusing. Then one
day <em>BANG</em> your brain will snap and you will suddenly "get it". If you
keep doing the exercises and keep trying to understand them, you will
get it. You might not be a master coder, but you will at least
understand how programming works.</p>
<p>If you give up, you won't ever reach this point. You will hit the first
confusing thing (which is everything at first) and then stop. If you
keep trying, keep typing it in, trying to understand it and reading
about it, you will eventually get it.</p>
<p>But, if you go through this whole book, and you still do not understand
how to code, at least you gave it a shot. You can say you tried your
best and a little more and it didn't work out, but at least you tried.
You can be proud of that.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#license" title="Permalink to this headline">¶</a></h2>
<p>This book is Copyright (C) 2011 by Zed A. Shaw. You are free to
distribute this book to anyone you want, so long as you do <em>not</em> charge
anything for it, <em>and</em> it is not altered. You must give away the book in
its entirety, or not at all. This means it's alright for you to teach a
class using the book, so long as you aren't charging students for the
<em>book</em> and you give them the whole book unmodified.</p>
</div>
<div class="section" id="special-thanks">
<h2>Special Thanks<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#special-thanks" title="Permalink to this headline">¶</a></h2>
<p>I'd like to thank a few people who helped with this edition of the book.
First is my editor at <em>Pretty Girl Editing Services</em> who helped me edit
the book and is just lovely all by herself. Then there's <em>Greg Newman</em>,
who did the cover jacket and artwork, plus reviewed copies of the book.
His artwork made the book look like a real book, and didn't mind that I
totally forgot to give him credit in the first edition. I'd also like to
thank <em>Brian Shumate</em> for doing the website landing page and other site
design help, which I need a lot of help on.</p>
<p>Finally, I'd like to thank the hundreds of thousands of people who read
the first edition and especially the ones who submitted bug reports and
comments to improve the book. It really made this edition solid and I
couldn't have done it without all of you. Thank you.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
   

    <a href="#top">Top of page</a>
		<div class="document" id="ex0c">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-0-the-setup">
<h1>Exercise 0: The Setup<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-0-the-setup" title="Permalink to this headline">¶</a></h1>
<p>This exercise has no code. It is simply the exercise you complete to get
your computer setup to run Ruby. You should follow these instructions as
exactly as possible.</p>
<p>This tutorial assumes that you are using Ruby version 1.9.2.</p>
<p>Your system might already have Ruby installed. Open up a console and try
running:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby -v
<span class="go">ruby 1.9.2</span>
</pre></div>
</div>
<p>If you don't already have Ruby installed on your system, I highly
recommend using <a class="reference external" href="https://rvm.beginrescueend.com/">Ruby Version Manager
(RVM)</a> to install it, regardless of
which OS you are running.</p>
<div class="section" id="mac-osx">
<h2>Mac OSX<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#mac-osx" title="Permalink to this headline">¶</a></h2>
<p>To complete this exercise, complete the following tasks:</p>
<ol class="arabic simple">
<li>Go to <a class="reference external" href="http://www.barebones.com/products/textwrangler/">http://www.barebones.com/products/textwrangler/</a> with your browser, get
the <tt class="docutils literal"><span class="pre">TextWrangler</span></tt> text editor, and install it.</li>
<li>Put TextWrangler (your editor) in your Dock so you can reach it easily.</li>
<li>Find your "Terminal" program. Search for it. You will find it.</li>
<li>Put your Terminal in your Dock as well.</li>
<li>Run your Terminal program. It won't look like much.</li>
<li>In your Terminal program, run <tt class="docutils literal"><span class="pre">irb</span></tt> (Interactive Ruby). You run
things in Terminal by just typing their name and hitting RETURN.<ol class="arabic">
<li>If you run <tt class="docutils literal"><span class="pre">irb</span></tt> and it's not there (<tt class="docutils literal"><span class="pre">irb</span></tt> is not
recognized..). Install it using <a class="reference external" href="https://rvm.beginrescueend.com/">Ruby Version Manager
(RVM)</a>.</li>
</ol>
</li>
<li>Hit CTRL-D (<tt class="docutils literal"><span class="pre">^D</span></tt>) and get out of <tt class="docutils literal"><span class="pre">irb</span></tt>.</li>
<li>You should be back at a prompt similar to what you had before you
typed <tt class="docutils literal"><span class="pre">irb</span></tt>. If not find out why.</li>
<li>Learn how to make a directory in the Terminal. Search online for
help.</li>
<li>Learn how to change into a directory in the Terminal. Again search
online.</li>
<li>Use your editor to create a file in this directory. You will make
the file, "Save" or "Save As...", and pick this directory.</li>
<li>Go back to Terminal using just the keyboard to switch windows. Look
it up if you can't figure it out.</li>
<li>Back in Terminal, see if you can list the directory to see your
newly created file. Search online for how to list a directory.</li>
</ol>
</div>
<div class="section" id="osx-what-you-should-see">
<h2>OSX: What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#osx-what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>Here's me doing the above on my computer in Terminal. Your computer
would be different, so see if you can figure out all the differences
between what I did and what you should do.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">Last login: Sat Apr 24 00:56:54 on ttys001</span>
<span class="go">~ $ irb</span>
<span class="go">ruby-1.9.2-p180 :001 &gt;</span>
<span class="go">ruby-1.9.2-p180 :002 &gt; ^D</span>
<span class="go">~ $ mkdir mystuff</span>
<span class="go">~ $ cd mystuff</span>
<span class="go">mystuff $ ls</span>
<span class="gp">#</span> ... Use TextWrangler here to edit test.txt....
<span class="go">mystuff $ ls</span>
<span class="go">test.txt</span>
<span class="go">mystuff $</span>
</pre></div>
</div>
</div>
<div class="section" id="windows">
<h2>Windows<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#windows" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Contributed by zhmark.</p>
</div>
<ol class="arabic simple">
<li>Go to <a class="reference external" href="http://notepad-plus-plus.org/">http://notepad-plus-plus.org/</a> with your browser, get
the <tt class="docutils literal"><span class="pre">Notepad++</span></tt> text editor, and install it. You do not need to be administrator to do this.</li>
<li>Make sure you can get to Notepad++ easily by putting it on your desktop
and/or in Quick Launch. Both options are available during setup.</li>
<li>Find your "Terminal" program. It's called <tt class="docutils literal"><span class="pre">Command</span> <span class="pre">Prompt</span></tt>.
Alternatively just run <tt class="docutils literal"><span class="pre">cmd</span></tt>.</li>
<li>Make a shortcut to it on your desktop and/or <tt class="docutils literal"><span class="pre">Quick</span> <span class="pre">Launch</span></tt> for
your convenience.</li>
<li>Run your Terminal program. It won't look like much.</li>
<li>In your Terminal program, run <tt class="docutils literal"><span class="pre">irb</span></tt> (Interactive Ruby). You run
things in Terminal by just typing their name and hitting RETURN.<ol class="arabic">
<li>If you run <tt class="docutils literal"><span class="pre">irb</span></tt> and it's not there (<tt class="docutils literal"><span class="pre">irb</span></tt> is not
recognized..). Install it using <a class="reference external" href="https://rvm.beginrescueend.com/">Ruby Version Manager
(RVM)</a>.</li>
</ol>
</li>
<li>Hit CTRL-Z (^Z), Enter and get out of <tt class="docutils literal"><span class="pre">irb</span></tt>.</li>
<li>You should be back at a prompt similar to what you had before you
typed <tt class="docutils literal"><span class="pre">irb</span></tt>. If not find out why.</li>
<li>Learn how to make a directory in the Terminal. Search online for
help.</li>
<li>Learn how to change into a directory in the Terminal. Again search
online.</li>
<li>Use your editor to create a file in this directory. Make the file,
"Save" or "Save As...", and pick this directory.</li>
<li>Go back to Terminal using just the keyboard to switch windows. Look
it up if you can't figure it out.</li>
<li>Back in Terminal, see if you can list the directory to see your
newly created file. Search online for how to list a directory.</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Windows is a big problem for Ruby. Sometimes you
install Ruby and one computer will have no problems, and another
computer will be missing important features. If you have problems,
please visit:
<a class="reference external" href="http://rubyinstaller.org/">http://rubyinstaller.org/</a></p>
</div>
</div>
<div class="section" id="windows-what-you-should-see">
<h2>Windows: What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#windows-what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="go">C:\Documents and Settings\you&gt;irb</span>
<span class="go">ruby-1.9.2-p180 :001 &gt;</span>
<span class="go">ruby-1.9.2-p180 :001 &gt; ^Z</span>

<span class="go">C:\Documents and Settings\you&gt;mkdir mystuff</span>

<span class="go">C:\Documents and Settings\you&gt;cd mystuff</span>

<span class="go">... Here you would use Notepad++ to make test.txt in mystuff ...</span>

<span class="go">C:\Documents and Settings\you\mystuff&gt;</span>
<span class="go">   &lt;bunch of unimportant errors if you istalled it as non-admin - ignore them - hit Enter&gt;</span>
<span class="go">C:\Documents and Settings\you\mystuff&gt;dir</span>
<span class="go"> Volume in drive C is</span>
<span class="go"> Volume Serial Number is 085C-7E02</span>

<span class="go"> Directory of C:\Documents and Settings\you\mystuff</span>

<span class="go">04.05.2010  23:32    &lt;DIR&gt;          .</span>
<span class="go">04.05.2010  23:32    &lt;DIR&gt;          ..</span>
<span class="go">04.05.2010  23:32                 6 test.txt</span>
<span class="go">               1 File(s)              6 bytes</span>
<span class="go">               2 Dir(s)  14 804 623 360 bytes free</span>

<span class="go">C:\Documents and Settings\you\mystuff&gt;</span>
</pre></div>
</div>
<p>You will probably see a very different prompt, Ruby information, and
other stuff but this is the general idea. If your system is different
let us know and we'll fix it.</p>
</div>
<div class="section" id="linux">
<h2>Linux<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#linux" title="Permalink to this headline">¶</a></h2>
<p>Linux is a varied operating system with a bunch of different ways to
install software. I'm assuming if you are running Linux then you know
how to install packages so here are your instructions:</p>
<ol class="arabic simple">
<li>Use your Linux package manager and install the <tt class="docutils literal"><span class="pre">gedit</span></tt> text editor.</li>
<li>Make sure you can get to gedit easily by putting it in your window
manager's menu.<ol class="arabic">
<li>Run gedit so we can fix some stupid defaults it has.</li>
<li>Open <tt class="docutils literal"><span class="pre">Preferences</span></tt> select the <tt class="docutils literal"><span class="pre">Editor</span></tt> tab.</li>
<li>Change <tt class="docutils literal"><span class="pre">Tab</span> <span class="pre">width</span></tt>: to 2.</li>
<li>Select (make sure a check mark is in)
<tt class="docutils literal"><span class="pre">Insert</span> <span class="pre">spaces</span> <span class="pre">instead</span> <span class="pre">of</span> <span class="pre">tabs</span></tt>.</li>
<li>Turn on "Automatic indentation" as well.</li>
<li>Open the <tt class="docutils literal"><span class="pre">View</span></tt> tab turn on "Display line numbers".</li>
</ol>
</li>
<li>Find your "Terminal" program. It could be called GNOME Terminal,
Konsole, or xterm.</li>
<li>Put your Terminal in your Dock as well.</li>
<li>Run your Terminal program. It won't look like much.</li>
<li>In your Terminal program, run <tt class="docutils literal"><span class="pre">irb</span></tt> (Interactive Ruby). You run
things in Terminal by just typing their name and hitting RETURN.<ol class="arabic">
<li>If you run <tt class="docutils literal"><span class="pre">irb</span></tt> and it's not there (<tt class="docutils literal"><span class="pre">irb</span></tt> is not
recognized..). Install it using <a class="reference external" href="https://rvm.beginrescueend.com/">Ruby Version Manager
(RVM)</a>.</li>
</ol>
</li>
<li>Hit CTRL-D (<tt class="docutils literal"><span class="pre">^D</span></tt>) and get out of <tt class="docutils literal"><span class="pre">irb</span></tt>.</li>
<li>You should be back at a prompt similar to what you had before you
typed <tt class="docutils literal"><span class="pre">irb</span></tt>. If not find out why.</li>
<li>Learn how to make a directory in the Terminal. Search online for
help.</li>
<li>Learn how to change into a directory in the Terminal. Again search
online.</li>
<li>Use your editor to create a file in this directory. Typically you
will make the file, "Save" or "Save As..", and pick this directory.</li>
<li>Go back to Terminal using just the keyboard to switch windows. Look
it up if you can't figure it out.</li>
<li>Back in Terminal see if you can list the directory to see your newly
created file. Search online for how to list a directory.</li>
</ol>
</div>
<div class="section" id="linux-what-you-should-see">
<h2>Linux: What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#linux-what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> irb
<span class="go">ruby-1.9.2-p180 :001 &gt;</span>
<span class="go">ruby-1.9.2-p180 :002 &gt; ^D</span>
<span class="gp">$</span> mkdir mystuff
<span class="gp">$</span> <span class="nb">cd </span>mystuff
<span class="gp">#</span> ... Use gedit here to edit test.txt ...
<span class="gp">$</span> ls
<span class="go">test.txt</span>
<span class="gp">$</span>
</pre></div>
</div>
<p>You will probably see a very different prompt, Ruby information, and
other stuff but this is the general idea.</p>
</div>
<div class="section" id="warnings-for-beginners">
<h2>Warnings For Beginners<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#warnings-for-beginners" title="Permalink to this headline">¶</a></h2>
<p>You are done with this exercise. This exercise might be hard for you
depending on your familiarity with your computer. If it is difficult,
take the time to read and study and get through it, because until you
can do these very basic things you will find it difficult to get much
programming done.</p>
<p>If a programmer tells you to use <tt class="docutils literal"><span class="pre">vim</span></tt> or <tt class="docutils literal"><span class="pre">emacs</span></tt>, tell them, "No."
These editors are for when you are a better programmer. All you need
right now is an editor that lets you put text into a file. We will use
<tt class="docutils literal"><span class="pre">gedit</span></tt> because it is simple and the same on all computers.
Professional programmers use <tt class="docutils literal"><span class="pre">gedit</span></tt> so it's good enough for you
starting out.</p>
<p>A programmer will eventually tell you to use Mac OSX or Linux. If the
programmer likes fonts and typography, they'll tell you to get a Mac OSX
computer. If they like control and have a huge beard, they'll tell you
to install Linux. Again, use whatever computer you have right now that
works. All you need is <tt class="docutils literal"><span class="pre">gedit</span></tt>, a Terminal, and Ruby.</p>
<p>Finally the purpose of this setup is so you can do three things very
reliably while you work on the exercises:</p>
<ol class="arabic simple">
<li><em>Write</em> exercises using <tt class="docutils literal"><span class="pre">gedit</span></tt>.</li>
<li><em>Run</em> the exercises you wrote.</li>
<li><em>Fix</em> them when they are broken.</li>
<li>Repeat.</li>
</ol>
<p>Anything else will only confuse you, so stick to the plan.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <a href="#top">Top of page</a>
		<div class="document" id="ex1">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-1-a-good-first-program">
<h1>Exercise 1: A Good First Program<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-1-a-good-first-program" title="Permalink to this headline">¶</a></h1>
<p>Remember, you should have spent a good amount of time in Exercise 0
learning how to install a text editor, run the text editor, run the
Terminal, and work with both of them. If you haven't done that then do
not go on. You will not have a good time. This is the only time I'll
start an exercise with a warning that you should not skip or get ahead
of yourself.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">puts</span> <span class="s2">"Hello World!"</span>
<span class="nb">puts</span> <span class="s2">"Hello Again"</span>
<span class="nb">puts</span> <span class="s2">"I like typing this."</span>
<span class="nb">puts</span> <span class="s2">"This is fun."</span>
<span class="nb">puts</span> <span class="s1">'Yay! Printing.'</span>
<span class="nb">puts</span> <span class="s2">"I'd much rather you 'not'."</span>
<span class="nb">puts</span> <span class="s1">'I "said" do not touch this.'</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Type the above into a single file named <tt class="docutils literal"><span class="pre">ex1.rb</span></tt>. This is important as
Ruby works best with files ending in <tt class="docutils literal"><span class="pre">.rb</span></tt>.</p>
<p>Then in Terminal run the file by typing:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">ruby ex1.rb</span>
</pre></div>
</div>
<p>If you did it right then you should see the same output I have below. If
not, you have done something wrong. No, the computer is not wrong.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex1.rb
<span class="go">Hello World!</span>
<span class="go">Hello Again</span>
<span class="go">I like typing this.</span>
<span class="go">This is fun.</span>
<span class="go">Yay! Printing.</span>
<span class="go">I'd much rather you 'not'.</span>
<span class="go">I "said" do not touch this.</span>
<span class="gp">$</span>
</pre></div>
</div>
<p>You may see the name of your directory before the <tt class="docutils literal"><span class="pre">$</span></tt> which is fine,
but if your output is not exactly the same, find out why and fix it.</p>
<p>If you have an error it will look like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">ruby ex1.rb</span>
<span class="go">ex1.rb:4: syntax error, unexpected tCONSTANT, expecting $end</span>
<span class="go">puts "This is fun."</span>
<span class="go">          ^</span>
</pre></div>
</div>
<p>It's important that you can read these since you will be making many of
these mistakes. Even I make many of these mistakes. Let's look at this
line-by-line.</p>
<ol class="arabic simple">
<li>Here we ran our command in the terminal to run the ex1.rb script.</li>
<li>Ruby then tells us that the file ex1.rb has an error on line 4.</li>
<li>It then prints this line for us.</li>
<li>Then it puts a <tt class="docutils literal"><span class="pre">^</span></tt> (caret) character to point at where the problem
is.</li>
<li>Finally, it prints out a "syntax error" and tells us something about
what might be the error. Usually these are very cryptic, but if you
copy that text into a search engine, you will find someone else who's
had that error and you can probably figure out how to fix it.</li>
</ol>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>You will also have Extra Credit. The Extra Credit contains things you
should try to do. If you can't, skip it and come back later.</p>
<p>For this exercise, try these things:</p>
<ol class="arabic simple">
<li>Make your script print another line.</li>
<li>Make your script print only one of the lines.</li>
<li>Put a <tt class="docutils literal"><span class="pre">#</span></tt> (octothorpe) character at the beginning of a line. What
did it do? Try to find out what this character does.</li>
<li>From now on, I won't explain how each exercise works unless an
exercise is different.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An 'octothorpe' is also called a 'pound', 'hash', 'mesh',
or any number of names. Pick the one that makes you chill out.</p>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
   

    <a href="#top">Top of page</a>
		<div class="document" id="ex2">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-2-comments-and-pound-characters">
<h1>Exercise 2: Comments And Pound Characters<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-2-comments-and-pound-characters" title="Permalink to this headline">¶</a></h1>
<p>Comments are very important in your programs. They are used to tell you
what something does in English, and they also are used to disable parts
of your program if you need to remove them temporarily. Here's how you
use comments in Ruby:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># A comment, this is so you can read your program later.</span>
<span class="c1"># Anything after the # is ignored by Ruby.</span>

<span class="nb">puts</span> <span class="s2">"I could have code like this."</span> <span class="c1"># and the comment after is ignored</span>

<span class="c1"># You can also use a comment to "disable" or comment out a piece of code:</span>
<span class="c1"># puts "This won't run."</span>

<span class="nb">puts</span> <span class="s2">"This will run."</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex2.rb
<span class="go">I could have code like this.</span>
<span class="go">This will run.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Find out if you were right about what the <tt class="docutils literal"><span class="pre">#</span></tt> character does and
make sure you know what it's called (octothorpe or pound character).</li>
<li>Take your <tt class="docutils literal"><span class="pre">ex2.rb</span></tt> file and review each line going backwards. Start
at the last line, and check each word in reverse against what you
should have typed.</li>
<li>Did you find more mistakes? Fix them.</li>
<li>Read what you typed above out loud, including saying each character
by its name. Did you find more mistakes? Fix them.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>




    <a href="#top">Top of page</a>
		<div class="document" id="ex3">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-3-numbers-and-math">
<h1>Exercise 3: Numbers And Math<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-3-numbers-and-math" title="Permalink to this headline">¶</a></h1>
<p>Every programming language has some kind of way of doing numbers and
math. Do not worry, programmers lie frequently about being math geniuses
when they really aren't. If they were math geniuses, they would be doing
math, not writing ads and social network games to steal people's money.</p>
<p>This exercise has lots of math symbols. Let's name them right away so
you know what they are called. As you type this one in, say the names.
When saying them feels boring you can stop saying them. Here are the
names:</p>
<div class="highlight-python"><pre>+ plus
- minus
/ slash
* asterisk
% percent
&lt; less-than
&gt; greater-than
&lt;= less-than-equal
&gt;= greater-than-equal</pre>
</div>
<p>Notice how the operations are missing? After you type in the code for
this exercise, go back and figure out what each of these does and
complete the table. For example, <tt class="docutils literal"><span class="pre">+</span></tt> does addition.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">puts</span> <span class="s2">"I will now count my chickens:"</span>

<span class="nb">puts</span> <span class="s2">"Hens"</span><span class="p">,</span> <span class="mi">25</span> <span class="o">+</span> <span class="mi">30</span> <span class="o">/</span> <span class="mi">6</span>
<span class="nb">puts</span> <span class="s2">"Roosters"</span><span class="p">,</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">25</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">%</span> <span class="mi">4</span>

<span class="nb">puts</span> <span class="s2">"Now I will count the eggs:"</span>

<span class="nb">puts</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">6</span>

<span class="nb">puts</span> <span class="s2">"Is it true that 3 + 2 &lt; 5 - 7?"</span>

<span class="nb">puts</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">7</span>

<span class="nb">puts</span> <span class="s2">"What is 3 + 2?"</span><span class="p">,</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span>
<span class="nb">puts</span> <span class="s2">"What is 5 - 7?"</span><span class="p">,</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">7</span>

<span class="nb">puts</span> <span class="s2">"Oh, that's why it's false."</span>

<span class="nb">puts</span> <span class="s2">"How about some more."</span>

<span class="nb">puts</span> <span class="s2">"Is it greater?"</span><span class="p">,</span> <span class="mi">5</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">2</span>
<span class="nb">puts</span> <span class="s2">"Is it greater or equal?"</span><span class="p">,</span> <span class="mi">5</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">2</span>
<span class="nb">puts</span> <span class="s2">"Is it less or equal?"</span><span class="p">,</span> <span class="mi">5</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">2</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex3.rb
<span class="go">I will now count my chickens:</span>
<span class="go">Hens</span>
<span class="go">30</span>
<span class="go">Roosters</span>
<span class="go">97</span>
<span class="go">Now I will count the eggs:</span>
<span class="go">7</span>
<span class="go">Is it true that 3 + 2 &lt; 5 - 7?</span>
<span class="go">false</span>
<span class="go">What is 3 + 2?</span>
<span class="go">5</span>
<span class="go">What is 5 - 7?</span>
<span class="go">-2</span>
<span class="go">Oh, that's why it's false.</span>
<span class="go">How about some more.</span>
<span class="go">Is it greater?</span>
<span class="go">true</span>
<span class="go">Is it greater or equal?</span>
<span class="go">true</span>
<span class="go">Is it less or equal?</span>
<span class="go">false</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Above each line, use the <tt class="docutils literal"><span class="pre">#</span></tt> to write a comment to yourself
explaining what the line does.</li>
<li>Remember in Exercise 0 when you started IRB? Start IRB this way again
and using the above characters and what you know, use Ruby as a
calculator.</li>
<li>Find something you need to calculate and write a new <tt class="docutils literal"><span class="pre">.rb</span></tt> file
that does it.</li>
<li>Notice the math seems "wrong"? There are no fractions, only whole
numbers. Find out why by researching what a "floating point" number
is.</li>
<li>Rewrite <tt class="docutils literal"><span class="pre">ex3.rb</span></tt> to use floating point numbers so it's more
accurate (hint: 20.0 is floating point).</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <a href="#top">Top of page</a>
		<div class="document" id="ex4">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-4-variables-and-names">
<h1>Exercise 4: Variables And Names<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-4-variables-and-names" title="Permalink to this headline">¶</a></h1>
<p>Now you can print things with <tt class="docutils literal"><span class="pre">puts</span></tt> and you can do math. The next
step is to learn about variables. In programming a variable is nothing
more than a name for something so you can use the name rather than the
something as you code. Programmers use these variable names to make
their code read more like English, and because they have lousy memories.
If they didn't use good names for things in their software, they'd get
lost when they tried to read their code again.</p>
<p>If you get stuck with this exercise, remember the tricks you have been
taught so far of finding differences and focusing on details:</p>
<ol class="arabic simple">
<li>Write a comment above each line explaining to yourself what it does
in English.</li>
<li>Read your <tt class="docutils literal"><span class="pre">.rb</span></tt> file backwards.</li>
<li>Read your <tt class="docutils literal"><span class="pre">.rb</span></tt> file out loud saying even the characters.</li>
</ol>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">cars</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">space_in_a_car</span> <span class="o">=</span> <span class="mi">4</span><span class="o">.</span><span class="mi">0</span>
<span class="n">drivers</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">passengers</span> <span class="o">=</span> <span class="mi">90</span>
<span class="n">cars_not_driven</span> <span class="o">=</span> <span class="n">cars</span> <span class="o">-</span> <span class="n">drivers</span>
<span class="n">cars_driven</span> <span class="o">=</span> <span class="n">drivers</span>
<span class="n">carpool_capacity</span> <span class="o">=</span> <span class="n">cars_driven</span> <span class="o">*</span> <span class="n">space_in_a_car</span>
<span class="n">average_passengers_per_car</span> <span class="o">=</span> <span class="n">passengers</span> <span class="o">/</span> <span class="n">cars_driven</span>

<span class="nb">puts</span> <span class="s2">"There are </span><span class="si">#{</span><span class="n">cars</span><span class="si">}</span><span class="s2"> cars available."</span>
<span class="nb">puts</span> <span class="s2">"There are only </span><span class="si">#{</span><span class="n">drivers</span><span class="si">}</span><span class="s2"> drivers available."</span>
<span class="nb">puts</span> <span class="s2">"There will be </span><span class="si">#{</span><span class="n">cars_not_driven</span><span class="si">}</span><span class="s2"> empty cars today."</span>
<span class="nb">puts</span> <span class="s2">"We can transport </span><span class="si">#{</span><span class="n">carpool_capacity</span><span class="si">}</span><span class="s2"> people today."</span>
<span class="nb">puts</span> <span class="s2">"We have </span><span class="si">#{</span><span class="n">passengers</span><span class="si">}</span><span class="s2"> passengers to carpool today."</span>
<span class="nb">puts</span> <span class="s2">"We need to put about </span><span class="si">#{</span><span class="n">average_passengers_per_car</span><span class="si">}</span><span class="s2"> in each car."</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">_</span></tt> in <tt class="docutils literal"><span class="pre">space_in_a_car</span></tt> is called an underscore
character. Find out how to type it if you do not already know. We
use this character a lot to put an imaginary space between words in
variable names.</p>
</div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex4.rb
<span class="go">There are 100 cars available.</span>
<span class="go">There are only 30 drivers available.</span>
<span class="go">There will be 70 empty cars today.</span>
<span class="go">We can transport 120.0 people today.</span>
<span class="go">We have 90 passengers to carpool today.</span>
<span class="go">We need to put about 3 in each car.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>When I wrote this program the first time I had a mistake, and Ruby told
me about it like this:</p>
<div class="highlight-python"><pre>ex4.rb:8:in `&lt;main&gt;': undefined local variable or method `car_pool_capacity' for main:Object (NameError)</pre>
</div>
<p>Explain this error in your own words. Make sure you use line numbers and
explain why.</p>
</div>
<div class="section" id="here-s-more-extra-credit">
<h2>Here's more extra credit:<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#here-s-more-extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>I used 4.0 for <tt class="docutils literal"><span class="pre">space_in_a_car</span></tt>, but is that necessary? What happens if it's
just 4?</li>
<li>Remember that 4.0 is a "floating point" number. Find out what that
means.</li>
<li>Write comments above each of the variable assignments.</li>
<li>Make sure you know what <tt class="docutils literal"><span class="pre">=</span></tt> is called (equals) and that it's making
names for things.</li>
<li>Remember <tt class="docutils literal"><span class="pre">_</span></tt> is an underscore character.</li>
<li>Try running IRB as a calculator like you did before and use variable
names to do your calculations. Popular variable names are also <tt class="docutils literal"><span class="pre">i</span></tt>,
<tt class="docutils literal"><span class="pre">x</span></tt>, and <tt class="docutils literal"><span class="pre">j</span></tt>.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <a href="#top">Top of page</a>
		<div class="document" id="ex5">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-5-more-variables-and-printing">
<h1>Exercise 5: More Variables And Printing<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-5-more-variables-and-printing" title="Permalink to this headline">¶</a></h1>
<p>Now we'll do even more typing of variables and printing them out. This
time we'll use something called a "format string". Every time you put
<tt class="docutils literal"><span class="pre">"</span></tt> (double-quotes) around a piece of text you have been making a
string. A string is how you make something that your program might give
to a human. You print them, save them to files, send them to web
servers, all sorts of things.</p>
<p>Strings are really handy, so in this exercise you will learn how to make
strings that have variables embedded in them. You embed variables inside
a string by using specialized format sequences and then putting the
variables at the end with a special syntax that tells Ruby, "Hey, this
is a format string, put these variables in there."</p>
<p>As usual, just type this in even if you do not understand it and make it
exactly the same.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">my_name</span> <span class="o">=</span> <span class="s1">'Zed A. Shaw'</span>
<span class="n">my_age</span> <span class="o">=</span> <span class="mi">35</span> <span class="c1"># not a lie</span>
<span class="n">my_height</span> <span class="o">=</span> <span class="mi">74</span> <span class="c1"># inches</span>
<span class="n">my_weight</span> <span class="o">=</span> <span class="mi">180</span> <span class="c1"># lbs</span>
<span class="n">my_eyes</span> <span class="o">=</span> <span class="s1">'Blue'</span>
<span class="n">my_teeth</span> <span class="o">=</span> <span class="s1">'White'</span>
<span class="n">my_hair</span> <span class="o">=</span> <span class="s1">'Brown'</span>

<span class="nb">puts</span> <span class="s2">"Let's talk about %s."</span> <span class="o">%</span> <span class="n">my_name</span>
<span class="nb">puts</span> <span class="s2">"He's %d inches tall."</span> <span class="o">%</span> <span class="n">my_height</span>
<span class="nb">puts</span> <span class="s2">"He's %d pounds heavy."</span> <span class="o">%</span> <span class="n">my_weight</span>
<span class="nb">puts</span> <span class="s2">"Actually that's not too heavy."</span>
<span class="nb">puts</span> <span class="s2">"He's got %s eyes and %s hair."</span> <span class="o">%</span> <span class="o">[</span><span class="n">my_eyes</span><span class="p">,</span> <span class="n">my_hair</span><span class="o">]</span>
<span class="nb">puts</span> <span class="s2">"His teeth are usually %s depending on the coffee."</span> <span class="o">%</span> <span class="n">my_teeth</span>

<span class="c1"># this line is tricky, try to get it exactly right</span>
<span class="nb">puts</span> <span class="s2">"If I add %d, %d, and %d I get %d."</span> <span class="o">%</span> <span class="o">[</span>
    <span class="n">my_age</span><span class="p">,</span> <span class="n">my_height</span><span class="p">,</span> <span class="n">my_weight</span><span class="p">,</span> <span class="n">my_age</span> <span class="o">+</span> <span class="n">my_height</span> <span class="o">+</span> <span class="n">my_weight</span><span class="o">]</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex5.rb
<span class="go">Let's talk about Zed A. Shaw.</span>
<span class="go">He's 74 inches tall.</span>
<span class="go">He's 180 pounds heavy.</span>
<span class="go">Actually that's not too heavy.</span>
<span class="go">He's got Blue eyes and Brown hair.</span>
<span class="go">His teeth are usually White depending on the coffee.</span>
<span class="go">If I add 35, 74, and 180 I get 289.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Change all the variables so there isn't the <tt class="docutils literal"><span class="pre">my_</span></tt> in front. Make
sure you change the name everywhere, not just where you used <tt class="docutils literal"><span class="pre">=</span></tt> to
set them.</li>
<li>Try more format sequences.</li>
<li>Search online for all of the Ruby format sequences.</li>
<li>Try to write some variables that convert the inches and pounds to
centimeters and kilos. Do not just type in the measurements. Work out
the math in Ruby.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>




    <a href="#top">Top of page</a>
		<div class="document" id="ex6">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-6-strings-and-text">
<h1>Exercise 6: Strings And Text<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-6-strings-and-text" title="Permalink to this headline">¶</a></h1>
<p>While you have already been writing strings, you still do not know what
they do. In this exercise we create a bunch of variables with complex
strings so you can see what they are for. First an explanation of
strings.</p>
<p>A string is usually a bit of text you want to display to someone, or
"export" out of the program you are writing. Ruby knows you want
something to be a string when you put either <tt class="docutils literal"><span class="pre">"</span></tt> (double-quotes) or
<tt class="docutils literal"><span class="pre">'</span></tt> (single-quotes) around the text. You saw this many times with your
use of <tt class="docutils literal"><span class="pre">puts</span></tt> when you put the text you want to go to the string
inside <tt class="docutils literal"><span class="pre">"</span></tt> or <tt class="docutils literal"><span class="pre">'</span></tt> after the <tt class="docutils literal"><span class="pre">puts</span></tt>. Then Ruby displays it.</p>
<p>Strings may contain the format characters you have discovered so far.
You simply put the formatted variables in the string, and then a <tt class="docutils literal"><span class="pre">%</span></tt>
(percent) character, followed by the variable. The only catch is that if
you want multiple formats in your string to print multiple variables,
you need to put them inside <tt class="docutils literal"><span class="pre">[</span> <span class="pre">]</span></tt> (brackets) separated by <tt class="docutils literal"><span class="pre">,</span></tt>
(commas). It's as if you were telling me to buy you a list of items from
the store and you said, "I want milk, eggs, bread, and soup." Only as a
programmer we say, "[milk, eggs, bread, soup]".</p>
<p>Another way of injecting variables into your strings is to use something
called "string interpolation", which uses the <tt class="docutils literal"><span class="pre">#{</span> <span class="pre">}</span></tt> (pound and curly
brace) characters. So, instead of using format strings:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">name1</span> <span class="o">=</span> <span class="s2">"Joe"</span>
<span class="n">name2</span> <span class="o">=</span> <span class="s2">"Mary"</span>
<span class="nb">puts</span> <span class="s2">"Hello %s, where is %s?"</span> <span class="o">%</span> <span class="o">[</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="o">]</span>
</pre></div>
</div>
<p>We can type:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">name1</span> <span class="o">=</span> <span class="s2">"Joe"</span>
<span class="n">name2</span> <span class="o">=</span> <span class="s2">"Mary"</span>
<span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="n">name1</span><span class="si">}</span><span class="s2">, where is </span><span class="si">#{</span><span class="n">name2</span><span class="si">}</span><span class="s2">?"</span>
</pre></div>
</div>
<p>We will now type in a whole bunch of strings, variables, formats, and
print them. You will also practice using short abbreviated variable
names. Programmers love saving themselves time at your expense by using
annoying cryptic variable names, so let's get you started being able to
read and write them early on.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="s2">"There are </span><span class="si">#{</span><span class="mi">10</span><span class="si">}</span><span class="s2"> types of people."</span>
<span class="n">binary</span> <span class="o">=</span> <span class="s2">"binary"</span>
<span class="n">do_not</span> <span class="o">=</span> <span class="s2">"don't"</span>
<span class="n">y</span> <span class="o">=</span> <span class="s2">"Those who know </span><span class="si">#{</span><span class="n">binary</span><span class="si">}</span><span class="s2"> and those who </span><span class="si">#{</span><span class="n">do_not</span><span class="si">}</span><span class="s2">."</span>

<span class="nb">puts</span> <span class="n">x</span>
<span class="nb">puts</span> <span class="n">y</span>

<span class="nb">puts</span> <span class="s2">"I said: </span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">."</span>
<span class="nb">puts</span> <span class="s2">"I also said: '</span><span class="si">#{</span><span class="n">y</span><span class="si">}</span><span class="s2">'."</span>

<span class="n">hilarious</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">joke_evaluation</span> <span class="o">=</span> <span class="s2">"Isn't that joke so funny?! </span><span class="si">#{</span><span class="n">hilarious</span><span class="si">}</span><span class="s2">"</span>

<span class="nb">puts</span> <span class="n">joke_evaluation</span>

<span class="n">w</span> <span class="o">=</span> <span class="s2">"This is the left side of..."</span>
<span class="n">e</span> <span class="o">=</span> <span class="s2">"a string with a right side."</span>

<span class="nb">puts</span> <span class="n">w</span> <span class="o">+</span> <span class="n">e</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>There are 10 types of people.
Those who know binary and those who don't.
I said: There are 10 types of people..
I also said: 'Those who know binary and those who don't.'.
Isn't that joke so funny?! false
This is the left side of...a string with a right side.</pre>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go through this program and write a comment above each line
explaining it.</li>
<li>Find all the places where a string is put inside a string. There are
four places.</li>
<li>Are you sure there's only four places? How do you know? Maybe I like
lying.</li>
<li>Explain why adding the two strings <tt class="docutils literal"><span class="pre">w</span></tt> and <tt class="docutils literal"><span class="pre">e</span></tt> with <tt class="docutils literal"><span class="pre">+</span></tt> makes a
longer string.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex7">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-7-more-printing">
<h1>Exercise 7: More Printing<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-7-more-printing" title="Permalink to this headline">¶</a></h1>
<p>Now we are going to do a bunch of exercises where you just type code in
and make it run. I won't be explaining much since it is just more of the
same. The purpose is to build up your chops. See you in a few exercises,
and do not skip! Do not paste!</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">puts</span> <span class="s2">"Mary had a little lamb."</span>
<span class="nb">puts</span> <span class="s2">"Its fleece was white as %s."</span> <span class="o">%</span> <span class="s1">'snow'</span>
<span class="nb">puts</span> <span class="s2">"And everywhere that Mary went."</span>
<span class="nb">puts</span> <span class="s2">"."</span> <span class="o">*</span> <span class="mi">10</span>  <span class="c1"># what'd that do?</span>

<span class="n">end1</span> <span class="o">=</span> <span class="s2">"C"</span>
<span class="n">end2</span> <span class="o">=</span> <span class="s2">"h"</span>
<span class="n">end3</span> <span class="o">=</span> <span class="s2">"e"</span>
<span class="n">end4</span> <span class="o">=</span> <span class="s2">"e"</span>
<span class="n">end5</span> <span class="o">=</span> <span class="s2">"s"</span>
<span class="n">end6</span> <span class="o">=</span> <span class="s2">"e"</span>
<span class="n">end7</span> <span class="o">=</span> <span class="s2">"B"</span>
<span class="n">end8</span> <span class="o">=</span> <span class="s2">"u"</span>
<span class="n">end9</span> <span class="o">=</span> <span class="s2">"r"</span>
<span class="n">end10</span> <span class="o">=</span> <span class="s2">"g"</span>
<span class="n">end11</span> <span class="o">=</span> <span class="s2">"e"</span>
<span class="n">end12</span> <span class="o">=</span> <span class="s2">"r"</span>

<span class="c1"># notice how we are using print instead of puts here. change it to puts</span>
<span class="c1"># and see what happens.</span>
<span class="nb">print</span> <span class="n">end1</span> <span class="o">+</span> <span class="n">end2</span> <span class="o">+</span> <span class="n">end3</span> <span class="o">+</span> <span class="n">end4</span> <span class="o">+</span> <span class="n">end5</span> <span class="o">+</span> <span class="n">end6</span>
<span class="nb">print</span> <span class="n">end7</span> <span class="o">+</span> <span class="n">end8</span> <span class="o">+</span> <span class="n">end9</span> <span class="o">+</span> <span class="n">end10</span> <span class="o">+</span> <span class="n">end11</span> <span class="o">+</span> <span class="n">end12</span>

<span class="c1"># this just is polite use of the terminal, try removing it</span>
<span class="nb">puts</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex7.rb
<span class="go">Mary had a little lamb.</span>
<span class="go">Its fleece was white as snow.</span>
<span class="go">And everywhere that Mary went.</span>
<span class="go">..........</span>
<span class="go">CheeseBurger</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>For these next few exercises, you will have the exact same extra credit.</p>
<ol class="arabic simple">
<li>Go back through and write a comment on what each line does.</li>
<li>Read each one backwards or out loud to find your errors.</li>
<li>From now on, when you make mistakes write down on a piece of paper
what kind of mistake you made.</li>
<li>When you go to the next exercise, look at the last mistakes you made
and try not to make them in this new one.</li>
<li>Remember that everyone makes mistakes. Programmers are like magicians
who like everyone to think they are perfect and never wrong, but it's
all an act. They make mistakes all the time.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex8">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-8-printing-printing">
<h1>Exercise 8: Printing, Printing<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-8-printing-printing" title="Permalink to this headline">¶</a></h1>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">formatter</span> <span class="o">=</span> <span class="s2">"%s %s %s %s"</span>

<span class="nb">puts</span> <span class="n">formatter</span> <span class="o">%</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">]</span>
<span class="nb">puts</span> <span class="n">formatter</span> <span class="o">%</span> <span class="o">[</span><span class="s2">"one"</span><span class="p">,</span> <span class="s2">"two"</span><span class="p">,</span> <span class="s2">"three"</span><span class="p">,</span> <span class="s2">"four"</span><span class="o">]</span>
<span class="nb">puts</span> <span class="n">formatter</span> <span class="o">%</span> <span class="o">[</span><span class="kp">true</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span> <span class="kp">true</span><span class="o">]</span>
<span class="nb">puts</span> <span class="n">formatter</span> <span class="o">%</span> <span class="o">[</span><span class="n">formatter</span><span class="p">,</span> <span class="n">formatter</span><span class="p">,</span> <span class="n">formatter</span><span class="p">,</span> <span class="n">formatter</span><span class="o">]</span>
<span class="nb">puts</span> <span class="n">formatter</span> <span class="o">%</span> <span class="o">[</span>
    <span class="s2">"I had this thing."</span><span class="p">,</span>
    <span class="s2">"That you could type up right."</span><span class="p">,</span>
    <span class="s2">"But it didn't sing."</span><span class="p">,</span>
    <span class="s2">"So I said goodnight."</span>
<span class="o">]</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex8.rb
<span class="go">1 2 3 4</span>
<span class="go">one two three four</span>
<span class="go">true false false true</span>
<span class="gp">%</span>s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s
<span class="go">I had this thing. That you could type up right. But it didn't sing. So I said goodnight.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Do your checks of your work, write down your mistakes, try not to
make them on the next exercise.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <a href="#top">Top of page</a>
		<div class="document" id="ex9">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-9-printing-printing-printing">
<h1>Exercise 9: Printing, Printing, Printing<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-9-printing-printing-printing" title="Permalink to this headline">¶</a></h1>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># Here's some new strange stuff, remember type it exactly.</span>

<span class="n">days</span> <span class="o">=</span> <span class="s2">"Mon Tue Wed Thu Fri Sat Sun"</span>
<span class="n">months</span> <span class="o">=</span> <span class="s2">"Jan</span><span class="se">\n</span><span class="s2">Feb</span><span class="se">\n</span><span class="s2">Mar</span><span class="se">\n</span><span class="s2">Apr</span><span class="se">\n</span><span class="s2">May</span><span class="se">\n</span><span class="s2">Jun</span><span class="se">\n</span><span class="s2">Jul</span><span class="se">\n</span><span class="s2">Aug"</span>

<span class="nb">puts</span> <span class="s2">"Here are the days: "</span><span class="p">,</span> <span class="n">days</span>
<span class="nb">puts</span> <span class="s2">"Here are the months: "</span><span class="p">,</span> <span class="n">months</span>

<span class="nb">puts</span> <span class="o">&lt;&lt;</span><span class="no">PARAGRAPH</span>
<span class="sh">There's something going on here.</span>
<span class="sh">With the PARAGRAPH thing</span>
<span class="sh">We'll be able to type as much as we like.</span>
<span class="sh">Even 4 lines if we want, or 5, or 6.</span>
<span class="no">PARAGRAPH</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex9.rb
<span class="go">Here are the days:</span>
<span class="go">Mon Tue Wed Thu Fri Sat Sun</span>
<span class="go">Here are the months:</span>
<span class="go">Jan</span>
<span class="go">Feb</span>
<span class="go">Mar</span>
<span class="go">Apr</span>
<span class="go">May</span>
<span class="go">Jun</span>
<span class="go">Jul</span>
<span class="go">Aug</span>
<span class="go">There's something going on here.</span>
<span class="go">With the PARAGRAPH thing</span>
<span class="go">We'll be able to type as much as we like.</span>
<span class="go">Even 4 lines if we want, or 5, or 6.</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>Do your checks of your work, write down your mistakes, try not to make
them on the next exercise.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex10">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-10-what-was-that">
<h1>Exercise 10: What Was That?<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-10-what-was-that" title="Permalink to this headline">¶</a></h1>
<p>In Exercise 9 I threw you some new stuff, just to keep you on your toes.
I showed you two ways to make a string that goes across multiple lines.
In the first way, I put the characters <tt class="docutils literal"><span class="pre">\n</span></tt> (back-slash n) between the
names of the months. What these two characters do is put a new line
character into the string at that point.</p>
<p>This use of the <tt class="docutils literal"><span class="pre">\</span></tt> (back-slash) character is a way we can put
difficult-to-type characters into a string. There are plenty of these
"escape sequences" available for different characters you might want to
put in, but there's a special one, the double back-slash which is just
two of them <tt class="docutils literal"><span class="pre">\\</span></tt>. These two characters will print just one back-slash.
We'll try a few of these sequences so you can see what I mean.</p>
<p>Another important escape sequence is to escape a single-quote <tt class="docutils literal"><span class="pre">'</span></tt> or
double-quote <tt class="docutils literal"><span class="pre">"</span></tt>. Imagine you have a string that uses double-quotes
and you want to put a double-quote in for the output. If you do this
<tt class="docutils literal"><span class="pre">"I</span> <span class="pre">"understand"</span> <span class="pre">joe."</span></tt> then Ruby will get confused since it will
think the <tt class="docutils literal"><span class="pre">"</span></tt> around <tt class="docutils literal"><span class="pre">"understand"</span></tt> actually ends the string. You
need a way to tell Ruby that the <tt class="docutils literal"><span class="pre">"</span></tt> inside the string isn't a real
double-quote.</p>
<p>To solve this problem you escape double-quotes and single-quotes so Ruby
knows to include in the string. Here's an example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="s2">"I am 6'2</span><span class="se">\"</span><span class="s2"> tall."</span>  <span class="c1"># escape double-quote inside string</span>
<span class="s1">'I am 6\'2" tall.'</span>  <span class="c1"># escape single-quote inside string</span>
</pre></div>
</div>
<p>The second way is by using here document syntax, which uses <tt class="docutils literal"><span class="pre">&lt;&lt;NAME</span></tt>
and works like a string, but you also can put as many lines of text you
as want until you type <tt class="docutils literal"><span class="pre">NAME</span></tt> again. We'll also play with these.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">tabby_cat</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\t</span><span class="s2">I'm tabbed in."</span>
<span class="n">persian_cat</span> <span class="o">=</span> <span class="s2">"I'm split</span><span class="se">\n</span><span class="s2">on a line."</span>
<span class="n">backslash_cat</span> <span class="o">=</span> <span class="s2">"I'm </span><span class="se">\\</span><span class="s2"> a </span><span class="se">\\</span><span class="s2"> cat."</span>

<span class="n">fat_cat</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">MY_HEREDOC</span>
<span class="sh">I'll do a list:</span>
<span class="sh">\t* Cat food</span>
<span class="sh">\t* Fishies</span>
<span class="sh">\t* Catnip\n\t* Grass</span>
<span class="no">MY_HEREDOC</span>

<span class="nb">puts</span> <span class="n">tabby_cat</span>
<span class="nb">puts</span> <span class="n">persian_cat</span>
<span class="nb">puts</span> <span class="n">backslash_cat</span>
<span class="nb">puts</span> <span class="n">fat_cat</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>Look for the tab characters that you made. In this exercise the spacing
is important to get right.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex10.rb
<span class="go">    I'm tabbed in.</span>
<span class="go">I'm split</span>
<span class="go">on a line.</span>
<span class="go">I'm \ a \ cat.</span>
<span class="go">I'll do a list:</span>
<span class="go">    * Cat food</span>
<span class="go">    * Fishies</span>
<span class="go">    * Catnip</span>
<span class="go">    * Grass</span>

<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Search online to see what other escape sequences are available.</li>
<li>Combine escape sequences and format strings to create a more complex
format.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex11">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-11-asking-questions">
<h1>Exercise 11: Asking Questions<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-11-asking-questions" title="Permalink to this headline">¶</a></h1>
<p>Now it is time to pick up the pace. I have got you doing a lot of
printing so that you get used to typing simple things, but those simple
things are fairly boring. What we want to do now is get data into your
programs. This is a little tricky because you have learn to do two
things that may not make sense right away, but trust me and do it
anyway. It will make sense in a few exercises.</p>
<p>Most of what software does is the following:</p>
<ol class="arabic simple">
<li>Take some kind of input from a person.</li>
<li>Change it.</li>
<li>Print out something to show how it changed.</li>
</ol>
<p>So far you have only been printing, but you haven't been able to get any
input from a person, or change it. You may not even know what "input"
means, so rather than talk about it, let's have you do some and see if
you get it. Next exercise we'll do more to explain it.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">print</span> <span class="s2">"How old are you? "</span>
<span class="n">age</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">"How tall are you? "</span>
<span class="n">height</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">"How much do you weigh? "</span>
<span class="n">weight</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"So, you're </span><span class="si">#{</span><span class="n">age</span><span class="si">}</span><span class="s2"> old, </span><span class="si">#{</span><span class="n">height</span><span class="si">}</span><span class="s2"> tall and </span><span class="si">#{</span><span class="n">weight</span><span class="si">}</span><span class="s2"> heavy."</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notice that we are using <tt class="docutils literal"><span class="pre">print</span></tt> instead of <tt class="docutils literal"><span class="pre">puts</span></tt> to
do the prompting. <tt class="docutils literal"><span class="pre">print</span></tt> doesn't add a new line automatically, so
your answer can go on the same line as the question. <tt class="docutils literal"><span class="pre">puts</span></tt> on the
other hand, adds a newline automatically.</p>
</div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex11.rb
<span class="go">How old are you? 35</span>
<span class="go">How tall are you? 6'2"</span>
<span class="go">How much do you weigh?  180lbs</span>
<span class="go">So, you're 35 old, 6'2" tall and 180lbs heavy.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go online and find out what Rubys <tt class="docutils literal"><span class="pre">gets</span></tt> and <tt class="docutils literal"><span class="pre">chomp</span></tt> methods do.</li>
<li>Can you find other ways to use <tt class="docutils literal"><span class="pre">gets.chomp</span></tt>? Try some of the
samples you find.</li>
<li>Write another "form" like this to ask some other questions.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <a href="#top">Top of page</a>
		<div class="document" id="ex12">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-12-libraries">
<h1>Exercise 12: Libraries<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-12-libraries" title="Permalink to this headline">¶</a></h1>
<p>Take a look at this code:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'open-uri'</span>

<span class="nb">open</span><span class="p">(</span><span class="s2">"http://www.ruby-lang.org/en"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  <span class="n">f</span><span class="o">.</span><span class="n">each_line</span> <span class="p">{</span><span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="nb">p</span> <span class="n">line</span><span class="p">}</span>
  <span class="nb">puts</span> <span class="n">f</span><span class="o">.</span><span class="n">base_uri</span>         <span class="c1"># &lt;URI::HTTP:0x40e6ef2 URL:http://www.ruby-lang.org/en/&gt;</span>
  <span class="nb">puts</span> <span class="n">f</span><span class="o">.</span><span class="n">content_type</span>     <span class="c1"># "text/html"</span>
  <span class="nb">puts</span> <span class="n">f</span><span class="o">.</span><span class="n">charset</span>          <span class="c1"># "iso-8859-1"</span>
  <span class="nb">puts</span> <span class="n">f</span><span class="o">.</span><span class="n">content_encoding</span> <span class="c1"># []</span>
  <span class="nb">puts</span> <span class="n">f</span><span class="o">.</span><span class="n">last_modified</span>    <span class="c1"># Thu Dec 05 02:45:02 UTC 2002</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>On line 1 we have what's called a "require". This is how you add
features to your script from the Ruby feature set or other sources
(e.g., Ruby Gems, stuff you wrote yourself). Rather than give you all
the features at once, Ruby asks you to say what you plan to use. This
keeps your programs small, but it also acts as documentation for other
programmers who read your code later.</p>
<div class="section" id="hold-up-features-have-another-name">
<h2>Hold Up! Features Have Another Name<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#hold-up-features-have-another-name" title="Permalink to this headline">¶</a></h2>
<p>I call them "features" here (these little things you require to make
your Ruby program do more) but nobody else calls them features. I just
used that name because I needed to trick you into learning what they are
without jargon. Before you can continue, you need to learn their real
name: <tt class="docutils literal"><span class="pre">libraries</span></tt>.</p>
<p>From now on we will be calling these "features" that we require
<tt class="docutils literal"><span class="pre">libraries</span></tt>. I'll say things like, "You want to require the
<tt class="docutils literal"><span class="pre">open-uri</span></tt> library." They are also called "modules" by other
programmers, but let's just stick with <tt class="docutils literal"><span class="pre">libraries</span></tt>.</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Research the difference between <tt class="docutils literal"><span class="pre">require</span></tt> and <tt class="docutils literal"><span class="pre">include</span></tt>. How are
they different?</li>
<li>Can you <tt class="docutils literal"><span class="pre">require</span></tt> a script that doesn't contain a <tt class="docutils literal"><span class="pre">library</span></tt>
specifically?</li>
<li>Figure out which directories on your system Ruby will look in to find
the libraries you require.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex13">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-13-parameters-unpacking-variables">
<h1>Exercise 13: Parameters, Unpacking, Variables<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-13-parameters-unpacking-variables" title="Permalink to this headline">¶</a></h1>
<p>In this exercise we will cover one more input method you can use to pass
variables to a script (script being another name for your <tt class="docutils literal"><span class="pre">.rb</span></tt>
files). You know how you type <tt class="docutils literal"><span class="pre">ruby</span> <span class="pre">ex13.rb</span></tt> to run the <tt class="docutils literal"><span class="pre">ex13.rb</span></tt>
file? Well the <tt class="docutils literal"><span class="pre">ex13.rb</span></tt> part of the command is called an "argument".
What we'll do now is write a script that also accepts arguments.</p>
<p>Type this program and I'll explain it in detail:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">third</span> <span class="o">=</span> <span class="no">ARGV</span> 

<span class="nb">puts</span> <span class="s2">"The script is called: </span><span class="si">#{</span><span class="vg">$0</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="s2">"Your first variable is: </span><span class="si">#{</span><span class="n">first</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="s2">"Your second variable is: </span><span class="si">#{</span><span class="n">second</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="s2">"Your third variable is: </span><span class="si">#{</span><span class="n">third</span><span class="si">}</span><span class="s2">"</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The <tt class="docutils literal"><span class="pre">ARGV</span></tt> is the "argument variable", a very standard name in
programming, that you will find used in many other languages. It's in
all caps because it's a constant, meaning you shouldn't change the value
once it's been assigned. This variable holds the arguments you pass to
your Ruby script when you run it. In the exercises you will get to play
with this more and see what happens.</p>
<p>Line 1 "unpacks" <tt class="docutils literal"><span class="pre">ARGV</span></tt> so that, rather than holding all the
arguments, it gets assigned to three variables you can work with:
<tt class="docutils literal"><span class="pre">first</span></tt>, <tt class="docutils literal"><span class="pre">second</span></tt>, and <tt class="docutils literal"><span class="pre">third</span></tt>. The name of the script itself is
stored in a special variable <tt class="docutils literal"><span class="pre">$0</span></tt>, which we don't need to unpack. This
may look strange, but "unpack" is probably the best word to describe
what it does. It just says, "Take whatever is in <tt class="docutils literal"><span class="pre">ARGV</span></tt>, unpack it,
and assign it to all of these variables on the left in order."</p>
<p>After that we just print them out like normal.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>Run the program like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">ruby ex13.rb first 2nd 3rd</span>
</pre></div>
</div>
<p>This is what you should see when you do a few different runs with
different arguments:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex13.rb first 2nd 3rd
<span class="go">The script is called: ex13.rb</span>
<span class="go">Your first variable is: first</span>
<span class="go">Your second variable is: 2nd</span>
<span class="go">Your third variable is: 3rd</span>

<span class="gp">$</span> ruby ex13.rb cheese apples bread
<span class="go">The script is called: ex13.rb</span>
<span class="go">Your first variable is: cheese</span>
<span class="go">Your second variable is: apples</span>
<span class="go">Your third variable is: bread</span>

<span class="gp">$</span> ruby ex13.rb Zed A. Shaw
<span class="go">The script is called: ex13.rb</span>
<span class="go">Your first variable is: Zed</span>
<span class="go">Your second variable is: A.</span>
<span class="go">Your third variable is: Shaw</span>
</pre></div>
</div>
<p>You can actually replace "first", "2nd", and "3rd" with any three
things. You do not have to give these parameters either, you can give
any 3 strings you want:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">ruby ex13.rb stuff I like</span>
<span class="go">ruby ex13.rb anything 6 7</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Try giving fewer than three arguments to your script. What values are
used for the missing arguments?</li>
<li>Write a script that has fewer arguments and one that has more. Make
sure you give the unpacked variables good names.</li>
<li>Combine <tt class="docutils literal"><span class="pre">STDIN.gets.chomp()</span></tt> with <tt class="docutils literal"><span class="pre">ARGV</span></tt> to make a script that gets
more input from a user.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <a href="#top">Top of page</a>
		<div class="document" id="ex14">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-14-prompting-and-passing">
<h1>Exercise 14: Prompting And Passing<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-14-prompting-and-passing" title="Permalink to this headline">¶</a></h1>
<p>Let's do one exercise that uses <tt class="docutils literal"><span class="pre">ARGV</span></tt> and <tt class="docutils literal"><span class="pre">gets.chomp()</span></tt> together
to ask the user something specific. You will need this for the next
exercise where we learn to read and write files. In this exercise we'll
print a simple <tt class="docutils literal"><span class="pre">&gt;</span></tt> prompt. This is similar to a game like Zork or
Adventure.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">user</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">first</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s1">'&gt; '</span>

<span class="nb">puts</span> <span class="s2">"Hi </span><span class="si">#{</span><span class="n">user</span><span class="si">}</span><span class="s2">, I'm the </span><span class="si">#{</span><span class="vg">$0</span><span class="si">}</span><span class="s2"> script."</span>
<span class="nb">puts</span> <span class="s2">"I'd like to ask you a few questions."</span>
<span class="nb">puts</span> <span class="s2">"Do you like me </span><span class="si">#{</span><span class="n">user</span><span class="si">}</span><span class="s2">?"</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">likes</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"Where do you live </span><span class="si">#{</span><span class="n">user</span><span class="si">}</span><span class="s2">?"</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">lives</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"What kind of computer do you have?"</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">computer</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

<span class="nb">puts</span> <span class="o">&lt;&lt;</span><span class="no">MESSAGE</span>
<span class="sh">Alright, so you said #{likes} about liking me.</span>
<span class="sh">You live in #{lives}.  Not sure where that is.</span>
<span class="sh">And you have a #{computer} computer.  Nice.</span>
<span class="no">MESSAGE</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Important:</strong> Also notice that we're using <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt>
instead of plain 'ol <tt class="docutils literal"><span class="pre">gets</span></tt>. That is because if there is stuff in
<tt class="docutils literal"><span class="pre">ARGV</span></tt>, the default <tt class="docutils literal"><span class="pre">gets</span></tt> method tries to treat the first one as a
file and read from that. To read from the user's input (i.e., <tt class="docutils literal"><span class="pre">stdin</span></tt>)
in such a situation, you have to use it <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> explicitly.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>When you run this, remember that you have to give the script your name
for the <tt class="docutils literal"><span class="pre">ARGV</span></tt> arguments.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex14.rb Zed
<span class="go">Hi Zed, I'm the ex/ex14.rb script.</span>
<span class="go">I'd like to ask you a few questions.</span>
<span class="go">Do you like me Zed?</span>
<span class="gp">&gt;</span> Yes
<span class="go">Where do you live Zed?</span>
<span class="gp">&gt;</span> America
<span class="go">What kind of computer do you have?</span>
<span class="gp">&gt;</span> Tandy
<span class="go">Alright, so you said Yes about liking me.</span>
<span class="go">You live in America.  Not sure where that is.</span>
<span class="go">And you have a Tandy computer.  Nice.</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Find out what Zork and Adventure were. Try to find a copy and play
it.</li>
<li>Change the <tt class="docutils literal"><span class="pre">prompt</span></tt> variable to something else entirely.</li>
<li>Add another argument and use it in your script.</li>
<li>Make sure you understand how I combined a <tt class="docutils literal"><span class="pre">&lt;&lt;SOMETHING</span></tt> style
multi-line string with <tt class="docutils literal"><span class="pre">#{</span> <span class="pre">}</span></tt> string interpolation as the last
print.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex15">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-15-reading-files">
<h1>Exercise 15: Reading Files<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-15-reading-files" title="Permalink to this headline">¶</a></h1>
<p>Everything you've learned about <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> and <tt class="docutils literal"><span class="pre">ARGV</span></tt> is so you
can start reading files. You may have to play with this exercise the
most to understand what's going on, so do it carefully and remember your
checks. Working with files is an easy way to erase your work if you are
not careful.</p>
<p>This exercise involves writing two files. One is your usual <tt class="docutils literal"><span class="pre">ex15.rb</span></tt>
file that you will run, but the other is named <tt class="docutils literal"><span class="pre">ex15_sample.txt</span></tt>. This
second file isn't a script but a plain text file we'll be reading in our
script. Here are the contents of that file:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">This is stuff I typed into a file.</span>
<span class="go">It is really cool stuff.</span>
<span class="go">Lots and lots of fun to have in here.</span>
</pre></div>
</div>
<p>What we want to do is "open" that file in our script and print it out.
However, we do not want to just "hard code" the name <tt class="docutils literal"><span class="pre">ex15_sample.txt</span></tt>
into our script. "Hard coding" means putting some bit of information
that should come from the user as a string right in our program. That's
bad because we want it to load other files later. The solution is to use
<tt class="docutils literal"><span class="pre">ARGV</span></tt> and <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> to ask the user what file they want instead
of "hard coding" the file's name.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">filename</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">first</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="s2">"&gt; "</span>
<span class="n">txt</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Here's your file: </span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="n">txt</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"I'll also ask you to type it again:"</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">file_again</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

<span class="n">txt_again</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_again</span><span class="p">)</span>

<span class="nb">puts</span> <span class="n">txt_again</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p>A few fancy things are going on in this file, so let's break it down
real quick:</p>
<p>Line 1-3 should be a familiar use of <tt class="docutils literal"><span class="pre">ARGV</span></tt> to get a filename and
setting up the prompt. Next we have line 4 where we use a new command
<tt class="docutils literal"><span class="pre">File.open</span></tt>. Right now, run <tt class="docutils literal"><span class="pre">ri</span> <span class="pre">File.open</span></tt> from the command line and
read the instructions. Notice how like your own scripts, it takes a
parameter and returns a value you can set to your own variable. You just
opened a file.</p>
<p>Line 6 we print a little line, but on line 7 we have something very new
and exciting. We call a function on <tt class="docutils literal"><span class="pre">txt</span></tt>. What you got back from
<tt class="docutils literal"><span class="pre">open</span></tt> is a <tt class="docutils literal"><span class="pre">file</span></tt>, and it's also got commands you can give it. You
give a file a command by using the <tt class="docutils literal"><span class="pre">.</span></tt> (dot or period), the name of
the command, and parameters. Just like with <tt class="docutils literal"><span class="pre">File.open</span></tt>. The
difference is that when you say <tt class="docutils literal"><span class="pre">txt.read()</span></tt> you are saying, "Hey txt!
Do your read command with no parameters!"</p>
<p>The remainder of the file is more of the same, but we'll leave the
analysis to you in the extra credit.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>I made a file called "ex15_sample.txt" and ran my script.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex15.rb ex15_sample.txt
<span class="go">Here's your file ex15_sample.txt:</span>
<span class="go">This is stuff I typed into a file.</span>
<span class="go">It is really cool stuff.</span>
<span class="go">Lots and lots of fun to have in here.</span>

<span class="go">I'll also ask you to type it again:</span>
<span class="gp">&gt;</span> ex15_sample.txt
<span class="go">This is stuff I typed into a file.</span>
<span class="go">It is really cool stuff.</span>
<span class="go">Lots and lots of fun to have in here.</span>

<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>This is a big jump so be sure you do this extra credit as best you can
before moving on.</p>
<ol class="arabic simple">
<li>Above each line write out in English what that line does.</li>
<li>If you are not sure ask someone for help or search online. Many times
searching for "ruby THING" will find answers for what that THING does
in Ruby. Try searching for "ruby file.open".</li>
<li>I used the name "commands" here, but they are also called "functions"
and "methods". Search around online to see what other people do to
define these. Do not worry if they confuse you. It's normal for a
programmer to confuse you with their vast extensive knowledge.</li>
<li>Get rid of the part from line 9-15 where you use <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> and
try the script then.</li>
<li>Use only <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> and try the script that way. Think of why one
way of getting the filename would be better than another.</li>
<li>Run <tt class="docutils literal"><span class="pre">ri</span> <span class="pre">File</span></tt> and scroll down until you see the <tt class="docutils literal"><span class="pre">read()</span></tt> command
(method/function). See all the other ones you can use? Try some of
the other commands.</li>
<li>Startup IRB again and use <tt class="docutils literal"><span class="pre">File.open</span></tt> from the prompt. Notice how
you can open files and run read on them right there?</li>
<li>Have your script also do a <tt class="docutils literal"><span class="pre">close()</span></tt> on the <tt class="docutils literal"><span class="pre">txt</span></tt> and
<tt class="docutils literal"><span class="pre">txt_again</span></tt> variables. It's important to close files when you are
done with them.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex16">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-16-reading-and-writing-files">
<h1>Exercise 16: Reading And Writing Files<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-16-reading-and-writing-files" title="Permalink to this headline">¶</a></h1>
<p>If you did the extra credit from the last exercise you should have seen
all sorts of commands (methods/functions) you can give to files. Here's
the list of commands I want you to remember:</p>
<ul class="simple">
<li>close -- Closes the file. Like <tt class="docutils literal"><span class="pre">File-&gt;Save..</span></tt> in your editor.</li>
<li>read -- Reads the contents of the file, you can assign the result to
a variable.</li>
<li>readline -- Reads just one line of a text file.</li>
<li>truncate -- Empties the file, watch out if you care about the file.</li>
<li>write(stuff) -- Writes stuff to the file.</li>
</ul>
<p>For now these are the important commands you need to know. Some of them
take parameters, but we do not really care about that. You only need to
remember that write takes a parameter of a string you want to write to
the file.</p>
<p>Let's use some of this to make a simple little text editor:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">filename</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">first</span>
<span class="n">script</span> <span class="o">=</span> <span class="vg">$0</span>

<span class="nb">puts</span> <span class="s2">"We're going to erase </span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">."</span>
<span class="nb">puts</span> <span class="s2">"If you don't want that, hit CTRL-C (^C)."</span>
<span class="nb">puts</span> <span class="s2">"If you do want that, hit RETURN."</span>

<span class="nb">print</span> <span class="s2">"? "</span>
<span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span>

<span class="nb">puts</span> <span class="s2">"Opening the file..."</span>
<span class="n">target</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Truncating the file.  Goodbye!"</span>
<span class="n">target</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Now I'm going to ask you for three lines."</span>

<span class="nb">print</span> <span class="s2">"line 1: "</span><span class="p">;</span> <span class="n">line1</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">"line 2: "</span><span class="p">;</span> <span class="n">line2</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
<span class="nb">print</span> <span class="s2">"line 3: "</span><span class="p">;</span> <span class="n">line3</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"I'm going to write these to the file."</span>

<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line1</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line2</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line3</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"And finally, we close it."</span>
<span class="n">target</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you get errors in this script it is probably because you are using Ruby
1.8 and the book assumes Ruby 1.9.  To see what version you have type: <tt class="docutils literal"><span class="pre">ruby</span> <span class="pre">-v</span></tt>
If you need to install a newer version then go back to the beginning of the
book where Exercise 0 tells you how.</p>
</div>
<p>That's a large file, probably the largest you have typed in. So go slow,
do your checks, and make it run. One trick is to get bits of it running
at a time. Get lines 1-8 running, then 5 more, then a few more, etc.,
until it's all done and running.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>There are actually two things you will see, first the output of your new
script:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex16.rb test.txt
<span class="go">We're going to erase 'test.txt'.</span>
<span class="go">If you don't want that, hit CTRL-C (^C).</span>
<span class="go">If you do want that, hit RETURN.</span>
<span class="go">?</span>
<span class="go">Opening the file...</span>
<span class="go">Truncating the file.  Goodbye!</span>
<span class="go">Now I'm going to ask you for three lines.</span>
<span class="go">line 1: To all the people out there.</span>
<span class="go">line 2: I say I don't like my hair.</span>
<span class="go">line 3: I need to shave it off.</span>
<span class="go">I'm going to write these to the file.</span>
<span class="go">And finally, we close it.</span>
<span class="gp">$</span>
</pre></div>
</div>
<p>Now, open up the file you made (in my case test.txt) in your editor and
check it out. Neat right?</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>If you feel you do not understand this, go back through and use the
comment trick to get it squared away in your mind. One simple English
comment above each line will help you understand, or at least let you
know what you need to research more.</li>
<li>Write a script similar to the last exercise that uses read and argv
to read the file you just created.</li>
<li>There's too much repetition in this file. Use strings, formats, and
escapes to print out line1, line2, and line3 with just one
<tt class="docutils literal"><span class="pre">target.write()</span></tt> command instead of 6.</li>
<li>Find out why we had to pass a <tt class="docutils literal"><span class="pre">'w'</span></tt> as an extra parameter to open.
Hint: open tries to be safe by making you explicitly say you want to
write a file.</li>
<li>If you open the file with <tt class="docutils literal"><span class="pre">'w'</span></tt> mode, then do you really need the
<tt class="docutils literal"><span class="pre">target.truncate()</span></tt>? Go read the docs for Ruby's <tt class="docutils literal"><span class="pre">File.open</span></tt>
function and see if that's true.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>



    <a href="#top">Top of page</a>
		<div class="document" id="ex17">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-17-more-files">
<h1>Exercise 17: More Files<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-17-more-files" title="Permalink to this headline">¶</a></h1>
<p>Now let's do a few more things with files. We're going to actually write
a Ruby script to copy one file to another. It'll be very short but will
give you some ideas about other things you can do with files.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">from_file</span><span class="p">,</span> <span class="n">to_file</span> <span class="o">=</span> <span class="no">ARGV</span> 
<span class="n">script</span> <span class="o">=</span> <span class="vg">$0</span>

<span class="nb">puts</span> <span class="s2">"Copying from </span><span class="si">#{</span><span class="n">from_file</span><span class="si">}</span><span class="s2"> to </span><span class="si">#{</span><span class="n">to_file</span><span class="si">}</span><span class="s2">"</span>

<span class="c1"># we could do these two on one line too, how?</span>
<span class="n">input</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">from_file</span><span class="p">)</span>
<span class="n">indata</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"The input file is </span><span class="si">#{</span><span class="n">indata</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2"> bytes long"</span>

<span class="nb">puts</span> <span class="s2">"Does the output file exist? </span><span class="si">#{</span><span class="no">File</span><span class="o">.</span><span class="n">exists?</span> <span class="n">to_file</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="s2">"Ready, hit RETURN to continue, CTRL-C to abort."</span>
<span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span>

<span class="n">output</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">to_file</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
<span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">indata</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Alright, all done."</span>

<span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">input</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here we used a new method called <tt class="docutils literal"><span class="pre">File.exists?</span></tt>. This returns <strong>true</strong>
if a file exists, based on its name in a string as an argument. It
returns <strong>false</strong> if not. We'll be using this function in the second
half of this book to do lots of things.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>Just like your other scripts, run this one with two arguments, the file
to copy from and the file to copy it to. If we use your <tt class="docutils literal"><span class="pre">test.txt</span></tt>
file from before we get this:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex17.rb test.txt copied.txt
<span class="go">Copying from test.txt to copied.txt</span>
<span class="go">The input file is 81 bytes long</span>
<span class="go">Does the output file exist? False</span>
<span class="go">Ready, hit RETURN to continue, CTRL-C to abort.</span>

<span class="go">Alright, all done.</span>

<span class="gp">$</span> cat copied.txt
<span class="go">To all the people out there.</span>
<span class="go">I say I don't like my hair.</span>
<span class="go">I need to shave it off.</span>
<span class="gp">$</span>
</pre></div>
</div>
<p>It should work with any file. Try a bunch more and see what happens.
Just be careful you do not blast an important file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Did you see that trick I did with <tt class="docutils literal"><span class="pre">cat</span></tt>? It only
works on Linux or OSX, on Windows use <tt class="docutils literal"><span class="pre">type</span></tt> to do the same thing.</p>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go read up on Ruby's <tt class="docutils literal"><span class="pre">require</span></tt> statement, and start Ruby to try it
out. Try importing some things and see if you can get it right. It's
alright if you do not.</li>
<li>This script is really annoying. There's no need to ask you before
doing the copy, and it prints too much out to the screen. Try to make
it more friendly to use by removing features.</li>
<li>See how short you can make the script. I could make this 1 line long.</li>
<li>Notice at the end of the WYSS I used something called <tt class="docutils literal"><span class="pre">cat</span></tt>? It's
an old command that "con*cat*enates" files together, but mostly it's
just an easy way to print a file to the screen. Type <tt class="docutils literal"><span class="pre">man</span> <span class="pre">cat</span></tt> to
read about it.</li>
<li>Windows people, find the alternative to <tt class="docutils literal"><span class="pre">cat</span></tt> that Linux/OSX people
have. Do not worry about <tt class="docutils literal"><span class="pre">man</span></tt> since there is nothing like that.</li>
<li>Find out why you had to do <tt class="docutils literal"><span class="pre">output.close()</span></tt> in the code.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex18">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-18-names-variables-code-functions">
<h1>Exercise 18: Names, Variables, Code, Functions<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-18-names-variables-code-functions" title="Permalink to this headline">¶</a></h1>
<p>Big title right? I am about to introduce you to the function! Dum dum
dah! Every programmer will go on and on about functions and all the
different ideas about how they work and what they do, but I will give
you the simplest explanation you can use right now.</p>
<p>Functions do three things:</p>
<ol class="arabic simple">
<li>They name pieces of code the way variables name strings and numbers.</li>
<li>They take arguments the way your scripts take <tt class="docutils literal"><span class="pre">ARGV</span></tt>.</li>
<li>Using #1 and #2 they let you make your own "mini scripts" or "tiny
commands".</li>
</ol>
<p>You can create a function (also called "methods") by using the word
<tt class="docutils literal"><span class="pre">def</span></tt> in Ruby. I'm going to have you make four different functions
that work like your scripts, and then show you how each one is related.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># this one is like your scripts with argv</span>
<span class="k">def</span> <span class="nf">puts_two</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
  <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span> <span class="o">=</span> <span class="n">args</span>
  <span class="nb">puts</span> <span class="s2">"arg1: </span><span class="si">#{</span><span class="n">arg1</span><span class="si">}</span><span class="s2">, arg2: </span><span class="si">#{</span><span class="n">arg2</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1"># ok, that *args is actually pointless, we can just do this</span>
<span class="k">def</span> <span class="nf">puts_two_again</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"arg1: </span><span class="si">#{</span><span class="n">arg1</span><span class="si">}</span><span class="s2">, arg2: </span><span class="si">#{</span><span class="n">arg2</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1"># this just takes one argument</span>
<span class="k">def</span> <span class="nf">puts_one</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"arg1: </span><span class="si">#{</span><span class="n">arg1</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1"># this one takes no arguments</span>
<span class="k">def</span> <span class="nf">puts_none</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"I got nothin'."</span>
<span class="k">end</span>

<span class="n">puts_two</span><span class="p">(</span><span class="s2">"Zed"</span><span class="p">,</span><span class="s2">"Shaw"</span><span class="p">)</span>
<span class="n">puts_two_again</span><span class="p">(</span><span class="s2">"Zed"</span><span class="p">,</span><span class="s2">"Shaw"</span><span class="p">)</span>
<span class="n">puts_one</span><span class="p">(</span><span class="s2">"First!"</span><span class="p">)</span>
<span class="n">puts_none</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Let's break down the first function, <tt class="docutils literal"><span class="pre">puts_two</span></tt> which is the most
similar to what you already know from making scripts:</p>
<ol class="arabic simple">
<li>First we tell Ruby we want to make a function using <tt class="docutils literal"><span class="pre">def</span></tt> for
"define".</li>
<li>On the same line as <tt class="docutils literal"><span class="pre">def</span></tt> we then give the function a name, in this
case we just called it "puts_two" but it could be "peanuts" too. It
doesn't matter, except that your function should have a short name
that says what it does.</li>
<li>Then we tell it we want <tt class="docutils literal"><span class="pre">*args</span></tt> (asterisk args) which is a lot like
your <tt class="docutils literal"><span class="pre">ARGV</span></tt> parameter but for functions.</li>
<li>After the definition, all the lines that are indented 2 spaces will
become attached to this name, <tt class="docutils literal"><span class="pre">puts_two</span></tt>. Our first indented line
is one that unpacks the arguments the same as with your scripts.</li>
<li>To demonstrate how it works we print these arguments out, just like
we would in a script. Now, the problem with <tt class="docutils literal"><span class="pre">puts_two</span></tt> is that it's
not the easiest way to make a function. In Ruby we can skip the whole
unpacking args and just use the names we want right inside <tt class="docutils literal"><span class="pre">()</span></tt>.
That's what <tt class="docutils literal"><span class="pre">puts_two_again</span></tt> does.</li>
</ol>
<p>After that you have an example of how you make a function that takes one
argument in <tt class="docutils literal"><span class="pre">puts_one</span></tt>.</p>
<p>Finally you have a function that has no arguments in <tt class="docutils literal"><span class="pre">puts_none</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is very important. Do not get discouraged right
now if this doesn't quite make sense. We're going to do a few
exercises linking functions to your scripts and show you how to make
more. For now just keep thinking "mini script" when I say "function"
and keep playing with them.</p>
</div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>If you run the above script you should see:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex18.rb
<span class="go">arg1: 'Zed', arg2: 'Shaw'</span>
<span class="go">arg1: 'Zed', arg2: 'Shaw'</span>
<span class="go">arg1: 'First!'</span>
<span class="go">I got nothin'.</span>
<span class="gp">$</span>
</pre></div>
</div>
<p>Right away you can see how a function works. Notice that you used your
functions the way you use things like <tt class="docutils literal"><span class="pre">File.exists?</span></tt>, <tt class="docutils literal"><span class="pre">File.open</span></tt>,
and other "commands". In fact, I've been tricking you because in Ruby
those "commands" are just functions. This means you can make your own
commands and use them in your scripts too.</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>Write out a function checklist for later exercises. Write these on an
index card and keep it by you while you complete the rest of these
exercises or until you feel you do not need it:</p>
<ol class="arabic simple">
<li>Did you start your function definition with <tt class="docutils literal"><span class="pre">def</span></tt>?</li>
<li>Does your function name have only characters and <tt class="docutils literal"><span class="pre">_</span></tt> (underscore)
characters?</li>
<li>Did you put an open parenthesis <tt class="docutils literal"><span class="pre">(</span></tt> right after the function name?</li>
<li>Did you put your arguments after the parenthesis <tt class="docutils literal"><span class="pre">(</span></tt> separated by
commas?</li>
<li>Did you make each argument unique (meaning no duplicated names).</li>
<li>Did you put a close parenthesis <tt class="docutils literal"><span class="pre">)</span></tt> after the arguments?</li>
<li>Did you indent all lines of code you want in the function 2 spaces?</li>
<li>Did you close your function body by typing "end"?</li>
</ol>
<p>And when you run (aka "use" or "call") a function, check these things:</p>
<ol class="arabic simple">
<li>Did you call/use/run this function by typing its name?</li>
<li>Did you put <tt class="docutils literal"><span class="pre">(</span></tt> character after the name to run it? (this isn't
required, but is idiomatic)</li>
<li>Did you put the values you want into the parenthesis separated by
commas?</li>
<li>Did you end the function call with a <tt class="docutils literal"><span class="pre">)</span></tt> character.</li>
</ol>
<p>Use these two checklists on the remaining lessons until you do not need
them anymore.</p>
<p>Finally, repeat this a few times:</p>
<blockquote>
<div>"To 'run', 'call', or 'use' a function all mean the same thing."</div></blockquote>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>

    <a href="#top">Top of page</a>
		<div class="document" id="ex19">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-19-functions-and-variables">
<h1>Exercise 19: Functions And Variables<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-19-functions-and-variables" title="Permalink to this headline">¶</a></h1>
<p>Functions may have been a mind-blowing amount of information, but do not
worry. Just keep doing these exercises and going through your checklist
from the last exercise and you will eventually get it.</p>
<p>There is one tiny point though that you might not have realized which
we'll reinforce right now: The variables in your function are not
connected to the variables in your script. Here's an exercise to get you
thinking about this:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">cheese_and_crackers</span><span class="p">(</span><span class="n">cheese_count</span><span class="p">,</span> <span class="n">boxes_of_crackers</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"You have </span><span class="si">#{</span><span class="n">cheese_count</span><span class="si">}</span><span class="s2"> cheeses!"</span>
  <span class="nb">puts</span> <span class="s2">"You have </span><span class="si">#{</span><span class="n">boxes_of_crackers</span><span class="si">}</span><span class="s2"> boxes of crackers!"</span>
  <span class="nb">puts</span> <span class="s2">"Man that's enough for a party!"</span>
  <span class="nb">puts</span> <span class="s2">"Get a blanket."</span>
  <span class="nb">puts</span> <span class="c1"># a blank line</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"We can just give the function numbers directly:"</span>
<span class="n">cheese_and_crackers</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"OR, we can use variables from our script:"</span>
<span class="n">amount_of_cheese</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">amount_of_crackers</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">cheese_and_crackers</span><span class="p">(</span><span class="n">amount_of_cheese</span><span class="p">,</span> <span class="n">amount_of_crackers</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"We can even do math inside too:"</span>
<span class="n">cheese_and_crackers</span><span class="p">(</span><span class="mi">10</span> <span class="o">+</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"And we can combine the two, variables and math:"</span>
<span class="n">cheese_and_crackers</span><span class="p">(</span><span class="n">amount_of_cheese</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span> <span class="n">amount_of_crackers</span> <span class="o">+</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>This shows all different ways we're able to give our function
<tt class="docutils literal"><span class="pre">cheese_and_crackers</span></tt> the values it needs to print them. We can give
it straight numbers. We can give it variables. We can give it math. We
can even combine math and variables.</p>
<p>In a way, the arguments to a function are kind of like our <tt class="docutils literal"><span class="pre">=</span></tt>
character when we make a variable. In fact, if you can use <tt class="docutils literal"><span class="pre">=</span></tt> to name
something, you can usually pass it to a function as an argument.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>You should study the output of this script and compare it with what you
think you should get for each of the examples in the script.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex19.rb
<span class="go">We can just give the function numbers directly:</span>
<span class="go">You have 20 cheeses!</span>
<span class="go">You have 30 boxes of crackers!</span>
<span class="go">Man that's enough for a party!</span>
<span class="go">Get a blanket.</span>

<span class="go">OR, we can use variables from our script:</span>
<span class="go">You have 10 cheeses!</span>
<span class="go">You have 50 boxes of crackers!</span>
<span class="go">Man that's enough for a party!</span>
<span class="go">Get a blanket.</span>

<span class="go">We can even do math inside too:</span>
<span class="go">You have 30 cheeses!</span>
<span class="go">You have 11 boxes of crackers!</span>
<span class="go">Man that's enough for a party!</span>
<span class="go">Get a blanket.</span>

<span class="go">And we can combine the two, variables and math:</span>
<span class="go">You have 110 cheeses!</span>
<span class="go">You have 1050 boxes of crackers!</span>
<span class="go">Man that's enough for a party!</span>
<span class="go">Get a blanket.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go back through the script and type a comment above each line
explaining in English what it does.</li>
<li>Start at the bottom and read each line backwards, saying all the
important characters.</li>
<li>Write at least one more function of your own design, and run it 10
different ways.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex20">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-20-functions-and-files">
<h1>Exercise 20: Functions And Files<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-20-functions-and-files" title="Permalink to this headline">¶</a></h1>
<p>Remember your checklist for functions, then do this exercise paying
close attention to how functions and files can work together to make
useful stuff.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">input_file</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>

<span class="k">def</span> <span class="nf">print_all</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">rewind</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="no">IO</span><span class="o">::</span><span class="no">SEEK_SET</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">print_a_line</span><span class="p">(</span><span class="n">line_count</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">line_count</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="n">current_file</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"First let's print the whole file:"</span>
<span class="nb">puts</span> <span class="c1"># a blank line</span>

<span class="n">print_all</span><span class="p">(</span><span class="n">current_file</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Now let's rewind, kind of like a tape."</span>

<span class="n">rewind</span><span class="p">(</span><span class="n">current_file</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Let's print three lines:"</span>

<span class="n">current_line</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">print_a_line</span><span class="p">(</span><span class="n">current_line</span><span class="p">,</span> <span class="n">current_file</span><span class="p">)</span>

<span class="n">current_line</span> <span class="o">=</span> <span class="n">current_line</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">print_a_line</span><span class="p">(</span><span class="n">current_line</span><span class="p">,</span> <span class="n">current_file</span><span class="p">)</span>

<span class="n">current_line</span> <span class="o">=</span> <span class="n">current_line</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">print_a_line</span><span class="p">(</span><span class="n">current_line</span><span class="p">,</span> <span class="n">current_file</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Pay close attention to how we pass in the current line number each time
we run <tt class="docutils literal"><span class="pre">print_a_line</span></tt>.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex20.rb test.txt
<span class="go">First let's print the whole file:</span>

<span class="go">To all the people out there.</span>
<span class="go">I say I don't like my hair.</span>
<span class="go">I need to shave it off.</span>

<span class="go">Now let's rewind, kind of like a tape.</span>
<span class="go">Let's print three lines:</span>
<span class="go">1 To all the people out there.</span>
<span class="go">2 I say I don't like my hair.</span>
<span class="go">3 I need to shave it off.</span>

<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go through and write English comments for each line to understand
what's going on.</li>
<li>Each time <tt class="docutils literal"><span class="pre">print_a_line</span></tt> is run you are passing in a variable
<tt class="docutils literal"><span class="pre">current_line</span></tt>. Write out what <tt class="docutils literal"><span class="pre">current_line</span></tt> is equal to on each
function call, and trace how it becomes <tt class="docutils literal"><span class="pre">line_count</span></tt> in
<tt class="docutils literal"><span class="pre">print_a_line</span></tt>.</li>
<li>Find each place a function is used, and go check its def to make sure
that you are giving it the right arguments.</li>
<li>Research online what the <tt class="docutils literal"><span class="pre">seek</span></tt> function for file does. Look at the
<tt class="docutils literal"><span class="pre">rdoc</span></tt> documentation using the <tt class="docutils literal"><span class="pre">ri</span></tt> command and see if you can
figure it out from there.</li>
<li>Research the shorthand notation <tt class="docutils literal"><span class="pre">+=</span></tt> and rewrite the script to use
that.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex21">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-21-functions-can-return-something">
<h1>Exercise 21: Functions Can Return Something<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-21-functions-can-return-something" title="Permalink to this headline">¶</a></h1>
<p>You have been using the <tt class="docutils literal"><span class="pre">=</span></tt> character to name variables and set them
to numbers or strings. We're now going to blow your mind again by
showing you how to use <tt class="docutils literal"><span class="pre">=</span></tt> to set variables to be a value from a
function. There will be one thing to pay close attention to, but first
type this in:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"ADDING </span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="s2"> + </span><span class="si">#{</span><span class="n">b</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">subtract</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"SUBTRACTING </span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">b</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"MULTIPLYING </span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="s2"> * </span><span class="si">#{</span><span class="n">b</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"DIVIDING </span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="s2"> / </span><span class="si">#{</span><span class="n">b</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"Let's do some math with just functions!"</span>

<span class="n">age</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">subtract</span><span class="p">(</span><span class="mi">78</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">weight</span> <span class="o">=</span> <span class="n">multiply</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">iq</span> <span class="o">=</span> <span class="n">divide</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Age: </span><span class="si">#{</span><span class="n">age</span><span class="si">}</span><span class="s2">, Height: </span><span class="si">#{</span><span class="n">height</span><span class="si">}</span><span class="s2">, Weight: </span><span class="si">#{</span><span class="n">weight</span><span class="si">}</span><span class="s2">, IQ: </span><span class="si">#{</span><span class="n">iq</span><span class="si">}</span><span class="s2">"</span>

<span class="c1"># A puzzle for the extra credit, type it in anyway.</span>
<span class="nb">puts</span> <span class="s2">"Here is a puzzle."</span>

<span class="n">what</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="n">subtract</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">multiply</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="n">divide</span><span class="p">(</span><span class="n">iq</span><span class="p">,</span> <span class="mi">2</span><span class="p">))))</span>

<span class="nb">puts</span> <span class="s2">"That becomes: </span><span class="si">#{</span><span class="n">what</span><span class="si">}</span><span class="s2"> Can you do it by hand?"</span>
</pre></div>
</td></tr></tbody></table></div>
<p>We are now doing our own math functions for <tt class="docutils literal"><span class="pre">add</span></tt>, <tt class="docutils literal"><span class="pre">subtract</span></tt>,
<tt class="docutils literal"><span class="pre">multiply</span></tt>, and <tt class="docutils literal"><span class="pre">divide</span></tt>. The important thing to notice is the last
line where we say <tt class="docutils literal"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></tt> (in <tt class="docutils literal"><span class="pre">add</span></tt>). What this does is the
following:</p>
<ol class="arabic simple">
<li>Our function is called with two arguments: <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt>.</li>
<li>We print out what our function is doing, in this case "ADDING".</li>
<li>Then we tell Ruby to do something kind of backward: we return the
addition of <tt class="docutils literal"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></tt>. You might say this as, "I add a and b then
return them." In Ruby, the last evaluated statement in a method is
its return value. You can be more explicit if you want and type
<tt class="docutils literal"><span class="pre">return</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></tt>, but that is totally optional.</li>
<li>Ruby adds the two numbers. Then when the function ends any line that
runs it will be able to assign this a + b result to a variable.</li>
</ol>
<p>As with many other things in this book, you should take this real slow,
break it down and try to trace what's going on. To help there's extra
credit to get you to solve a puzzle and learn something cool.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex21.rb
<span class="go">Let's do some math with just functions!</span>
<span class="go">ADDING 30 + 5</span>
<span class="go">SUBTRACTING 78 - 4</span>
<span class="go">MULTIPLYING 90 * 2</span>
<span class="go">DIVIDING 100 / 2</span>
<span class="go">Age: 35, Height: 74, Weight: 180, IQ: 50</span>
<span class="go">Here is a puzzle.</span>
<span class="go">DIVIDING 50 / 2</span>
<span class="go">MULTIPLYING 180 * 25</span>
<span class="go">SUBTRACTING 74 - 4500</span>
<span class="go">ADDING 35 + -4426</span>
<span class="go">That becomes:  -4391 Can you do it by hand?</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>If you aren't really sure what return values are, try writing a few
of your own functions and have them return some values. You can
return anything that you can put to the right of an <tt class="docutils literal"><span class="pre">=</span></tt>.</li>
<li>At the end of the script is a puzzle. I'm taking the return value of
one function, and using it as the argument of another function. I'm
doing this in a chain so that I'm kind of creating a formula using
the functions. It looks really weird, but if you run the script you
can see the results. What you should do is try to figure out the
normal formula that would recreate this same set of operations.</li>
<li>Once you have the formula worked out for the puzzle, get in there and
see what happens when you modify the parts of the functions. Try to
change it on purpose to make another value.</li>
<li>Finally, do the inverse. Write out a simple formula and use the
functions in the same way to calculate it.</li>
</ol>
<p>This exercise might really whack your brain out, but take it slow and
easy and treat it like a little game. Figuring out puzzles like this is
what makes programming fun, so I'll be giving you more little problems
like this as we go.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex22">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-22-what-do-you-know-so-far">
<h1>Exercise 22: What Do You Know So Far?<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-22-what-do-you-know-so-far" title="Permalink to this headline">¶</a></h1>
<p>There won't be any code in this exercise or the next one, so there's no
WYSS or Extra Credit either. In fact, this exercise is like one giant
Extra Credit. I'm going to have you do a form of review what you have
learned so far.</p>
<p>First, go back through every exercise you have done so far and write
down every word and symbol (another name for 'character') that you have
used. Make sure your list of symbols is complete.</p>
<p>Next to each word or symbol, write its name and what it does. If you
can't find a name for a symbol in this book, then look for it online. If
you do not know what a word or symbol does, then go read about it again
and try using it in some code.</p>
<p>You may run into a few things you just can't find out or know, so just
keep those on the list and be ready to look them up when you find them.</p>
<p>Once you have your list, spend a few days rewriting the list and double
checking that it's correct. This may get boring but push through and
really nail it down.</p>
<p>Once you have memorized the list and what they do, then you should step
it up by writing out tables of symbols, their names, and what they do
from memory. When you hit some you can't recall <em>from memory</em>, go back
and memorize them again.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The most important thing when doing this exercise is:
"There is no failure, only trying."</p>
</div>
<div class="section" id="what-you-are-learning">
<h2>What You are Learning<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-are-learning" title="Permalink to this headline">¶</a></h2>
<p>It's important when you are doing a boring mindless memorization
exercise like this to know why. It helps you focus on a goal and know
the purpose of all your efforts.</p>
<p>In this exercise you are learning the names of symbols so that you can
read source code more easily. It's similar to learning the alphabet and
basic words of English, except that Ruby's alphabet has extra symbols
you might not know.</p>
<p>Just take it slow and do not hurt your brain. Hopefully by now these
symbols are natural for you so this isn't a big effort. It's best to
take 15 minutes at a time with your list and then take a break. Giving
your brain a rest will help you learn faster with less frustration.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex23">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-23-read-some-code">
<h1>Exercise 23: Read Some Code<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-23-read-some-code" title="Permalink to this headline">¶</a></h1>
<p>You should have spent last week getting your list of symbols straight
and locked in your mind. Now you get to apply this to another week
reading code on the internet. This exercise will be daunting at first.
I'm going to throw you in the deep end for a few days and have you just
try your best to read and understand some source code from real
projects. The goal isn't to get you to understand code, but to teach you
the following three skills:</p>
<ol class="arabic simple">
<li>Finding Ruby source code for things you need.</li>
<li>Reading through the code and looking for files.</li>
<li>Trying to understand code you find.</li>
<li>At your level you really do not have the skills to evaluate the
things you find, but you can benefit from getting exposure and seeing
how things look.</li>
</ol>
<p>When you do this exercise, think of yourself as an anthropologist,
trucking through a new land with just barely enough of the local
language to get around and survive. Except, of course, that you will
actually get out alive because the internet isn't a jungle. Anyway.</p>
<p>Here's what you do:</p>
<ol class="arabic simple">
<li>Go to github.com with your favorite web browser and search for
"ruby".</li>
<li>Pick a random project and click on it.</li>
<li>Click on the Source tab and browse through the list of files and
directories until you find a .rb file.</li>
<li>Start at the top and read through it, taking notes on what you think
it does.</li>
<li>If any symbols or strange words seem to interest you, write them down
to research later.</li>
</ol>
<p>That's it. Your job is to use what you know so far and see if you can
read the code and get a grasp of what it does. Try skimming the code
first, and then read it in detail. Maybe also try taking very difficult
parts and reading each symbol you know outloud.</p>
<p>Now try several other sites:</p>
<ul class="simple">
<li>heroku.com</li>
<li>rubygems.org</li>
<li>bitbucket.org</li>
</ul>
<p>On each of these sites you may find weird files ending in .c so stick to
.rb files like the ones you have written in this book.</p>
<p>A final fun thing to do is use the above four sources of Ruby code and
type in topics you are interested in instead of "ruby". Search for
"journalism", "cooking", "physics", or anything you are curious about.
Chances are there's some code out there you could use right away.</p>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex24">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-24-more-practice">
<h1>Exercise 24: More Practice<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-24-more-practice" title="Permalink to this headline">¶</a></h1>
<p>You are getting to the end of this section. You should have enough Ruby
"under your fingers" to move onto learning about how programming really
works, but you should do some more practice. This exercise is longer and
all about building up stamina. The next exercise will be similar. Do
them, get them exactly right, and do your checks.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">puts</span> <span class="s2">"Let's practice everything."</span>
<span class="nb">puts</span> <span class="s2">"You</span><span class="se">\'</span><span class="s2">d need to know </span><span class="se">\'</span><span class="s2">bout escapes with </span><span class="se">\\</span><span class="s2"> that do </span><span class="se">\n</span><span class="s2"> newlines and </span><span class="se">\t</span><span class="s2"> tabs."</span>

<span class="n">poem</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">MULTI_LINE_STRING</span>

<span class="sh">\tThe lovely world</span>
<span class="sh">with logic so firmly planted</span>
<span class="sh">cannot discern \n the needs of love</span>
<span class="sh">nor comprehend passion from intuition</span>
<span class="sh">and requires an explanation</span>
<span class="sh">\n\t\twhere there is none.</span>

<span class="no">MULTI_LINE_STRING</span>

<span class="nb">puts</span> <span class="s2">"--------------"</span>
<span class="nb">puts</span> <span class="n">poem</span>
<span class="nb">puts</span> <span class="s2">"--------------"</span>

<span class="n">five</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">6</span>
<span class="nb">puts</span> <span class="s2">"This should be five: </span><span class="si">#{</span><span class="n">five</span><span class="si">}</span><span class="s2">"</span>

<span class="k">def</span> <span class="nf">secret_formula</span><span class="p">(</span><span class="n">started</span><span class="p">)</span>
  <span class="n">jelly_beans</span> <span class="o">=</span> <span class="n">started</span> <span class="o">*</span> <span class="mi">500</span>
  <span class="n">jars</span> <span class="o">=</span> <span class="n">jelly_beans</span> <span class="o">/</span> <span class="mi">1000</span>
  <span class="n">crates</span> <span class="o">=</span> <span class="n">jars</span> <span class="o">/</span> <span class="mi">100</span>
  <span class="k">return</span> <span class="n">jelly_beans</span><span class="p">,</span> <span class="n">jars</span><span class="p">,</span> <span class="n">crates</span>
<span class="k">end</span>

<span class="n">start_point</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">beans</span><span class="p">,</span> <span class="n">jars</span><span class="p">,</span> <span class="n">crates</span> <span class="o">=</span> <span class="n">secret_formula</span><span class="p">(</span><span class="n">start_point</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"With a starting point of: </span><span class="si">#{</span><span class="n">start_point</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="s2">"We'd have </span><span class="si">#{</span><span class="n">beans</span><span class="si">}</span><span class="s2"> beans, </span><span class="si">#{</span><span class="n">jars</span><span class="si">}</span><span class="s2"> jars, and </span><span class="si">#{</span><span class="n">crates</span><span class="si">}</span><span class="s2"> crates."</span>

<span class="n">start_point</span> <span class="o">=</span> <span class="n">start_point</span> <span class="o">/</span> <span class="mi">10</span>

<span class="nb">puts</span> <span class="s2">"We can also do that this way:"</span>
<span class="nb">puts</span> <span class="s2">"We'd have %s beans, %s jars, and %s crates."</span> <span class="o">%</span> <span class="n">secret_formula</span><span class="p">(</span><span class="n">start_point</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex24.rb
<span class="go">Let's practice everything.</span>
<span class="go">You'd need to know 'bout escapes with \ that do</span>
<span class="go"> newlines and    tabs.</span>
<span class="go">--------------</span>

<span class="go">    The lovely world</span>
<span class="go">with logic so firmly planted</span>
<span class="go">cannot discern</span>
<span class="go"> the needs of love</span>
<span class="go">nor comprehend passion from intuition</span>
<span class="go">and requires an explanation</span>

<span class="go">        where there is none.</span>

<span class="go">--------------</span>
<span class="go">This should be five: 5</span>
<span class="go">With a starting point of: 10000</span>
<span class="go">We'd have 5000000 beans, 5000 jars, and 50 crates.</span>
<span class="go">We can also do that this way:</span>
<span class="go">We'd have 500000 beans, 500 jars, and 5 crates.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Make sure to do your checks: read it backwards, read it out loud, put
comments above confusing parts.</li>
<li>Break the file on purpose, then run it to see what kinds of errors
you get. Make sure you can fix it.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    


    <a href="#top">Top of page</a>
		<div class="document" id="ex25">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-25-even-more-practice">
<h1>Exercise 25: Even More Practice<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-25-even-more-practice" title="Permalink to this headline">¶</a></h1>
<p>We're going to do some more practice involving functions and variables
to make sure you know them well. This exercise should be straight
forward for you to type in, break down, and understand.</p>
<p>However, this exercise is a little different. You won't be running it.
Instead <em>you</em> will import it into your Ruby interpreter and run the
functions yourself.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">module</span> <span class="nn">Ex25</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">break_words</span><span class="p">(</span><span class="n">stuff</span><span class="p">)</span>
    <span class="c1"># This function will break up words for us.</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">stuff</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span>
    <span class="n">words</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">sort_words</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="c1"># Sorts the words.</span>
    <span class="n">words</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span> 
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">print_first_word</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="c1"># Prints the first word and shifts the others down by one.</span>
    <span class="n">word</span> <span class="o">=</span> <span class="n">words</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="n">word</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">print_last_word</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="c1"># Prints the last word after popping it off the end.</span>
    <span class="n">word</span> <span class="o">=</span> <span class="n">words</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="n">word</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">sort_sentence</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="c1"># Takes in a full sentence and returns the sorted words.</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">break_words</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="n">sort_words</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">print_first_and_last</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="c1"># Prints the first and last words of the sentence.</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">break_words</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="n">print_first_word</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="n">print_last_word</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">print_first_and_last_sorted</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="c1"># Sorts the words then prints the first and last one.</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">sort_sentence</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="n">print_first_word</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="n">print_last_word</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>First, run this like normal with <tt class="docutils literal"><span class="pre">ruby</span> <span class="pre">ex25.rb</span></tt> to find any errors you
have made. Once you have found all of the errors you can and fixed them,
you will then want to follow the WYSS section to complete the exercise.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>In this exercise we're going to interact with your <tt class="docutils literal"><span class="pre">.rb</span></tt> file inside
the Ruby interpreter (IRB) you used periodically to do calculations.</p>
<p>Here's what it looks like when I do it:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> irb
<span class="go">irb(main):001:0&gt; require './ex25'</span>
<span class="go">=&gt; true</span>
<span class="go">irb(main):002:0&gt; sentence = "All good things come to those who wait."</span>
<span class="go">=&gt; "All good things come to those who wait."</span>
<span class="go">irb(main):003:0&gt; words = Ex25.break_words(sentence)</span>
<span class="go">=&gt; ["All", "good", "things", "come", "to", "those", "who", "wait."]</span>
<span class="go">irb(main):004:0&gt; sorted_words = Ex25.sort_words(words)</span>
<span class="go">=&gt; ["All", "come", "good", "things", "those", "to", "wait.", "who"]</span>
<span class="go">irb(main):005:0&gt; Ex25.print_first_word(words)</span>
<span class="go">All</span>
<span class="go">=&gt; nil</span>
<span class="go">irb(main):006:0&gt; Ex25.print_last_word(words)</span>
<span class="go">wait.</span>
<span class="go">=&gt; nil</span>
<span class="go">irb(main):007:0&gt; Ex25.wrods</span>
<span class="go">NoMethodError: undefined method `wrods' for Ex25:Module</span>
<span class="go">        from (irb):6</span>
<span class="go">irb(main):008:0&gt; words</span>
<span class="go">=&gt; ["good", "things", "come", "to", "those", "who"]</span>
<span class="go">irb(main):009:0&gt; Ex25.print_first_word(sorted_words)</span>
<span class="go">All</span>
<span class="go">=&gt; nil</span>
<span class="go">irb(main):010:0&gt; Ex25.print_last_word(sorted_words)</span>
<span class="go">who</span>
<span class="go">=&gt; nil</span>
<span class="go">irb(main):011:0&gt; sorted_words</span>
<span class="go">=&gt; ["come", "good", "things", "those", "to", "wait."]</span>
<span class="go">irb(main):012:0&gt; Ex25.sort_sentence(sentence)</span>
<span class="go">=&gt; ["All", "come", "good", "things", "those", "to", "wait.", "who"]</span>
<span class="go">irb(main):013:0&gt; Ex25.print_first_and_last(sentence)</span>
<span class="go">All</span>
<span class="go">wait.</span>
<span class="go">=&gt; nil</span>
<span class="go">irb(main):014:0&gt; Ex25.print_first_and_last_sorted(sentence)</span>
<span class="go">All</span>
<span class="go">who</span>
<span class="go">=&gt; nil</span>
<span class="go">irb(main):015:0&gt; ^D</span>
<span class="gp">$</span>
</pre></div>
</div>
<p>Let's break this down line by line to make sure you know what's going
on:</p>
<ol class="arabic simple">
<li>Line 2 you require your <tt class="docutils literal"><span class="pre">./ex25.rb</span></tt> Ruby file, just like other
requires you have done. Notice you do not need to put the <tt class="docutils literal"><span class="pre">.rb</span></tt> at
the end to require it. When you do this you make a <tt class="docutils literal"><span class="pre">module</span></tt> that
has all your functions in it to use.</li>
<li>Line 4 you made a <tt class="docutils literal"><span class="pre">sentence</span></tt> to work with.</li>
<li>Line 6 you use the <tt class="docutils literal"><span class="pre">Ex25</span></tt> module and call your first function
<tt class="docutils literal"><span class="pre">Ex25.break_words</span></tt>. The <tt class="docutils literal"><span class="pre">.</span></tt> (dot, period) symbol is how you tell
Ruby, "Hey, inside <tt class="docutils literal"><span class="pre">Ex25</span></tt> there's a function called <tt class="docutils literal"><span class="pre">break_words</span></tt>
and I want to run it."</li>
<li>Line 8 we do the same thing with <tt class="docutils literal"><span class="pre">Ex25.sort_words</span></tt> to get a sorted
sentence.</li>
<li>Lines 10-15 we use <tt class="docutils literal"><span class="pre">Ex25.print_first_word</span></tt> and
<tt class="docutils literal"><span class="pre">Ex25.print_last_word</span></tt> to get the first and last word printed out.</li>
<li>Line 16 is interesting. I made a mistake and typed the <tt class="docutils literal"><span class="pre">words</span></tt>
variable as <tt class="docutils literal"><span class="pre">wrods</span></tt> so Ruby gave me an error on Lines 17-18.</li>
<li>Lines 19-20 is where we print the modified words list. Notice that
since we printed the first and last one, those words are now missing.</li>
<li>The remaining lines are for you to figure out and analyze in the
extra credit.</li>
</ol>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Take the remaining lines of the WYSS output and figure out what they
are doing. Make sure you understand how you are running your
functions in the Ex25 module.</li>
<li>The reason we put our functions in a <tt class="docutils literal"><span class="pre">module</span></tt> is so they have their
own namespace. If someone else writes a function called
<tt class="docutils literal"><span class="pre">break_words</span></tt>, we won't collide. However, if typing <tt class="docutils literal"><span class="pre">Ex25.</span></tt> is
annoying, you can type <tt class="docutils literal"><span class="pre">include</span> <span class="pre">Ex25</span></tt> which is like saying,
"Include everything from the Ex25 module in my current module."</li>
<li>Try breaking your file and see what it looks like in Ruby when you
use it. You will have to quit IRB with CTRL-D to be able to reload
it.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    


    <a href="#top">Top of page</a>
		<div class="document" id="ex26">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-26-congratulations-take-a-test">
<h1>Exercise 26: Congratulations, Take A Test!<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-26-congratulations-take-a-test" title="Permalink to this headline">¶</a></h1>
<p>You are almost done with the first half of the book. The second half is
where things get interesting. You will learn logic and be able to do
useful things like make decisions.</p>
<p>Before you continue, I have a quiz for you. This quiz will be very hard
because it requires you to fix someone else's code. When you are a
programmer you often have to deal with another programmer's code, and
also with their arrogance. They will very frequently claim that their
code is perfect.</p>
<p>These programmers are stupid people who care little for others. A good
programmer assumes, like a good scientist, that there's always some
probability their code is wrong. Good programmers start from the premise
that their software is broken and then work to rule out all possible
ways it could be wrong before finally admitting that maybe it really is
the other guy's code.</p>
<p>In this exercise, you will practice dealing with a bad programmer by
fixing a bad programmer's code. I have poorly copied exercises 24 and 25
into a file and removed random characters and added flaws. Most of the
errors are things Ruby will tell you, while some of them are math errors
you should find. Others are formatting errors or spelling mistakes in
the strings.</p>
<p>All of these errors are very common mistakes all programmers make. Even
experienced ones.</p>
<p>Your job in this exercise is to correct this file. Use all of your
skills to make this file better. Analyze it first, maybe printing it out
to edit it like you would a school term paper. Fix each flaw and keep
running it and fixing it until the script runs perfectly. Try not to get
help, and instead if you get stuck take a break and come back to it
later.</p>
<p>Even if this takes days to do, bust through it and make it right.</p>
<p>Finally, the point of this exercise isn't to type it in, but to fix an
existing file. To do that, you must go to:</p>
<p><a class="reference external" href="http://ruby.learncodethehardway.org/book/exercise26.txt">http://ruby.learncodethehardway.org/book/exercise26.txt</a></p>
<p>Copy-paste the code into a file named <tt class="docutils literal"><span class="pre">ex26.rb</span></tt>. This is the only time
you are allowed to copy-paste.</p>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex27">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-27-memorizing-logic">
<h1>Exercise 27: Memorizing Logic<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-27-memorizing-logic" title="Permalink to this headline">¶</a></h1>
<p>Today is the day you start learning about logic. Up to this point you
have done everything you possibly can reading and writing files, to the
terminal, and have learned quite a lot of the math capabilities of Ruby.</p>
<p>From now on, you will be learning logic. You won't learn complex
theories that academics love to study, but just the simple basic logic
that makes real programs work and that real programmers need every day.</p>
<p>Learning logic has to come after you do some memorization. I want you to
do this exercise for an entire week. Do not falter. Even if you are
bored out of your mind, keep doing it. This exercise has a set of logic
tables you must memorize to make it easier for you to do the later
exercises.</p>
<p>I'm warning you this won't be fun at first. It will be downright boring
and tedious but this is to teach you a very important skill you will
need as a programmer. You will need to be able to memorize important
concepts as you go in your life. Most of these concepts will be exciting
once you get them. You will struggle with them, like wrestling a squid,
then one day snap you will understand it. All that work memorizing the
basics pays off big later.</p>
<p>Here's a tip on how to memorize something without going insane: Do a
tiny bit at a time throughout the day and mark down what you need to
work on most. Do not try to sit down for two hours straight and memorize
these tables. This won't work. Your brain will really only retain
whatever you studied in the first 15 or 30 minutes anyway.</p>
<p>Instead, what you should do is create a bunch of index cards with each
column on the left on one side (True or False) and the column on the
right on the back. You should then pull them out, see the "True or
False" and be able to immediately say "True!" Keep practicing until you
can do this.</p>
<p>Once you can do that, start writing out your own truth tables each night
into a notebook. Do not just copy them. Try to do them from memory, and
when you get stuck glance quickly at the ones I have here to refresh
your memory. Doing this will train your brain to remember the whole
table.</p>
<p>Do not spend more than one week on this, because you will be applying it
as you go.</p>
<div class="section" id="the-truth-terms">
<h2>The Truth Terms<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#the-truth-terms" title="Permalink to this headline">¶</a></h2>
<p>In Ruby we have the following terms (characters and phrases) for
determining if something is "true" or "false". Logic on a computer is
all about seeing if some combination of these characters and some
variables is True at that point in the program.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">and</span></tt></li>
<li><tt class="docutils literal"><span class="pre">or</span></tt></li>
<li><tt class="docutils literal"><span class="pre">not</span></tt></li>
<li><tt class="docutils literal"><span class="pre">!=</span></tt> (not equal)</li>
<li><tt class="docutils literal"><span class="pre">==</span></tt> (equal)</li>
<li><tt class="docutils literal"><span class="pre">&gt;=</span></tt> (greater-than-equal)</li>
<li><tt class="docutils literal"><span class="pre">&lt;=</span></tt> (less-than-equal)</li>
<li>true</li>
<li>false</li>
</ul>
<p>You actually have run into these characters before, but maybe not the
phrases. The phrases (and, or, not) actually work the way you expect
them to, just like in English.</p>
</div>
<div class="section" id="the-truth-tables">
<h2>The Truth Tables<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#the-truth-tables" title="Permalink to this headline">¶</a></h2>
<p>We will now use these characters to make the truth tables you need to
memorize.</p>
<table border="1" class="docutils"><thead valign="bottom">
<tr><th class="head"><p>NOT</p>
</th>
<th class="head"><p>True?</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>not False</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>not True</p>
</td>
<td><p>False</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils"><thead valign="bottom">
<tr><th class="head"><p>OR</p>
</th>
<th class="head"><p>True?</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>True or False</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>True or True</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>False or True</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>False or False</p>
</td>
<td><p>False</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils"><thead valign="bottom">
<tr><th class="head"><p>AND</p>
</th>
<th class="head"><p>True?</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>True and False</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>True and True</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>False and True</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>False and False</p>
</td>
<td><p>False</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils"><thead valign="bottom">
<tr><th class="head"><p>NOT OR</p>
</th>
<th class="head"><p>True?</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>not (True or False)</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>not (True or True)</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>not (False or True)</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>not (False or False)</p>
</td>
<td><p>True</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils"><thead valign="bottom">
<tr><th class="head"><p>NOT AND</p>
</th>
<th class="head"><p>True?</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>not (True and False)</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>not (True and True)</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>not (False and True)</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>not (False and False)</p>
</td>
<td><p>True</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils"><thead valign="bottom">
<tr><th class="head"><p>!=</p>
</th>
<th class="head"><p>True?</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>1 != 0</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>1 != 1</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>0 != 1</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>0 != 0</p>
</td>
<td><p>False</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils"><thead valign="bottom">
<tr><th class="head"><p>==</p>
</th>
<th class="head"><p>True?</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p>1 == 0</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>1 == 1</p>
</td>
<td><p>True</p>
</td>
</tr>
<tr><td><p>0 == 1</p>
</td>
<td><p>False</p>
</td>
</tr>
<tr><td><p>0 == 0</p>
</td>
<td><p>True</p>
</td>
</tr>
</tbody>
</table><p>Now use these tables to write up your own cards and spend the week
memorizing them. Remember though, there is no failing in this book, just
trying as hard as you can each day, and then a little bit more.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex28">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-28-boolean-practice">
<h1>Exercise 28: Boolean Practice<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-28-boolean-practice" title="Permalink to this headline">¶</a></h1>
<p>The logic combinations you learned from the last exercise are called
"boolean" logic expressions. Boolean logic is used everywhere in
programming. They are essential fundamental parts of computation and
knowing them very well is akin to knowing your scales in music.</p>
<p>In this exercise you will be taking the logic exercises you memorized
and start trying them out in IRB. Take each of these logic problems, and
write out what you think the answer will be. In each case it will be
either true or false. Once you have the answers written down, you will
start IRB in your terminal and type them in to confirm your answers.</p>
<div class="highlight-python"><pre>1. true and true
2. false and true
3. 1 == 1 and 2 == 1
4. "test" == "test"
5. 1 == 1 or 2 != 1
6. true and 1 == 1
7. false and 0 != 0
8. true or 1 == 1
9. "test" == "testing"
10. 1 != 0 and 2 == 1
11. "test" != "testing"
12. "test" == 1
13. not (true and false)
14. not (1 == 1 and 0 != 1)
15. not (10 == 1 or 1000 == 1000)
16. not (1 != 10 or 3 == 4)
17. not ("testing" == "testing" and "Zed" == "Cool Guy")
18. 1 == 1 and not ("testing" == 1 or 1 == 0)
19. "chunky" == "bacon" and not (3 == 4 or 3 == 3)
20. 3 == 3 and not ("testing" == "testing" or "Ruby" == "Fun")</pre>
</div>
<p>I will also give you a trick to help you figure out the more complicated
ones toward the end.</p>
<p>Whenever you see these boolean logic statements, you can solve them
easily by this simple process:</p>
<ol class="arabic simple">
<li>Find equality test (<tt class="docutils literal"><span class="pre">==</span></tt> or <tt class="docutils literal"><span class="pre">!=</span></tt>) and replace it with its truth.</li>
<li>Find each and/or inside a parenthesis and solve those first.</li>
<li>Find each not and invert it.</li>
<li>Find any remaining and/or and solve it.</li>
<li>When you are done you should have true or false.</li>
</ol>
<p>I will demonstrate with a variation on #20:</p>
<p><tt class="docutils literal"><span class="pre">3</span> <span class="pre">!=</span> <span class="pre">4</span> <span class="pre">and</span> <span class="pre">not</span> <span class="pre">("testing"</span> <span class="pre">!=</span> <span class="pre">"test"</span> <span class="pre">or</span> <span class="pre">"Ruby"</span> <span class="pre">==</span> <span class="pre">"Ruby")</span></tt></p>
<p>Here's me going through each of the steps and showing you the
translation until I've boiled it down to a single result:</p>
<ol class="arabic simple">
<li>Solve each equality test:<ul>
<li><tt class="docutils literal"><span class="pre">3</span> <span class="pre">!=</span> <span class="pre">4</span></tt> is <strong>True</strong>:
<tt class="docutils literal"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">not</span> <span class="pre">("testing"</span> <span class="pre">!=</span> <span class="pre">"test"</span> <span class="pre">or</span> <span class="pre">"Ruby"</span> <span class="pre">==</span> <span class="pre">"Ruby")</span></tt></li>
<li><tt class="docutils literal"><span class="pre">"testing"</span> <span class="pre">!=</span> <span class="pre">"test"</span></tt> is <strong>True</strong>:
<tt class="docutils literal"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">not</span> <span class="pre">(true</span> <span class="pre">or</span> <span class="pre">"Ruby"</span> <span class="pre">==</span> <span class="pre">"Ruby")</span></tt></li>
<li><tt class="docutils literal"><span class="pre">"Ruby"</span> <span class="pre">==</span> <span class="pre">"Ruby"</span></tt>: <tt class="docutils literal"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">not</span> <span class="pre">(true</span> <span class="pre">or</span> <span class="pre">true)</span></tt></li>
</ul>
</li>
<li>Find each and/or in parenthesis <tt class="docutils literal"><span class="pre">()</span></tt>:<ul>
<li><tt class="docutils literal"><span class="pre">(true</span> <span class="pre">or</span> <span class="pre">true)</span></tt> is <strong>True</strong>: <tt class="docutils literal"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">not</span> <span class="pre">(true)</span></tt> 3 Find
each not and invert it:</li>
<li><tt class="docutils literal"><span class="pre">not</span> <span class="pre">(true)</span></tt> is <strong>False</strong>: <tt class="docutils literal"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">false</span></tt></li>
</ul>
</li>
<li>Find any remaining and/or and solve them:<ul>
<li><tt class="docutils literal"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">false</span></tt> is <strong>False</strong></li>
</ul>
</li>
</ol>
<p>With that we're done and know the result is false.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The more complicated ones may seem very hard at first.
You should be able to give a good first stab at solving them, but do
not get discouraged. I'm just getting you primed for more of these
"logic gymnastics" so that later cool stuff is much easier. Just
stick with it, and keep track of what you get wrong, but do not
worry that it's not getting in your head quite yet. It'll come.</p>
</div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>After you have tried to guess at these, this is what your session with
IRB might look like:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> irb
<span class="go">ruby-1.9.2-p180 :001 &gt; true and true</span>
<span class="go"> =&gt; true</span>
<span class="go">ruby-1.9.2-p180 :002 &gt; 1 == 1 and 2 == 2</span>
<span class="go"> =&gt; true</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>There are a lot of operators in Ruby similar to <tt class="docutils literal"><span class="pre">!=</span></tt> and <tt class="docutils literal"><span class="pre">==</span></tt>.
Try to find out as many "equality operators" as you can. They should
be like: <tt class="docutils literal"><span class="pre">&lt;</span></tt> or <tt class="docutils literal"><span class="pre">&lt;=</span></tt>.</li>
<li>Write out the names of each of these equality operators. For example,
I call <tt class="docutils literal"><span class="pre">!=</span></tt> "not equal".</li>
<li>Play with IRB by typing out new boolean operators, and before you hit
enter try to shout out what it is. Do not think about it, just the
first thing that comes to mind. Write it down then hit enter, and
keep track of how many you get right and wrong. Throw away that piece
of paper from #3 away so you do not accidentally try to use it later.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    


    <a href="#top">Top of page</a>
		<div class="document" id="ex29">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-29-what-if">
<h1>Exercise 29: What If<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-29-what-if" title="Permalink to this headline">¶</a></h1>
<p>Here is the next script of Ruby you will enter, which introduces you to
the <tt class="docutils literal"><span class="pre">if-statement</span></tt>. Type this in, make it run exactly right, and then
we'll try see if your practice has paid off.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">cats</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">dogs</span> <span class="o">=</span> <span class="mi">15</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">&lt;</span> <span class="n">cats</span>
  <span class="nb">puts</span> <span class="s2">"Too many cats! The world is doomed!"</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">&gt;</span> <span class="n">cats</span>
  <span class="nb">puts</span> <span class="s2">"Not many cats! The world is saved!"</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">&lt;</span> <span class="n">dogs</span>
  <span class="nb">puts</span> <span class="s2">"The world is drooled on!"</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">&gt;</span> <span class="n">dogs</span>
  <span class="nb">puts</span> <span class="s2">"The world is dry!"</span>
<span class="k">end</span>

<span class="n">dogs</span> <span class="o">+=</span> <span class="mi">5</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">&gt;=</span> <span class="n">dogs</span>
  <span class="nb">puts</span> <span class="s2">"People are greater than or equal to dogs."</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">&lt;=</span> <span class="n">dogs</span>
  <span class="nb">puts</span> <span class="s2">"People are less than or equal to dogs."</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">==</span> <span class="n">dogs</span>
  <span class="nb">puts</span> <span class="s2">"People are dogs."</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex29.rb
<span class="go">Too many cats! The world is doomed!</span>
<span class="go">The world is dry!</span>
<span class="go">People are greater than or equal to dogs.</span>
<span class="go">People are less than or equal to dogs.</span>
<span class="go">People are dogs.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>In this extra credit, try to guess what you think the <tt class="docutils literal"><span class="pre">if-statement</span></tt>
is and what it does. Try to answer these questions in your own words
before moving onto the next exercise:</p>
<ol class="arabic simple">
<li>What do you think the <tt class="docutils literal"><span class="pre">if</span></tt> does to the code under it?</li>
<li>Can you put other boolean expressions from Ex. 27 in the
<tt class="docutils literal"><span class="pre">if-statement</span></tt>? Try it.</li>
<li>What happens if you change the initial variables for people, cats,
and dogs?</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex30">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-30-else-and-if">
<h1>Exercise 30: Else And If<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-30-else-and-if" title="Permalink to this headline">¶</a></h1>
<p>In the last exercise you worked out some <tt class="docutils literal"><span class="pre">if-statements</span></tt>, and then
tried to guess what they are and how they work. Before you learn more
I'll explain what everything is by answering the questions you had from
extra credit. You did the extra credit right?</p>
<ol class="arabic simple">
<li>What do you think the if does to the code under it? An <tt class="docutils literal"><span class="pre">if</span></tt>
statement creates what is called a "branch" in the code. It's kind of
like those choose your own adventure books where you are asked to
turn to one page if you make one choice, and another if you go a
different direction. The <tt class="docutils literal"><span class="pre">if-statement</span></tt> tells your script, "If this
boolean expression is True, then run the code under it, otherwise
skip it."</li>
<li>Can you put other boolean expressions from Ex. 27 in the <tt class="docutils literal"><span class="pre">if</span></tt>
statement? Try it. Yes you can, and they can be as complex as you
like, although really complex things generally are bad style.</li>
<li>What happens if you change the initial values for people, cats,
and dogs? Because you are comparing numbers, if you change the
numbers, different <tt class="docutils literal"><span class="pre">if-statements</span></tt> will evaluate to <strong>True</strong> and
the blocks of code under them will run. Go back and put different
numbers in and see if you can figure out in your head what blocks of
code will run.</li>
</ol>
<p>Compare my answers to your answers, and make sure you really understand
the concept of a "block" of code. This is important for when you do the
next exercise where you write all the parts of <tt class="docutils literal"><span class="pre">if-statements</span></tt> that
you can use.</p>
<p>Type this one in and make it work too.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">cars</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">buses</span> <span class="o">=</span> <span class="mi">15</span>

<span class="k">if</span> <span class="n">cars</span> <span class="o">&gt;</span> <span class="n">people</span>
  <span class="nb">puts</span> <span class="s2">"We should take the cars."</span>
<span class="k">elsif</span> <span class="n">cars</span> <span class="o">&lt;</span> <span class="n">people</span>
  <span class="nb">puts</span> <span class="s2">"We should not take the cars."</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"We can't decide."</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">buses</span> <span class="o">&gt;</span> <span class="n">cars</span>
  <span class="nb">puts</span> <span class="s2">"That's too many buses."</span>
<span class="k">elsif</span> <span class="n">buses</span> <span class="o">&lt;</span> <span class="n">cars</span>
  <span class="nb">puts</span> <span class="s2">"Maybe we could take the buses."</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"We still can't decide."</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">people</span> <span class="o">&gt;</span> <span class="n">buses</span>
  <span class="nb">puts</span> <span class="s2">"Alright, let's just take the buses."</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"Fine, let's stay home then."</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex30.rb
<span class="go">We should take the cars.</span>
<span class="go">Maybe we could take the buses.</span>
<span class="go">Alright, let's just take the buses.</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Try to guess what <tt class="docutils literal"><span class="pre">elsif</span></tt> and <tt class="docutils literal"><span class="pre">else</span></tt> are doing.</li>
<li>Change the numbers of <tt class="docutils literal"><span class="pre">cars</span></tt>, <tt class="docutils literal"><span class="pre">people</span></tt>, and <tt class="docutils literal"><span class="pre">buses</span></tt> and then
trace through each <tt class="docutils literal"><span class="pre">if-statement</span></tt> to see what will be printed.</li>
<li>Try some more complex boolean expressions like
<tt class="docutils literal"><span class="pre">cars</span> <span class="pre">&gt;</span> <span class="pre">people</span> <span class="pre">and</span> <span class="pre">buses</span> <span class="pre">&lt;</span> <span class="pre">cars</span></tt>. Above each line write an English
description of what the line does.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    


    <a href="#top">Top of page</a>
		<div class="document" id="ex31">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-31-making-decisions">
<h1>Exercise 31: Making Decisions<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-31-making-decisions" title="Permalink to this headline">¶</a></h1>
<p>In the first half of this book you mostly just printed out things and
called functions, but everything was basically in a straight line. Your
scripts ran starting at the top, and went to the bottom where they
ended. If you made a function you could run that function later, but it
still didn't have the kind of branching you need to really make
decisions. Now that you have <tt class="docutils literal"><span class="pre">if</span></tt>, <tt class="docutils literal"><span class="pre">else</span></tt>, and <tt class="docutils literal"><span class="pre">elsif</span></tt> you can
start to make scripts that decide things.</p>
<p>In the last script you wrote out a simple set of tests asking some
questions. In this script you will ask the user questions and make
decisions based on their answers. Write this script, and then play with
it quite a lot to figure it out.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">prompt</span>
  <span class="nb">print</span> <span class="s2">"&gt; "</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"You enter a dark room with two doors.  Do you go through door #1 or door #2?"</span>

<span class="n">prompt</span><span class="p">;</span> <span class="n">door</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

<span class="k">if</span> <span class="n">door</span> <span class="o">==</span> <span class="s2">"1"</span>
  <span class="nb">puts</span> <span class="s2">"There's a giant bear here eating a cheese cake.  What do you do?"</span>
  <span class="nb">puts</span> <span class="s2">"1. Take the cake."</span>
  <span class="nb">puts</span> <span class="s2">"2. Scream at the bear."</span>

  <span class="n">prompt</span><span class="p">;</span> <span class="n">bear</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

  <span class="k">if</span> <span class="n">bear</span> <span class="o">==</span> <span class="s2">"1"</span>
    <span class="nb">puts</span> <span class="s2">"The bear eats your face off.  Good job!"</span>
  <span class="k">elsif</span> <span class="n">bear</span> <span class="o">==</span> <span class="s2">"2"</span>
    <span class="nb">puts</span> <span class="s2">"The bear eats your legs off.  Good job!"</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"Well, doing </span><span class="si">#{</span><span class="n">bear</span><span class="si">}</span><span class="s2"> is probably better.  Bear runs away."</span>
  <span class="k">end</span>

<span class="k">elsif</span> <span class="n">door</span> <span class="o">==</span> <span class="s2">"2"</span>
  <span class="nb">puts</span> <span class="s2">"You stare into the endless abyss at Cthuhlu's retina."</span>
  <span class="nb">puts</span> <span class="s2">"1. Blueberries."</span>
  <span class="nb">puts</span> <span class="s2">"2. Yellow jacket clothespins."</span>
  <span class="nb">puts</span> <span class="s2">"3. Understanding revolvers yelling melodies."</span>

  <span class="n">prompt</span><span class="p">;</span> <span class="n">insanity</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span> 

  <span class="k">if</span> <span class="n">insanity</span> <span class="o">==</span> <span class="s2">"1"</span> <span class="ow">or</span> <span class="n">insanity</span> <span class="o">==</span> <span class="s2">"2"</span>
    <span class="nb">puts</span> <span class="s2">"Your body survives powered by a mind of jello.  Good job!"</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"The insanity rots your eyes into a pool of muck.  Good job!"</span>
  <span class="k">end</span>

<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"You stumble around and fall on a knife and die.  Good job!"</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>A key point here is that you are now putting the <tt class="docutils literal"><span class="pre">if-statements</span></tt>
<em>inside</em> <tt class="docutils literal"><span class="pre">if-statements</span></tt> as code that can run. This is very powerful
and can be used to create "nested" decisions, where one branch leads to
another and another.</p>
<p>Make sure you understand this concept of <tt class="docutils literal"><span class="pre">if-statements</span></tt> inside
<tt class="docutils literal"><span class="pre">if-statements</span></tt>. In fact, do the extra credit to really nail it.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>Here is me playing this little adventure game. I do not do so well.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex31.rb
<span class="go">You enter a dark room with two doors.  Do you go through door #1 or door #2?</span>
<span class="gp">&gt;</span> 1
<span class="go">There's a giant bear here eating a cheese cake.  What do you do?</span>
<span class="go">1. Take the cake.</span>
<span class="go">2. Scream at the bear.</span>
<span class="gp">&gt;</span> 2
<span class="go">The bear eats your legs off.  Good job!</span>

<span class="gp">$</span> ruby ex31.rb
<span class="go">You enter a dark room with two doors.  Do you go through door #1 or door #2?</span>
<span class="gp">&gt;</span> 1
<span class="go">There's a giant bear here eating a cheese cake.  What do you do?</span>
<span class="go">1. Take the cake.</span>
<span class="go">2. Scream at the bear.</span>
<span class="gp">&gt;</span> 1
<span class="go">The bear eats your face off.  Good job!</span>

<span class="gp">$</span> ruby ex31.rb
<span class="go">You enter a dark room with two doors.  Do you go through door #1 or door #2?</span>
<span class="gp">&gt;</span> 2
<span class="go">You stare into the endless abyss at Cthuhlu's retina.</span>
<span class="go">1. Blueberries.</span>
<span class="go">2. Yellow jacket clothespins.</span>
<span class="go">3. Understanding revolvers yelling melodies.</span>
<span class="gp">&gt;</span> 1
<span class="go">Your body survives powered by a mind of jello.  Good job!</span>

<span class="gp">$</span> ruby ex31.rb
<span class="go">You enter a dark room with two doors.  Do you go through door #1 or door #2?</span>
<span class="gp">&gt;</span> 2
<span class="go">You stare into the endless abyss at Cthuhlu's retina.</span>
<span class="go">1. Blueberries.</span>
<span class="go">2. Yellow jacket clothespins.</span>
<span class="go">3. Understanding revolvers yelling melodies.</span>
<span class="gp">&gt;</span> 3
<span class="go">The insanity rots your eyes into a pool of muck.  Good job!</span>

<span class="gp">$</span> ruby ex31.rb
<span class="go">You enter a dark room with two doors.  Do you go through door #1 or door #2?</span>
<span class="gp">&gt;</span> stuff
<span class="go">You stumble around and fall on a knife and die.  Good job!</span>

<span class="gp">$</span> ruby ex31.rb
<span class="go">You enter a dark room with two doors.  Do you go through door #1 or door #2?</span>
<span class="gp">&gt;</span> 1
<span class="go">There's a giant bear here eating a cheese cake.  What do you do?</span>
<span class="go">1. Take the cake.</span>
<span class="go">2. Scream at the bear.</span>
<span class="gp">&gt;</span> apples
<span class="go">Well, doing apples is probably better.  Bear runs away.</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<p>Make new parts of the game and change what decisions people can make.
Expand the game out as much as you can before it gets ridiculous.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex32">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-32-loops-and-arrays">
<h1>Exercise 32: Loops And Arrays<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-32-loops-and-arrays" title="Permalink to this headline">¶</a></h1>
<p>You should now be able to do some programs that are much more
interesting. If you have been keeping up, you should realize that now
you can combine all the other things you have learned with
<tt class="docutils literal"><span class="pre">if-statements</span></tt> and boolean expressions to make your programs do smart
things.</p>
<p>However, programs also need to do repetitive things very quickly. We are
going to use a <tt class="docutils literal"><span class="pre">for-loop</span></tt> in this exercise to build and print various
arrays. When you do the exercise, you will start to figure out what they
are. I won't tell you right now. You have to figure it out.</p>
<p>Before you can use a <tt class="docutils literal"><span class="pre">for-loop</span></tt>, you need a way to store the results
of loops somewhere. The best way to do this is with an <tt class="docutils literal"><span class="pre">array</span></tt>. An
array is a container of things that are organized in order. It's not
complicated; you just have to learn a new syntax. First, there's how you
make an array:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">hairs</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'brown'</span><span class="p">,</span> <span class="s1">'blond'</span><span class="p">,</span> <span class="s1">'red'</span><span class="o">]</span>
<span class="n">eyes</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'brown'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'green'</span><span class="o">]</span>
<span class="n">weights</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">]</span>
</pre></div>
</div>
<p>What you do is start the array with the <tt class="docutils literal"><span class="pre">[</span></tt> (left-bracket) which
"opens" the array. Then you put each item you want in the array
separated by commas, just like when you did function arguments. Lastly
you end the array with a <tt class="docutils literal"><span class="pre">]</span></tt> (right-bracket) to indicate that it's
over. Ruby then takes this array and all its contents, and assigns them
to the variable.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is where things get tricky for people who can't
program. Your brain has been taught that the world is flat. Remember
in the last exercise where you put <tt class="docutils literal"><span class="pre">if-statements</span></tt> inside
<tt class="docutils literal"><span class="pre">if-statements</span></tt>? That probably made your brain hurt because most
people do not ponder how to "nest" things inside things. In
programming this is all over the place. You will find functions that
call other functions that have <tt class="docutils literal"><span class="pre">if-statements</span></tt> that have arrays
with arrays inside arrays. If you see a structure like this that you
can't figure out, take out pencil and paper and break it down
manually bit by bit until you understand it.</p>
</div>
<p>We now will build some arrays using some loops and print them out:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">the_count</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="o">]</span>
<span class="n">fruits</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'apples'</span><span class="p">,</span> <span class="s1">'oranges'</span><span class="p">,</span> <span class="s1">'pears'</span><span class="p">,</span> <span class="s1">'apricots'</span><span class="o">]</span>
<span class="n">change</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'pennies'</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'dimes'</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">'quarters'</span><span class="o">]</span>

<span class="c1"># this first kind of for-loop goes through an array</span>
<span class="k">for</span> <span class="n">number</span> <span class="k">in</span> <span class="n">the_count</span>
  <span class="nb">puts</span> <span class="s2">"This is count </span><span class="si">#{</span><span class="n">number</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1"># same as above, but using a block instead</span>
<span class="n">fruits</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">fruit</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"A fruit of type: </span><span class="si">#{</span><span class="n">fruit</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1"># also we can go through mixed arrays too</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">change</span>
  <span class="nb">puts</span> <span class="s2">"I got </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1"># we can also build arrays, first start with an empty one</span>
<span class="n">elements</span> <span class="o">=</span> <span class="o">[]</span> 

<span class="c1"># then use a range object to do 0 to 5 counts</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">5</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Adding </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2"> to the list."</span>
  <span class="c1"># push is a function that arrays understand</span>
  <span class="n">elements</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># now we can puts them out too</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">elements</span>
  <span class="nb">puts</span> <span class="s2">"Element was: </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex32.rb
<span class="go">This is count 1</span>
<span class="go">This is count 2</span>
<span class="go">This is count 3</span>
<span class="go">This is count 4</span>
<span class="go">This is count 5</span>
<span class="go">A fruit of type: apples</span>
<span class="go">A fruit of type: oranges</span>
<span class="go">A fruit of type: pears</span>
<span class="go">A fruit of type: apricots</span>
<span class="go">I got 1</span>
<span class="go">I got 'pennies'</span>
<span class="go">I got 2</span>
<span class="go">I got 'dimes'</span>
<span class="go">I got 3</span>
<span class="go">I got 'quarters'</span>
<span class="go">Adding 0 to the list.</span>
<span class="go">Adding 1 to the list.</span>
<span class="go">Adding 2 to the list.</span>
<span class="go">Adding 3 to the list.</span>
<span class="go">Adding 4 to the list.</span>
<span class="go">Adding 5 to the list.</span>
<span class="go">Element was: 0</span>
<span class="go">Element was: 1</span>
<span class="go">Element was: 2</span>
<span class="go">Element was: 3</span>
<span class="go">Element was: 4</span>
<span class="go">Element was: 5</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Take a look at how you used the range <tt class="docutils literal"><span class="pre">(0..5)</span></tt>. Look up the
<tt class="docutils literal"><span class="pre">Range</span></tt> class to understand it.</li>
<li>Could you have avoided that <tt class="docutils literal"><span class="pre">for-loop</span></tt> entirely on line 24 and just
assigned <tt class="docutils literal"><span class="pre">(0..5)</span></tt> directly to <tt class="docutils literal"><span class="pre">elements</span></tt>?</li>
<li>Find the Ruby documentation on arrays and read about them. What other
operations can you do to arrays besides <tt class="docutils literal"><span class="pre">push</span></tt>?</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex33">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-33-while-loops">
<h1>Exercise 33: While Loops<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-33-while-loops" title="Permalink to this headline">¶</a></h1>
<p>Now to totally blow your mind with a new loop, the <tt class="docutils literal"><span class="pre">while-loop</span></tt>. A
<tt class="docutils literal"><span class="pre">while-loop</span></tt> will keep executing the code block under it as long as a
boolean expression is <strong>True</strong>.</p>
<p>Wait, you have been keeping up with the terminology right? That if we
write a statement such as <tt class="docutils literal"><span class="pre">if</span> <span class="pre">items</span> <span class="pre">&gt;</span> <span class="pre">5</span></tt> or <tt class="docutils literal"><span class="pre">for</span> <span class="pre">fruit</span> <span class="pre">in</span> <span class="pre">fruits</span></tt> we
are starting a code block. Then we indent the lines that follow, which
are said to be within the block, until we reach an <tt class="docutils literal"><span class="pre">end</span></tt> statement,
which closes the block. This is all about structuring your programs so
that Ruby knows what you mean. If you do not get that idea then go back
and do some more work with <tt class="docutils literal"><span class="pre">if-statements</span></tt>, functions, and the
<tt class="docutils literal"><span class="pre">for-loop</span></tt> until you get it.</p>
<p>Later on we'll have some exercises that will train your brain to read
these structures, similar to how we burned boolean expressions into your
brain.</p>
<p>Back to <tt class="docutils literal"><span class="pre">while-loops</span></tt>. What they do is simply do a test like an
<tt class="docutils literal"><span class="pre">if-statement</span></tt>, but instead of running the code block once, they jump
back to the "top" where the <tt class="docutils literal"><span class="pre">while</span></tt> is, and repeat. It keeps doing
this until the expression is <strong>False</strong>.</p>
<p>Here's the problem with <tt class="docutils literal"><span class="pre">while-loops</span></tt>: sometimes they do not stop.
This is great if your intention is to just keep looping until the end of
the universe. Otherwise you almost always want your loops to end
eventually.</p>
<p>To avoid these problems, there's some rules to follow:</p>
<ol class="arabic simple">
<li>Make sure that you use <tt class="docutils literal"><span class="pre">while-loops</span></tt> sparingly. Usually a
<tt class="docutils literal"><span class="pre">for-loop</span></tt> is better.</li>
<li>Review your <tt class="docutils literal"><span class="pre">while</span></tt> statements and make sure that the thing you are
testing will become <strong>False</strong> at some point.</li>
<li>When in doubt, print out your test variable at the top and bottom of
the <tt class="docutils literal"><span class="pre">while-loop</span></tt> to see what it's doing.</li>
</ol>
<p>In this exercise, you will learn the <tt class="docutils literal"><span class="pre">while-loop</span></tt> by doing the above
three things:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="o">[]</span>

<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span>
  <span class="nb">puts</span> <span class="s2">"At the top i is </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">numbers</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

  <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="nb">puts</span> <span class="s2">"Numbers now: </span><span class="si">#{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"At the bottom i is </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"The numbers: "</span>

<span class="k">for</span> <span class="n">num</span> <span class="k">in</span> <span class="n">numbers</span>
  <span class="nb">puts</span> <span class="n">num</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex33.rb
<span class="go">At the top i is 0</span>
<span class="go">Numbers now:  [0]</span>
<span class="go">At the bottom i is 1</span>
<span class="go">At the top i is 1</span>
<span class="go">Numbers now:  [0, 1]</span>
<span class="go">At the bottom i is 2</span>
<span class="go">At the top i is 2</span>
<span class="go">Numbers now:  [0, 1, 2]</span>
<span class="go">At the bottom i is 3</span>
<span class="go">At the top i is 3</span>
<span class="go">Numbers now:  [0, 1, 2, 3]</span>
<span class="go">At the bottom i is 4</span>
<span class="go">At the top i is 4</span>
<span class="go">Numbers now:  [0, 1, 2, 3, 4]</span>
<span class="go">At the bottom i is 5</span>
<span class="go">At the top i is 5</span>
<span class="go">Numbers now:  [0, 1, 2, 3, 4, 5]</span>
<span class="go">At the bottom i is 6</span>
<span class="go">The numbers:</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Convert this <tt class="docutils literal"><span class="pre">while</span></tt> loop to a function that you can call, and
replace 6 in the test <tt class="docutils literal"><span class="pre">(i</span> <span class="pre">&lt;</span> <span class="pre">6)</span></tt> with a variable.</li>
<li>Now use this function to rewrite the script to try different numbers.</li>
<li>Add another variable to the function arguments that you can pass in
that lets you change the <tt class="docutils literal"><span class="pre">+</span> <span class="pre">1</span></tt> on line 8 so you can change how much
it increments by.</li>
<li>Rewrite the script again to use this function to see what effect that
has.</li>
<li>Now, write it to use <tt class="docutils literal"><span class="pre">for-loops</span></tt> and ranges instead. Do you need
the incrementor in the middle anymore? What happens if you do not get
rid of it?</li>
</ol>
<p>If at any time that you are doing this it goes crazy (it probably will),
just hold down CTRL and hit c (CTRL-c) and the program will abort.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex34">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-34-accessing-elements-of-arrays">
<h1>Exercise 34: Accessing Elements Of Arrays<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-34-accessing-elements-of-arrays" title="Permalink to this headline">¶</a></h1>
<p>Arrays are pretty useful, but unless you can get at the things in them
they aren't all that great. You can already go through the elements of a
list in order, but what if you want say, the 5th element? You need to
know how to access the elements of an array. Here's how you would access
the first element of an array:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">animals</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'bear'</span><span class="p">,</span> <span class="s1">'tiger'</span><span class="p">,</span> <span class="s1">'penguin'</span><span class="p">,</span> <span class="s1">'zebra'</span><span class="o">]</span>
<span class="n">bear</span> <span class="o">=</span> <span class="n">animals</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</pre></div>
</div>
<p>You take a list of
animals, and then you get the first one using <tt class="docutils literal"><span class="pre">0</span></tt>?! How does that
work? Because of the way math works, Ruby start its lists at 0 rather
than 1. It seems weird, but there's many advantages to this, even though
it is mostly arbitrary.</p>
<p>The best way to explain why is by showing you the difference between how
you use numbers and how programmers use numbers.</p>
<p>Imagine you are watching the four animals in our array above
(<tt class="docutils literal"><span class="pre">['bear',</span> <span class="pre">'tiger',</span> <span class="pre">'penguin',</span> <span class="pre">'zebra']</span></tt>) run in a race. They win in
the order we have them in this array. The race was really exciting
because the animals didn't eat each other and somehow managed to run a
race. Your friend, however, shows up late and wants to know who won.
Does your friend say, "Hey, who came in zeroth?" No, he says, "Hey, who
came in first?"</p>
<p>This is because the order of the animals is important. You can't have
the second animal without the first animal, and can't have the third
without the second. It's also impossible to have a "zeroth" animal since
zero means nothing. How can you have a nothing win a race? It just
doesn't make sense. We call these kinds of numbers "ordinal" numbers,
because they indicate an ordering of things.</p>
<p>Programmers, however, can't think this way because they can pick any
element out of a list at any point. To a programmer, the above list is
more like a deck of cards. If they want the tiger, they grab it. If they
want the zebra, they can take it too. This need to pull elements out of
lists at random means that they need a way to indicate elements
consistently by an address, or an "index", and the best way to do that
is to start the indices at 0. Trust me on this, the math is way easier
for these kinds of accesses. This kind of number is a "cardinal" number
and means you can pick at random, so there needs to be a 0 element.</p>
<p>So, how does this help you work with arrays? Simple, every time you say
to yourself, "I want the 3rd animal," you translate this "ordinal"
number to a "cardinal" number by subtracting 1. The "3rd" animal is at
index 2 and is the penguin. You have to do this because you have spent
your whole life using ordinal numbers, and now you have to think in
cardinal. Just subtract 1 and you will be good.</p>
<p>Remember: ordinal == ordered, 1st; cardinal == cards at random, 0.</p>
<p>Let's practice this. Take this list of animals, and follow the exercises
where I tell you to write down what animal you get for that ordinal or
cardinal number. Remember if I say "first", "second", etc. then I'm
using ordinal, so subtract 1. If I give you cardinal (0, 1, 2) then use
it directly.</p>
<div class="highlight-ruby"><div class="highlight"><pre> <span class="n">animals</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'bear'</span><span class="p">,</span> <span class="s1">'python'</span><span class="p">,</span> <span class="s1">'peacock'</span><span class="p">,</span>
<span class="s1">'kangaroo'</span><span class="p">,</span> <span class="s1">'whale'</span><span class="p">,</span> <span class="s1">'platypus'</span><span class="o">]</span>
</pre></div>
</div>
<p>The animal at 1. The 3rd animal. The 1st animal. The animal at 3. The
5th animal. The animal at 2. The 6th animal. The animal at 4.</p>
<p>For each of these, write out a full sentence of the form: "The 1st
animal is at 0 and is a bear." Then say it backwards, "The animal at 0
is the 1st animal and is a bear."</p>
<p>Use your Ruby to check your answers.</p>
<p><strong>Hint:</strong> Ruby has also a few convenience methods for accessing
particular elements in an array: <tt class="docutils literal"><span class="pre">animals.first</span></tt> and <tt class="docutils literal"><span class="pre">animals.last</span></tt></p>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Read about ordinal and cardinal numbers online.</li>
<li>With what you know of the difference between these types of numbers,
can you explain why this really is 2011? (Hint, you can't pick years
at random.)</li>
<li>Write some more arrays and work out similar indexes until you can
translate them.</li>
<li>Use Ruby to check your answers to this as well.</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Programmers will tell you to read this guy named
"Dijkstra" on this subject. I recommend you avoid his writings on
this unless you enjoy being yelled at by someone who stopped
programming at the same time programming started.</p>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex35">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-35-branches-and-functions">
<h1>Exercise 35: Branches and Functions<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-35-branches-and-functions" title="Permalink to this headline">¶</a></h1>
<p>You have learned to do <tt class="docutils literal"><span class="pre">if-statements</span></tt>, functions, and arrays. Now
it's time to bend your mind. Type this in, and see if you can figure out
what it's doing.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">prompt</span><span class="p">()</span>
  <span class="nb">print</span> <span class="s2">"&gt; "</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">gold_room</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"This room is full of gold.  How much do you take?"</span>

  <span class="n">prompt</span><span class="p">;</span> <span class="n">next_move</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span> 
  <span class="k">if</span> <span class="n">next_move</span><span class="o">.</span><span class="n">include?</span> <span class="s2">"0"</span> <span class="ow">or</span> <span class="n">next_move</span><span class="o">.</span><span class="n">include?</span> <span class="s2">"1"</span>
    <span class="n">how_much</span> <span class="o">=</span> <span class="n">next_move</span><span class="o">.</span><span class="n">to_i</span><span class="p">()</span>
  <span class="k">else</span>
    <span class="n">dead</span><span class="p">(</span><span class="s2">"Man, learn to type a number."</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">if</span> <span class="n">how_much</span> <span class="o">&lt;</span> <span class="mi">50</span>
    <span class="nb">puts</span> <span class="s2">"Nice, you're not greedy, you win!"</span>
    <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="n">dead</span><span class="p">(</span><span class="s2">"You greedy bastard!"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>


<span class="k">def</span> <span class="nf">bear_room</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"There is a bear here."</span>
  <span class="nb">puts</span> <span class="s2">"The bear has a bunch of honey."</span>
  <span class="nb">puts</span> <span class="s2">"The fat bear is in front of another door."</span>
  <span class="nb">puts</span> <span class="s2">"How are you going to move the bear?"</span>
  <span class="n">bear_moved</span> <span class="o">=</span> <span class="kp">false</span>

  <span class="k">while</span> <span class="kp">true</span>
    <span class="n">prompt</span><span class="p">;</span> <span class="n">next_move</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

    <span class="k">if</span> <span class="n">next_move</span> <span class="o">==</span> <span class="s2">"take honey"</span>
      <span class="n">dead</span><span class="p">(</span><span class="s2">"The bear looks at you then slaps your face off."</span><span class="p">)</span>
    <span class="k">elsif</span> <span class="n">next_move</span> <span class="o">==</span> <span class="s2">"taunt bear"</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bear_moved</span>
      <span class="nb">puts</span> <span class="s2">"The bear has moved from the door. You can go through it now."</span>
      <span class="n">bear_moved</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="k">elsif</span> <span class="n">next_move</span> <span class="o">==</span> <span class="s2">"taunt bear"</span> <span class="ow">and</span> <span class="n">bear_moved</span>
      <span class="n">dead</span><span class="p">(</span><span class="s2">"The bear gets pissed off and chews your leg off."</span><span class="p">)</span>
    <span class="k">elsif</span> <span class="n">next_move</span> <span class="o">==</span> <span class="s2">"open door"</span> <span class="ow">and</span> <span class="n">bear_moved</span>
      <span class="n">gold_room</span><span class="p">()</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"I got no idea what that means."</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">cthulhu_room</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"Here you see the great evil Cthulhu."</span>
  <span class="nb">puts</span> <span class="s2">"He, it, whatever stares at you and you go insane."</span>
  <span class="nb">puts</span> <span class="s2">"Do you flee for your life or eat your head?"</span>

  <span class="n">prompt</span><span class="p">;</span> <span class="n">next_move</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

  <span class="k">if</span> <span class="n">next_move</span><span class="o">.</span><span class="n">include?</span> <span class="s2">"flee"</span>
    <span class="n">start</span><span class="p">()</span>
  <span class="k">elsif</span> <span class="n">next_move</span><span class="o">.</span><span class="n">include?</span> <span class="s2">"head"</span>
    <span class="n">dead</span><span class="p">(</span><span class="s2">"Well that was tasty!"</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="n">cthulhu_room</span><span class="p">()</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">dead</span><span class="p">(</span><span class="n">why</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">why</span><span class="si">}</span><span class="s2">  Good job!"</span>
  <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">start</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"You are in a dark room."</span>
  <span class="nb">puts</span> <span class="s2">"There is a door to your right and left."</span>
  <span class="nb">puts</span> <span class="s2">"Which one do you take?"</span>

  <span class="n">prompt</span><span class="p">;</span> <span class="n">next_move</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

  <span class="k">if</span> <span class="n">next_move</span> <span class="o">==</span> <span class="s2">"left"</span>
    <span class="n">bear_room</span><span class="p">()</span>
  <span class="k">elsif</span> <span class="n">next_move</span> <span class="o">==</span> <span class="s2">"right"</span>
    <span class="n">cthulhu_room</span><span class="p">()</span>
  <span class="k">else</span>
    <span class="n">dead</span><span class="p">(</span><span class="s2">"You stumble around the room until you starve."</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">start</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>Here's me playing the game:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex35.rb
<span class="go">You are in a dark room.</span>
<span class="go">There is a door to your right and left.</span>
<span class="go">Which one do you take?</span>
<span class="gp">&gt;</span> left
<span class="go">There is a bear here.</span>
<span class="go">The bear has a bunch of honey.</span>
<span class="go">The fat bear is in front of another door.</span>
<span class="go">How are you going to move the bear?</span>
<span class="gp">&gt;</span> taunt bear
<span class="go">The bear has moved from the door. You can go through it now.</span>
<span class="gp">&gt;</span> open door
<span class="go">This room is full of gold.  How much do you take?</span>
<span class="gp">&gt;</span> asf
<span class="go">Man, learn to type a number. Good job!</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Draw a map of the game and how you flow through it.</li>
<li>Fix all of your mistakes, including spelling mistakes.</li>
<li>Write comments for the functions you do not understand. Remember
<strong>RDoc</strong> comments?</li>
<li>Add more to the game. What can you do to both simplify and expand it.</li>
<li>The <tt class="docutils literal"><span class="pre">gold_room</span></tt> has a weird way of getting you to type a number.
What are all the bugs in this way of doing it? Can you make it better
than just checking if "1" or "0" are in the number? Look at how
<tt class="docutils literal"><span class="pre">to_i()</span></tt> works for clues.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex36">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-36-designing-and-debugging">
<h1>Exercise 36: Designing and Debugging<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-36-designing-and-debugging" title="Permalink to this headline">¶</a></h1>
<p>Now that you know <tt class="docutils literal"><span class="pre">if-statements</span></tt>, I'm going to give you some rules
for <tt class="docutils literal"><span class="pre">for-loops</span></tt> and <tt class="docutils literal"><span class="pre">while-loops</span></tt> that will keep you out of trouble.
I'm also going to give you some tips on debugging so that you can figure
out problems with your program. Finally, you are going to design a
similar little game as in the last exercise but with a slight twist.</p>
<div class="section" id="rules-for-if-statements">
<h2>Rules For If-Statements<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#rules-for-if-statements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Every <tt class="docutils literal"><span class="pre">if-statement</span></tt> must have an <tt class="docutils literal"><span class="pre">else</span></tt>.</li>
<li>If this <tt class="docutils literal"><span class="pre">else</span></tt> should never be run because it doesn't make sense,
then you must use a <tt class="docutils literal"><span class="pre">die</span></tt> function in the <tt class="docutils literal"><span class="pre">else</span></tt> that prints out
an error message and dies, just like we did in the last exercise.
This will find many errors.</li>
<li>Never nest <tt class="docutils literal"><span class="pre">if-statements</span></tt> more than 2 deep and always try to do
them 1 deep. This means if you put an <tt class="docutils literal"><span class="pre">if</span></tt> in an <tt class="docutils literal"><span class="pre">if</span></tt> then you
should be looking to move that second <tt class="docutils literal"><span class="pre">if</span></tt> into another function.</li>
<li>Treat <tt class="docutils literal"><span class="pre">if-statements</span></tt> like paragraphs, where each
<tt class="docutils literal"><span class="pre">if</span></tt>,``elsif``,``else`` grouping is like a set of sentences. Put
blank lines before and after.</li>
<li>Your boolean tests should be simple. If they are complex, move their
calculations to variables earlier in your function and use a good
name for the variable.</li>
</ol>
<p>If you follow these simple rules, you will start writing better code
than most programmers. Go back to the last exercise and see if I
followed all of these rules. If not, fix it.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Never be a slave to the rules in real life. For
training purposes you need to follow these rules to make your mind
strong, but in real life sometimes these rules are just stupid. If
you think a rule is stupid, try not using it.</p>
</div>
</div>
<div class="section" id="rules-for-loops">
<h2>Rules For Loops<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#rules-for-loops" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Use a <tt class="docutils literal"><span class="pre">while-loop</span></tt> only to loop forever, and that means probably
never. This only applies to Ruby, other languages are different.</li>
<li>Use a <tt class="docutils literal"><span class="pre">for-loop</span></tt> for all other kinds of looping, especially if
there is a fixed or limited number of things to loop over.</li>
</ol>
</div>
<div class="section" id="tips-for-debugging">
<h2>Tips For Debugging<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#tips-for-debugging" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Do not use a "debugger". A debugger is like doing a full-body scan on
a sick person. You do not get any specific useful information, and
you find a whole lot of information that doesn't help and is just
confusing.</li>
<li>The best way to debug a program is to use <tt class="docutils literal"><span class="pre">puts</span></tt> or <tt class="docutils literal"><span class="pre">p</span></tt> to print
out the values of variables at points in the program to see where
they go wrong.</li>
<li>Make sure parts of your programs work as you work on them. Do not
write massive files of code before you try to run them. Code a
little, run a little, fix a little.</li>
</ol>
</div>
<div class="section" id="homework">
<h2>Homework<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#homework" title="Permalink to this headline">¶</a></h2>
<p>Now write a similar game to the one that I created in the last exercise.
It can be any kind of game you want in the same flavor. Spend a week on
it making it as interesting as possible. For extra credit, use arrays,
functions, and modules (remember those from Ex. 13?) as much as
possible, and find as many new pieces of Ruby as you can to make the
game work.</p>
<p>There is one catch though, write up your idea for the game first. Before
you start coding you must write up a map for your game. Create the
rooms, monsters, and traps that the player must go through on paper
before you code.</p>
<p>Once you have your map, try to code it up. If you find problems with the
map then adjust it and make the code match.</p>
<p>One final word of advice: Every programmer becomes paralyzed by
irrational fear starting a new large project. They then use
procrastination to avoid confronting this fear and end up not getting
their program working or even started. I do this. Everyone does this.
The best way to avoid this is to make a list of things you should do,
and then do them one at a time.</p>
<p>Just start doing it, do a small version, make it bigger, keep a list of
things to do, and do them.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex37">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-37-symbol-review">
<h1>Exercise 37: Symbol Review<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-37-symbol-review" title="Permalink to this headline">¶</a></h1>
<p>It's time to review the symbols and Ruby words you know, and to try to
pick up a few more for the next few lessons. What I've done here is
written out all the Ruby symbols and keywords that are important to
know.</p>
<p>In this lesson take each keyword, and first try to write out what it
does from memory. Next, search online for it and see what it really
does. It may be hard because some of these are going to be impossible to
search for, but keep trying.</p>
<p>If you get one of these wrong from memory, write up an index card with
the correct definition and try to "correct" your memory. If you just
didn't know about it, write it down, and save it for later.</p>
<p>Finally, use each of these in a small Ruby program, or as many as you
can get done. The key here is to find out what the symbol does, make
sure you got it right, correct it if you do not, then use it to lock it
in.</p>
<div class="section" id="keywords">
<h2>Keywords<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#keywords" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">alias</span></tt></li>
<li><tt class="docutils literal"><span class="pre">and</span></tt></li>
<li><tt class="docutils literal"><span class="pre">BEGIN</span></tt></li>
<li><tt class="docutils literal"><span class="pre">begin</span></tt></li>
<li><tt class="docutils literal"><span class="pre">break</span></tt></li>
<li><tt class="docutils literal"><span class="pre">case</span></tt></li>
<li><tt class="docutils literal"><span class="pre">class</span></tt></li>
<li><tt class="docutils literal"><span class="pre">def</span></tt></li>
<li><tt class="docutils literal"><span class="pre">defined?</span></tt></li>
<li><tt class="docutils literal"><span class="pre">do</span></tt></li>
<li><tt class="docutils literal"><span class="pre">else</span></tt></li>
<li><tt class="docutils literal"><span class="pre">elsif</span></tt></li>
<li><tt class="docutils literal"><span class="pre">END</span></tt></li>
<li><tt class="docutils literal"><span class="pre">end</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ensure</span></tt></li>
<li><tt class="docutils literal"><span class="pre">false</span></tt></li>
<li><tt class="docutils literal"><span class="pre">for</span></tt></li>
<li><tt class="docutils literal"><span class="pre">if</span></tt></li>
<li><tt class="docutils literal"><span class="pre">in</span></tt></li>
<li><tt class="docutils literal"><span class="pre">module</span></tt></li>
<li><tt class="docutils literal"><span class="pre">next</span></tt></li>
<li><tt class="docutils literal"><span class="pre">nil</span></tt></li>
<li><tt class="docutils literal"><span class="pre">not</span></tt></li>
<li><tt class="docutils literal"><span class="pre">or</span></tt></li>
<li><tt class="docutils literal"><span class="pre">redo</span></tt></li>
<li><tt class="docutils literal"><span class="pre">rescue</span></tt></li>
<li><tt class="docutils literal"><span class="pre">retry</span></tt></li>
<li><tt class="docutils literal"><span class="pre">return</span></tt></li>
<li><tt class="docutils literal"><span class="pre">self</span></tt></li>
<li><tt class="docutils literal"><span class="pre">super</span></tt></li>
<li><tt class="docutils literal"><span class="pre">then</span></tt></li>
<li><tt class="docutils literal"><span class="pre">true</span></tt></li>
<li><tt class="docutils literal"><span class="pre">undef</span></tt></li>
<li><tt class="docutils literal"><span class="pre">unless</span></tt></li>
<li><tt class="docutils literal"><span class="pre">until</span></tt></li>
<li><tt class="docutils literal"><span class="pre">when</span></tt></li>
<li><tt class="docutils literal"><span class="pre">while</span></tt></li>
<li><tt class="docutils literal"><span class="pre">yield</span></tt></li>
</ul>
</div>
<div class="section" id="data-types">
<h2>Data Types<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#data-types" title="Permalink to this headline">¶</a></h2>
<p>For data types, write out what makes up each one. For example, with
strings write out how you create a string. For numbers write out a few
numbers.</p>
<ul class="simple">
<li><strong>true</strong></li>
<li><strong>false</strong></li>
<li><strong>nil</strong></li>
<li><tt class="docutils literal"><span class="pre">constants</span></tt></li>
<li><tt class="docutils literal"><span class="pre">strings</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numbers</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ranges</span></tt></li>
<li><tt class="docutils literal"><span class="pre">arrays</span></tt></li>
<li><tt class="docutils literal"><span class="pre">hashes</span></tt></li>
</ul>
<p>String Escapes Sequences For string escape sequences, use them in
strings to make sure they do what you think they do.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">\\</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\"</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\a</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\b</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\f</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\n</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\r</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\t</span></tt></li>
<li><tt class="docutils literal"><span class="pre">\v</span></tt></li>
</ul>
<p>Operators Some of these may be unfamiliar to you, but look them up
anyway. Find out what they do, and if you still can't figure it out,
save it for later.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">::</span></tt></li>
<li><tt class="docutils literal"><span class="pre">[]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">**</span></tt></li>
<li><tt class="docutils literal"><span class="pre">-(unary)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">+(unary)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">!</span></tt></li>
<li><tt class="docutils literal"><span class="pre">~</span></tt></li>
<li><tt class="docutils literal"><span class="pre">*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">%</span></tt></li>
<li><tt class="docutils literal"><span class="pre">+</span></tt></li>
<li><tt class="docutils literal"><span class="pre">-</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;&lt;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&gt;&gt;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&amp;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">|</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&gt;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&gt;=</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;=</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;=&gt;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">==</span></tt></li>
<li><tt class="docutils literal"><span class="pre">===</span></tt></li>
<li><tt class="docutils literal"><span class="pre">!=</span></tt></li>
<li><tt class="docutils literal"><span class="pre">=~</span></tt></li>
<li><tt class="docutils literal"><span class="pre">!~</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&amp;&amp;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">||</span></tt></li>
<li><tt class="docutils literal"><span class="pre">..</span></tt></li>
<li><tt class="docutils literal"><span class="pre">...</span></tt></li>
</ul>
<p>Spend about a week on this, but if you finish faster that's great. The
point is to try to get coverage on all these symbols and make sure they
are locked in your head. What's also important is to find out what you
do not know so you can fix it later.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex38">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-38-reading-code">
<h1>Exercise 38: Reading Code<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-38-reading-code" title="Permalink to this headline">¶</a></h1>
<p>Now go find some Ruby code to read. You should be reading any Ruby code
you can and trying to steal ideas that you find. You actually should
have enough knowledge to be able to read, but maybe not understand what
the code does. What I'm going to teach you in this lesson is how to
apply things you have learned to understand other people's code.</p>
<p>First, print out the code you want to understand. Yes, print it out,
because your eyes and brain are more used to reading paper than computer
screens. Make sure you only print a few pages at a time.</p>
<p>Second, go through your printout and take notes of the following:</p>
<ol class="arabic simple">
<li>Functions and what they do.</li>
<li>Where each variable is first given a value.</li>
<li>Any variables with the same names in different parts of the program.
These may be trouble later.</li>
<li>Any <tt class="docutils literal"><span class="pre">if-statements</span></tt> without <tt class="docutils literal"><span class="pre">else</span></tt> clauses. Are they right?</li>
<li>Any <tt class="docutils literal"><span class="pre">while-loops</span></tt> that might not end.</li>
<li>Finally, any parts of code that you can't understand for whatever
reason.</li>
</ol>
<p>Third, once you have all of this marked up, try to explain it to
yourself by writing comments as you go. Explain the functions, how they
are used, what variables are involved, anything you can to figure this
code out.</p>
<p>Lastly, on all of the difficult parts, trace the values of each variable
line by line, function by function. In fact, do another printout and
write in the margin the value of each variable that you need to "trace".</p>
<p>Once you have a good idea of what the code does, go back to the computer
and read it again to see if you find new things. Keep finding more code
and doing this until you do not need the printouts anymore.</p>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Find out what a "flow chart" is and write a few.</li>
<li>If you find errors in code you are reading, try to fix them and send
the author your changes.</li>
<li>Another technique for when you are not using paper is to put <tt class="docutils literal"><span class="pre">#</span></tt>
comments with your notes in the code. Sometimes, these could become
the actual comments to help the next person.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex39">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-39-doing-things-to-arrays">
<h1>Exercise 39: Doing Things To Arrays<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-39-doing-things-to-arrays" title="Permalink to this headline">¶</a></h1>
<p>You have learned about arrays. When you learned about <tt class="docutils literal"><span class="pre">while-loops</span></tt>
you "pushed" numbers onto the end of an array and printed them out.
There was also extra credit where you were supposed to find all the
other things you can do to arrays in the Ruby documentation. That was a
while back, so go find in the book where you did that and review if you
do not know what I'm talking about.</p>
<p>Found it? Remember it? Good. When you did this you had a list, and you
"called" the function <tt class="docutils literal"><span class="pre">push</span></tt> on it. However, you may not really
understand what's going on so let's see what we can do to lists.</p>
<p>When you type Ruby code that reads <tt class="docutils literal"><span class="pre">mystuff.push('hello')</span></tt> you are
actually setting off a chain of events inside Ruby to cause something to
happen to the <tt class="docutils literal"><span class="pre">mystuff</span></tt> array. Here's how it works:</p>
<ol class="arabic simple">
<li>Ruby sees you mentioned <tt class="docutils literal"><span class="pre">mystuff</span></tt> and looks up that variable. It
might have to look backwards to see if you created with <tt class="docutils literal"><span class="pre">=</span></tt>, look
and see if it is a function argument, or maybe it's a global
variable. Either way it has to find the <tt class="docutils literal"><span class="pre">mystuff</span></tt> array first.</li>
<li>Once it finds <tt class="docutils literal"><span class="pre">mystuff</span></tt> it then hits the <tt class="docutils literal"><span class="pre">.</span></tt> (period) operator
and starts to look at variables that are a part of <tt class="docutils literal"><span class="pre">mystuff</span></tt>. Since
<tt class="docutils literal"><span class="pre">mystuff</span></tt> is an array, it knows that <tt class="docutils literal"><span class="pre">mystuff</span></tt> has a bunch of
functions.</li>
<li>It then hits <tt class="docutils literal"><span class="pre">push</span></tt> and compares the name "push" to all the ones
that <tt class="docutils literal"><span class="pre">mystuff</span></tt> says it responds to. If <tt class="docutils literal"><span class="pre">push</span></tt> is in there (it is)
then it grabs that to use.</li>
<li>Next Ruby sees the <tt class="docutils literal"><span class="pre">(</span></tt> (parenthesis) and realizes, "Oh hey, this
should be a function." At this point it calls (aka runs, executes)
the function.</li>
</ol>
<p>That might be a lot to take in, but we're going to spend a few exercises
getting this concept firm in your brain. To kick things off, here's an
exercise that mixes strings and lists for all kinds of fun.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">ten_things</span> <span class="o">=</span> <span class="s2">"Apples Oranges Crows Telephone Light Sugar"</span>

<span class="nb">puts</span> <span class="s2">"Wait there's not 10 things in that list, let's fix that."</span>

<span class="n">stuff</span> <span class="o">=</span> <span class="n">ten_things</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span>
<span class="n">more_stuff</span> <span class="o">=</span> <span class="sx">%w(Day Night Song Frisbee Corn Banana Girl Boy)</span>

<span class="k">while</span> <span class="n">stuff</span><span class="o">.</span><span class="n">length</span> <span class="o">!=</span> <span class="mi">10</span>
  <span class="n">next_one</span> <span class="o">=</span> <span class="n">more_stuff</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"Adding: </span><span class="si">#{</span><span class="n">next_one</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">stuff</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">next_one</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"There's </span><span class="si">#{</span><span class="n">stuff</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2"> items now."</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"There we go: </span><span class="si">#{</span><span class="n">stuff</span><span class="si">}</span><span class="s2">"</span>

<span class="nb">puts</span> <span class="s2">"Let's do some things with stuff."</span>

<span class="nb">puts</span> <span class="n">stuff</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
<span class="nb">puts</span> <span class="n">stuff</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span> <span class="c1"># whoa! fancy</span>
<span class="nb">puts</span> <span class="n">stuff</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="nb">puts</span> <span class="n">stuff</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span> <span class="c1"># what? cool!</span>
<span class="nb">puts</span> <span class="n">stuff</span><span class="o">.</span><span class="n">values_at</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">'#'</span><span class="p">)</span> <span class="c1"># super stellar!</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex39.rb
<span class="go">Wait there's not 10 things in that list, let's fix that.</span>
<span class="go">Adding: Boy</span>
<span class="go">There's 7 items now.</span>
<span class="go">Adding: Girl</span>
<span class="go">There's 8 items now.</span>
<span class="go">Adding: Banana</span>
<span class="go">There's 9 items now.</span>
<span class="go">Adding: Corn</span>
<span class="go">There's 10 items now.</span>
<span class="go">There we go: ["Apples", "Oranges", "Crows", "Telephone", "Light", "Sugar", "Boy", "Girl", "Banana", "Corn"]</span>
<span class="go">Let's do some things with stuff.</span>
<span class="go">Oranges</span>
<span class="go">Corn</span>
<span class="go">Corn</span>
<span class="go">Apples Oranges Crows Telephone Light Sugar Boy Girl Banana</span>
<span class="go">Telephone#Sugar</span>
<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go read about "Object Oriented Programming" online. Confused? Yeah I
was too. Do not worry. You will learn enough to be dangerous, and you
can slowly learn more later. Read up on what a "class" is in Ruby.
<em>Do not read about how other languages use the word "class".</em> That
will only mess you up.</li>
<li>What's the relationship between <tt class="docutils literal"><span class="pre">something.methods</span></tt> and the "class"
of <tt class="docutils literal"><span class="pre">something</span></tt>?</li>
<li>If you do not have any idea what I'm talking about do not worry.
Programmers like to feel smart so they invented Object Oriented
Programming, named it OOP, and then used it way too much. If you
think that's hard, you should try to use "functional programming".</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex40">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-40-dictionaries-oh-lovely-dictionaries">
<h1>Exercise 40: Dictionaries, Oh Lovely Dictionaries<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-40-dictionaries-oh-lovely-dictionaries" title="Permalink to this headline">¶</a></h1>
<p>Now I have to hurt you with another container you can use, because once
you learn this container a massive world of ultra-cool will be yours. It
is the most useful container ever: the hash.</p>
<p>Ruby calls them "hashes", other languages call them, "dictionaries". I
tend to use both names, but it doesn't matter. What does matter is what
they do when compared to arrays. You see, an array lets you do this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">015</span> <span class="o">&gt;</span> <span class="n">things</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'a'</span><span class="p">,</span><span class="s1">'b'</span><span class="p">,</span><span class="s1">'c'</span><span class="p">,</span><span class="s1">'d'</span><span class="o">]</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="o">]</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">016</span> <span class="o">&gt;</span> <span class="nb">print</span> <span class="n">things</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
<span class="n">b</span><span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">017</span> <span class="o">&gt;</span> <span class="n">things</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'z'</span>
<span class="o">=&gt;</span> <span class="s2">"z"</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">01</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="nb">print</span> <span class="n">things</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
<span class="n">z</span><span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">01</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="nb">print</span> <span class="n">things</span>
<span class="o">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"z"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">020</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>You can use numbers to "index" into an array, meaning you can use
numbers to find out what's in arrays. You should know this by now, but
what a hash does is let you use <em>anything</em>, not just numbers. Yes, a
hash associates one thing to another, no matter what it is. Take a look:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="n">stuff</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">"Rob"</span><span class="p">,</span> <span class="ss">:age</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>
<span class="ss">:height</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="o">*</span><span class="mi">12</span><span class="o">+</span><span class="mi">10</span><span class="p">}</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">"Rob"</span><span class="p">,</span> <span class="ss">:age</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>
<span class="ss">:height</span> <span class="o">=&gt;</span> <span class="mi">70</span><span class="p">}</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">stuff</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span>
<span class="no">Rob</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">stuff</span><span class="o">[</span><span class="ss">:age</span><span class="o">]</span>
<span class="mi">30</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">stuff</span><span class="o">[</span><span class="ss">:height</span><span class="o">]</span>
<span class="mi">70</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">stuff</span><span class="o">[</span><span class="ss">:city</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"New York"</span>
<span class="o">=&gt;</span> <span class="s2">"New York"</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">stuff</span><span class="o">[</span><span class="ss">:city</span><span class="o">]</span>
<span class="no">New</span> <span class="no">York</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>You will see that instead of just numbers we're using symbols, which are
just lightweight strings (think name tags) in Ruby, to say what we want
from the <tt class="docutils literal"><span class="pre">stuff</span></tt> hash. We can also put new things into the hash with
symbols. It doesn't have to be symbols though, we can also do this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">stuff</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"Wow"</span>
<span class="o">=&gt;</span> <span class="s2">"Wow"</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">stuff</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"Neato"</span>
<span class="o">=&gt;</span> <span class="s2">"Neato"</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">006</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">stuff</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
<span class="no">Wow</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">007</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">stuff</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
<span class="no">Neato</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">00</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="nb">puts</span> <span class="n">stuff</span>
<span class="p">{</span><span class="ss">:name</span><span class="o">=&gt;</span><span class="s2">"Rob"</span><span class="p">,</span> <span class="ss">:age</span><span class="o">=&gt;</span><span class="mi">30</span><span class="p">,</span> <span class="ss">:height</span><span class="o">=&gt;</span><span class="mi">70</span><span class="p">,</span> <span class="ss">:city</span><span class="o">=&gt;</span><span class="s2">"New York"</span><span class="p">,</span>
<span class="mi">1</span><span class="o">=&gt;</span><span class="s2">"Wow"</span><span class="p">,</span> <span class="mi">2</span><span class="o">=&gt;</span><span class="s2">"Neato"</span><span class="p">}</span> <span class="o">=&gt;</span> <span class="kp">nil</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>In this one I just used numbers. I could use anything. Well almost but
just pretend you can use anything for now.</p>
<p>Of course, a hash that you can only put things in is pretty stupid, so
here's how you delete things, with the <tt class="docutils literal"><span class="pre">delete</span></tt> function:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">00</span><span class="mi">9</span> <span class="o">&gt;</span> <span class="n">stuff</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="ss">:city</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"New York"</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">010</span> <span class="o">&gt;</span> <span class="n">stuff</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"Wow"</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">011</span> <span class="o">&gt;</span> <span class="n">stuff</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"Neato"</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">012</span> <span class="o">&gt;</span> <span class="n">stuff</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:name</span><span class="o">=&gt;</span><span class="s2">"Rob"</span><span class="p">,</span> <span class="ss">:age</span><span class="o">=&gt;</span><span class="mi">30</span><span class="p">,</span> <span class="ss">:height</span><span class="o">=&gt;</span><span class="mi">70</span><span class="p">}</span>
<span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">p180</span> <span class="p">:</span><span class="mo">013</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>We'll now do an exercise that you must study <em>very</em> carefully. I want
you to type this exercise in and try to understand what's going on. It
is a very interesting exercise that will hopefully make a big light turn
on in your head very soon.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">cities</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'CA'</span> <span class="o">=&gt;</span> <span class="s1">'San Francisco'</span><span class="p">,</span> 
  <span class="s1">'MI'</span> <span class="o">=&gt;</span> <span class="s1">'Detroit'</span><span class="p">,</span>
  <span class="s1">'FL'</span> <span class="o">=&gt;</span> <span class="s1">'Jacksonville'</span><span class="p">}</span>

<span class="n">cities</span><span class="o">[</span><span class="s1">'NY'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'New York'</span>
<span class="n">cities</span><span class="o">[</span><span class="s1">'OR'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'Portland'</span>

<span class="k">def</span> <span class="nf">find_city</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">map</span><span class="o">.</span><span class="n">include?</span> <span class="n">state</span>
    <span class="k">return</span> <span class="n">map</span><span class="o">[</span><span class="n">state</span><span class="o">]</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="s2">"Not found."</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># ok pay attention!</span>
<span class="n">cities</span><span class="o">[</span><span class="ss">:find</span><span class="o">]</span> <span class="o">=</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:find_city</span><span class="p">)</span>

<span class="k">while</span> <span class="kp">true</span>
  <span class="nb">print</span> <span class="s2">"State? (ENTER to quit) "</span>
  <span class="n">state</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

  <span class="k">break</span> <span class="k">if</span> <span class="n">state</span><span class="o">.</span><span class="n">empty?</span>

  <span class="c1"># this line is the most important ever! study!</span>
  <span class="nb">puts</span> <span class="n">cities</span><span class="o">[</span><span class="ss">:find</span><span class="o">].</span><span class="n">call</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex40.rb
<span class="go">State? (ENTER to quit) &gt; CA</span>
<span class="go">San Francisco</span>
<span class="go">State? (ENTER to quit) &gt; FL</span>
<span class="go">Jacksonville</span>
<span class="go">State? (ENTER to quit) &gt; O</span>
<span class="go">Not found.</span>
<span class="go">State? (ENTER to quit) &gt; OR</span>
<span class="go">Portland</span>
<span class="go">State? (ENTER to quit) &gt; VT</span>
<span class="go">Not found.</span>
<span class="go">State? (ENTER to quit) &gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go find the Ruby documentation for hashes and try to do even more
things to them.</li>
<li>Find out what you can't do with hashes.</li>
<li>Try doing a <tt class="docutils literal"><span class="pre">for-loop</span></tt> over them, and then try the <tt class="docutils literal"><span class="pre">each</span></tt> method
of iterating through a hash.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex41">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-41-gothons-from-planet-percal-25">
<h1>Exercise 41: Gothons From Planet Percal #25<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-41-gothons-from-planet-percal-25" title="Permalink to this headline">¶</a></h1>
<p>Did you figure out the secret of the method in the hash from the last
exercise? Can you explain it to yourself? I'll explain it and you can
compare your explanation with mine. Here are the lines of code we are
talking about:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">cities</span><span class="o">[</span><span class="ss">:find</span><span class="o">]</span> <span class="o">=</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:find_city</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">cities</span><span class="o">[</span><span class="ss">:find</span><span class="o">].</span><span class="n">call</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
<p>Remember that code can be stored in variables too. In order to store a
block of code in a variable, we create something called a <tt class="docutils literal"><span class="pre">proc</span></tt>,
which is short for procedure. In this code, first we are calling Ruby's
built-in method called <tt class="docutils literal"><span class="pre">method</span></tt>, which returns a proc version of the
<tt class="docutils literal"><span class="pre">find_city</span></tt> method, which we then store in the hash <tt class="docutils literal"><span class="pre">cities</span></tt> with
the key <tt class="docutils literal"><span class="pre">:find</span></tt>. This is the same as all the others where we set
states to some cities, but in this case it's actually the proc.</p>
<p>Alright, so once we know that <tt class="docutils literal"><span class="pre">find_city</span></tt> is in the hash at <tt class="docutils literal"><span class="pre">:find</span></tt>,
that means we can do work with it. The 2nd line of code (used later in
the previous exercise) can be broken down like this:</p>
<ol class="arabic simple">
<li>Ruby reads <tt class="docutils literal"><span class="pre">cities</span></tt> and finds that variable, it's a <tt class="docutils literal"><span class="pre">hash</span></tt>.</li>
<li>Then there's <tt class="docutils literal"><span class="pre">[:find]</span></tt> which will index into the cities hash and
pull out whatever is at <tt class="docutils literal"><span class="pre">:find</span></tt>.</li>
<li>What is at <tt class="docutils literal"><span class="pre">[:find]</span></tt> is our proc <tt class="docutils literal"><span class="pre">find_city</span></tt> so Ruby then knows
it's got a proc, and when it hits <tt class="docutils literal"><span class="pre">.call</span></tt> it calls the proc code.</li>
<li>The parameters <tt class="docutils literal"><span class="pre">cities</span></tt>, <tt class="docutils literal"><span class="pre">state</span></tt> are passed to the proc
<tt class="docutils literal"><span class="pre">find_city</span></tt>, and it runs because it's called.</li>
<li><tt class="docutils literal"><span class="pre">find_city</span></tt> then tries to look up <tt class="docutils literal"><span class="pre">states</span></tt> inside <tt class="docutils literal"><span class="pre">cities</span></tt>, and
returns what it finds or a message saying it didn't find anything.</li>
<li>Ruby takes what <tt class="docutils literal"><span class="pre">find_city</span></tt> returned, and prints it out using the
<tt class="docutils literal"><span class="pre">puts</span></tt> method we've been using all along.</li>
</ol>
<p>Here's a trick. Sometimes these things read better in English if you
read the code backwards. This is how I would do it for that same line
(remember backwards):</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">state</span></tt> and <tt class="docutils literal"><span class="pre">city</span></tt> are...</li>
<li>passed as parameters to...</li>
<li>a proc at...</li>
<li><tt class="docutils literal"><span class="pre">:find</span></tt> inside...</li>
<li>the hash <tt class="docutils literal"><span class="pre">cities</span></tt>...</li>
<li>and finally printed on the screen</li>
</ol>
<p>Here's another way to read it, this time "inside-out".</p>
<ol class="arabic simple">
<li>Find the center item of the expression, in this case <tt class="docutils literal"><span class="pre">[:find]</span></tt>.</li>
<li>Go counter-clock-wise and you have a hash <tt class="docutils literal"><span class="pre">cities</span></tt>, so this finds
the element <tt class="docutils literal"><span class="pre">:find</span></tt> in <tt class="docutils literal"><span class="pre">cities</span></tt>.</li>
<li>That gives us a proc. Keep going counter-clock-wise and you get to
the parameters.</li>
<li>The parameters are passed to the proc, and that returns a result. Go
counter-clock-wise again.</li>
<li>Finally, we are at the <tt class="docutils literal"><span class="pre">puts</span></tt> statement, and we have our end
result.</li>
</ol>
<p>After decades of programming I don't even think about these three ways
to read code. I just glance at it and know what it means. I can even
glance at a whole screen of code, and all the bugs and errors jump out
at me. That took an incredibly long time and quite a bit more study than
is sane. To get that way, I learned these three ways of reading most any
programming language:</p>
<ol class="arabic simple">
<li>Front to back.</li>
<li>Back to front.</li>
<li>Counter-clock-wise.</li>
</ol>
<p>Try them out when you have a difficult statement to figure out.</p>
<p>Now type in your next exercise, then go over it. This one is gonna be
fun.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">prompt</span><span class="p">()</span>
  <span class="nb">print</span> <span class="s2">"&gt; "</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">death</span><span class="p">()</span>
  <span class="n">quips</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"You died.  You kinda suck at this."</span><span class="p">,</span>
    <span class="s2">"Nice job, you died ...jackass."</span><span class="p">,</span>
    <span class="s2">"Such a luser."</span><span class="p">,</span>
    <span class="s2">"I have a small puppy that's better at this."</span><span class="o">]</span>
  <span class="nb">puts</span> <span class="n">quips</span><span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="n">quips</span><span class="o">.</span><span class="n">length</span><span class="p">())</span><span class="o">]</span>
  <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">central_corridor</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"The Gothons of Planet Percal #25 have invaded your ship and destroyed"</span>
  <span class="nb">puts</span> <span class="s2">"your entire crew.  You are the last surviving member and your last"</span>
  <span class="nb">puts</span> <span class="s2">"mission is to get the neutron destruct bomb from the Weapons Armory,"</span>
  <span class="nb">puts</span> <span class="s2">"put it in the bridge, and blow the ship up after getting into an "</span>
  <span class="nb">puts</span> <span class="s2">"escape pod."</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"You're running down the central corridor to the Weapons Armory when"</span>
  <span class="nb">puts</span> <span class="s2">"a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume"</span>
  <span class="nb">puts</span> <span class="s2">"flowing around his hate filled body.  He's blocking the door to the"</span>
  <span class="nb">puts</span> <span class="s2">"Armory and about to pull a weapon to blast you."</span>

  <span class="n">prompt</span><span class="p">()</span>
  <span class="n">action</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

  <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"shoot!"</span>
    <span class="nb">puts</span> <span class="s2">"Quick on the draw you yank out your blaster and fire it at the Gothon."</span>
    <span class="nb">puts</span> <span class="s2">"His clown costume is flowing and moving around his body, which throws"</span>
    <span class="nb">puts</span> <span class="s2">"off your aim.  Your laser hits his costume but misses him entirely.  This"</span>
    <span class="nb">puts</span> <span class="s2">"completely ruins his brand new costume his mother bought him, which"</span>
    <span class="nb">puts</span> <span class="s2">"makes him fly into an insane rage and blast you repeatedly in the face until"</span>
    <span class="nb">puts</span> <span class="s2">"you are dead.  Then he eats you."</span>
    <span class="k">return</span> <span class="ss">:death</span>

  <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"dodge!"</span>
    <span class="nb">puts</span> <span class="s2">"Like a world class boxer you dodge, weave, slip and slide right"</span>
    <span class="nb">puts</span> <span class="s2">"as the Gothon's blaster cranks a laser past your head."</span>
    <span class="nb">puts</span> <span class="s2">"In the middle of your artful dodge your foot slips and you"</span>
    <span class="nb">puts</span> <span class="s2">"bang your head on the metal wall and pass out."</span>
    <span class="nb">puts</span> <span class="s2">"You wake up shortly after only to die as the Gothon stomps on"</span>
    <span class="nb">puts</span> <span class="s2">"your head and eats you."</span>
    <span class="k">return</span> <span class="ss">:death</span>

  <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"tell a joke"</span>
    <span class="nb">puts</span> <span class="s2">"Lucky for you they made you learn Gothon insults in the academy."</span>
    <span class="nb">puts</span> <span class="s2">"You tell the one Gothon joke you know:"</span>
    <span class="nb">puts</span> <span class="s2">"Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr."</span>
    <span class="nb">puts</span> <span class="s2">"The Gothon stops, tries not to laugh, then busts out laughing and can't move."</span>
    <span class="nb">puts</span> <span class="s2">"While he's laughing you run up and shoot him square in the head"</span>
    <span class="nb">puts</span> <span class="s2">"putting him down, then jump through the Weapon Armory door."</span>
    <span class="k">return</span> <span class="ss">:laser_weapon_armory</span>

  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"DOES NOT COMPUTE!"</span>
    <span class="k">return</span> <span class="ss">:central_corridor</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">laser_weapon_armory</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"You do a dive roll into the Weapon Armory, crouch and scan the room"</span>
  <span class="nb">puts</span> <span class="s2">"for more Gothons that might be hiding.  It's dead quiet, too quiet."</span>
  <span class="nb">puts</span> <span class="s2">"You stand up and run to the far side of the room and find the"</span>
  <span class="nb">puts</span> <span class="s2">"neutron bomb in its container.  There's a keypad lock on the box"</span>
  <span class="nb">puts</span> <span class="s2">"and you need the code to get the bomb out.  If you get the code"</span>
  <span class="nb">puts</span> <span class="s2">"wrong 10 times then the lock closes forever and you can't"</span>
  <span class="nb">puts</span> <span class="s2">"get the bomb.  The code is 3 digits."</span>
  <span class="n">code</span> <span class="o">=</span> <span class="s2">"%s%s%s"</span> <span class="o">%</span> <span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="o">]</span>
  <span class="nb">print</span> <span class="s2">"[keypad]&gt; "</span>
  <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
  <span class="n">guesses</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="k">while</span> <span class="n">guess</span> <span class="o">!=</span> <span class="n">code</span> <span class="ow">and</span> <span class="n">guesses</span> <span class="o">&lt;</span> <span class="mi">10</span>
    <span class="nb">puts</span> <span class="s2">"BZZZZEDDD!"</span>
    <span class="n">guesses</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span> <span class="s2">"[keypad]&gt; "</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
  <span class="k">end</span>

  <span class="k">if</span> <span class="n">guess</span> <span class="o">==</span> <span class="n">code</span>
    <span class="nb">puts</span> <span class="s2">"The container clicks open and the seal breaks, letting gas out."</span>
    <span class="nb">puts</span> <span class="s2">"You grab the neutron bomb and run as fast as you can to the"</span>
    <span class="nb">puts</span> <span class="s2">"bridge where you must place it in the right spot."</span>
    <span class="k">return</span> <span class="ss">:the_bridge</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"The lock buzzes one last time and then you hear a sickening"</span>
    <span class="nb">puts</span> <span class="s2">"melting sound as the mechanism is fused together."</span>
    <span class="nb">puts</span> <span class="s2">"You decide to sit there, and finally the Gothons blow up the"</span>
    <span class="nb">puts</span> <span class="s2">"ship from their ship and you die."</span>
    <span class="k">return</span> <span class="ss">:death</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">the_bridge</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"You burst onto the Bridge with the netron destruct bomb"</span>
  <span class="nb">puts</span> <span class="s2">"under your arm and surprise 5 Gothons who are trying to"</span>
  <span class="nb">puts</span> <span class="s2">"take control of the ship.  Each of them has an even uglier"</span>
  <span class="nb">puts</span> <span class="s2">"clown costume than the last.  They haven't pulled their"</span>
  <span class="nb">puts</span> <span class="s2">"weapons out yet, as they see the active bomb under your"</span>
  <span class="nb">puts</span> <span class="s2">"arm and don't want to set it off."</span>

  <span class="n">prompt</span><span class="p">()</span>
  <span class="n">action</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

  <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"throw the bomb"</span>
    <span class="nb">puts</span> <span class="s2">"In a panic you throw the bomb at the group of Gothons"</span>
    <span class="nb">puts</span> <span class="s2">"and make a leap for the door.  Right as you drop it a"</span>
    <span class="nb">puts</span> <span class="s2">"Gothon shoots you right in the back killing you."</span>
    <span class="nb">puts</span> <span class="s2">"As you die you see another Gothon frantically try to disarm"</span>
    <span class="nb">puts</span> <span class="s2">"the bomb. You die knowing they will probably blow up when"</span>
    <span class="nb">puts</span> <span class="s2">"it goes off."</span>
    <span class="k">return</span> <span class="ss">:death</span>

  <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"slowly place the bomb"</span>
    <span class="nb">puts</span> <span class="s2">"You point your blaster at the bomb under your arm"</span>
    <span class="nb">puts</span> <span class="s2">"and the Gothons put their hands up and start to sweat."</span>
    <span class="nb">puts</span> <span class="s2">"You inch backward to the door, open it, and then carefully"</span>
    <span class="nb">puts</span> <span class="s2">"place the bomb on the floor, pointing your blaster at it."</span>
    <span class="nb">puts</span> <span class="s2">"You then jump back through the door, punch the close button"</span>
    <span class="nb">puts</span> <span class="s2">"and blast the lock so the Gothons can't get out."</span>
    <span class="nb">puts</span> <span class="s2">"Now that the bomb is placed you run to the escape pod to"</span>
    <span class="nb">puts</span> <span class="s2">"get off this tin can."</span>
    <span class="k">return</span> <span class="ss">:escape_pod</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"DOES NOT COMPUTE!"</span>
    <span class="k">return</span> <span class="ss">:the_bridge</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">escape_pod</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"You rush through the ship desperately trying to make it to"</span>
  <span class="nb">puts</span> <span class="s2">"the escape pod before the whole ship explodes.  It seems like"</span>
  <span class="nb">puts</span> <span class="s2">"hardly any Gothons are on the ship, so your run is clear of"</span>
  <span class="nb">puts</span> <span class="s2">"interference.  You get to the chamber with the escape pods, and"</span>
  <span class="nb">puts</span> <span class="s2">"now need to pick one to take.  Some of them could be damaged"</span>
  <span class="nb">puts</span> <span class="s2">"but you don't have time to look.  There's 5 pods, which one"</span>
  <span class="nb">puts</span> <span class="s2">"do you take?"</span>

  <span class="n">good_pod</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span> 
  <span class="nb">print</span> <span class="s2">"[pod #]&gt;"</span>
  <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

  <span class="k">if</span> <span class="n">guess</span><span class="o">.</span><span class="n">to_i</span> <span class="o">!=</span> <span class="n">good_pod</span>
    <span class="nb">puts</span> <span class="s2">"You jump into pod %s and hit the eject button."</span> <span class="o">%</span> <span class="n">guess</span>
    <span class="nb">puts</span> <span class="s2">"The pod escapes out into the void of space, then"</span>
    <span class="nb">puts</span> <span class="s2">"implodes as the hull ruptures, crushing your body"</span>
    <span class="nb">puts</span> <span class="s2">"into jam jelly."</span>
    <span class="k">return</span> <span class="ss">:death</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"You jump into pod %s and hit the eject button."</span> <span class="o">%</span> <span class="n">guess</span>
    <span class="nb">puts</span> <span class="s2">"The pod easily slides out into space heading to"</span>
    <span class="nb">puts</span> <span class="s2">"the planet below.  As it flies to the planet, you look"</span>
    <span class="nb">puts</span> <span class="s2">"back and see your ship implode then explode like a"</span>
    <span class="nb">puts</span> <span class="s2">"bright star, taking out the Gothon ship at the same"</span>
    <span class="nb">puts</span> <span class="s2">"time.  You won!"</span>
    <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">ROOMS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:death</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:death</span><span class="p">),</span>
  <span class="ss">:central_corridor</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:central_corridor</span><span class="p">),</span>
  <span class="ss">:laser_weapon_armory</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:laser_weapon_armory</span><span class="p">),</span>
  <span class="ss">:the_bridge</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:the_bridge</span><span class="p">),</span>
  <span class="ss">:escape_pod</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:escape_pod</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">runner</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
  <span class="n">next_one</span> <span class="o">=</span> <span class="n">start</span>

  <span class="k">while</span> <span class="kp">true</span>
    <span class="n">room</span> <span class="o">=</span> <span class="n">map</span><span class="o">[</span><span class="n">next_one</span><span class="o">]</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">--------"</span>
    <span class="n">next_one</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">runner</span><span class="p">(</span><span class="no">ROOMS</span><span class="p">,</span> <span class="ss">:central_corridor</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby ex41.rb

<span class="go">--------</span>
<span class="go">The Gothons of Planet Percal #25 have invaded your ship and destroyed</span>
<span class="go">your entire crew.  You are the last surviving member and your last</span>
<span class="go">mission is to get the neutron destruct bomb from the Weapons Armory,</span>
<span class="go">put it in the bridge, and blow the ship up after getting into an</span>
<span class="go">escape pod.</span>


<span class="go">You're running down the central corridor to the Weapons Armory when</span>
<span class="go">a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume</span>
<span class="go">flowing around his hate filled body.  He's blocking the door to the</span>
<span class="go">Armory and about to pull a weapon to blast you.</span>
<span class="gp">&gt;</span> dodge!
<span class="go">Like a world class boxer you dodge, weave, slip and slide right</span>
<span class="go">as the Gothon's blaster cranks a laser past your head.</span>
<span class="go">In the middle of your artful dodge your foot slips and you</span>
<span class="go">bang your head on the metal wall and pass out.</span>
<span class="go">You wake up shortly after only to die as the Gothon stomps on</span>
<span class="go">your head and eats you.</span>

<span class="go">--------</span>
<span class="go">Such a luser.</span>

<span class="gp">$</span> ruby ex41.rb

<span class="go">--------</span>
<span class="go">The Gothons of Planet Percal #25 have invaded your ship and destroyed</span>
<span class="go">your entire crew.  You are the last surviving member and your last</span>
<span class="go">mission is to get the neutron destruct bomb from the Weapons Armory,</span>
<span class="go">put it in the bridge, and blow the ship up after getting into an</span>
<span class="go">escape pod.</span>


<span class="go">You're running down the central corridor to the Weapons Armory when</span>
<span class="go">a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume</span>
<span class="go">flowing around his hate filled body.  He's blocking the door to the</span>
<span class="go">Armory and about to pull a weapon to blast you.</span>
<span class="gp">&gt;</span> tell a joke
<span class="go">Lucky for you they made you learn Gothon insults in the academy.</span>
<span class="go">You tell the one Gothon joke you know:</span>
<span class="go">Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr.</span>
<span class="go">The Gothon stops, tries not to laugh, then busts out laughing and can't move.</span>
<span class="go">While he's laughing you run up and shoot him square in the head</span>
<span class="go">putting him down, then jump through the Weapon Armory door.</span>

<span class="go">--------</span>
<span class="go">You do a dive roll into the Weapon Armory, crouch and scan the room</span>
<span class="go">for more Gothons that might be hiding.  It's dead quiet, too quiet.</span>
<span class="go">You stand up and run to the far side of the room and find the</span>
<span class="go">neutron bomb in its container.  There's a keypad lock on the box</span>
<span class="go">and you need the code to get the bomb out.  If you get the code</span>
<span class="go">wrong 10 times then the lock closes forever and you can't</span>
<span class="go">get the bomb.  The code is 3 digits.</span>
<span class="go">[keypad]&gt; 123</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 234</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 345</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 456</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 567</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 678</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 789</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 384</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 764</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 354</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 263</span>
<span class="go">The lock buzzes one last time and then you hear a sickening</span>
<span class="go">melting sound as the mechanism is fused together.</span>
<span class="go">You decide to sit there, and finally the Gothons blow up the</span>
<span class="go">ship from their ship and you die.</span>

<span class="go">--------</span>
<span class="go">You died.  You kinda suck at this.</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Explain how returning the next room works.</li>
<li>Add cheat codes to the game so you can get past the more difficult
rooms.</li>
<li>Instead of having each function print itself, learn about "here
document" strings.</li>
<li>Write the room description as here document strings, and change the
runner to use them.</li>
<li>Once you have here document strings as the room description, do you
need to have the function prompt even? Have the runner prompt the
user, and pass that in to each function. Your functions should just
be <tt class="docutils literal"><span class="pre">if-statements</span></tt> printing the result and returning the next room.</li>
<li>This is actually a small version of something called a "finite state
machine". Read about them. They might not make sense but try anyway.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex42">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-42-gothons-are-getting-classy">
<h1>Exercise 42: Gothons Are Getting Classy<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-42-gothons-are-getting-classy" title="Permalink to this headline">¶</a></h1>
<p>While it's fun to put functions inside of hashes, you'd think there'd be
something in Ruby that does this for you. There is: the <tt class="docutils literal"><span class="pre">class</span></tt>
keyword. Using <tt class="docutils literal"><span class="pre">class</span></tt> is how you create an even more awesome "hash
with functions" than the one you made in the last exercise. Classes have
all sorts of powerful features and uses that I could never go into in
this book. Instead, you'll just use them like they're fancy <tt class="docutils literal"><span class="pre">hashes</span></tt>
with functions.</p>
<p>A programming language that uses classes is called "Object Oriented
Programming". This is an old style of programming where you make
"things" and you "tell" those things to do work. You've been doing a lot
of this. A whole lot. You just didn't know it. Remember when you were
doing this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">stuff</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'Test'</span><span class="p">,</span> <span class="s1">'This'</span><span class="p">,</span> <span class="s1">'Out'</span><span class="o">]</span>
<span class="nb">puts</span> <span class="n">stuff</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span>
</pre></div>
</div>
<p>You were actually using classes. The variable stuff is actually an Array
class. The <tt class="docutils literal"><span class="pre">stuff.join('</span> <span class="pre">')</span></tt> is calling the <tt class="docutils literal"><span class="pre">join</span></tt> function of the
<tt class="docutils literal"><span class="pre">Array</span></tt> and passing <tt class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></tt> (just an empty space), which is also a
class, a <tt class="docutils literal"><span class="pre">String</span></tt> class. It's all classes!</p>
<p>Well, and objects, but let's just skip that word for now. You'll learn
what those are after you make some classes. How do you make classes?
Very similar to how you made the <tt class="docutils literal"><span class="pre">ROOMS</span></tt> hash, but easier:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="k">class</span> <span class="nc">TheThing</span>
  <span class="kp">attr_reader</span> <span class="ss">:number</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">()</span>
    <span class="vi">@number</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">some_function</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"I got called."</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">add_me_up</span><span class="p">(</span><span class="n">more</span><span class="p">)</span>
    <span class="vi">@number</span> <span class="o">+=</span> <span class="n">more</span>
    <span class="k">return</span> <span class="vi">@number</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># two different things</span>
<span class="n">a</span> <span class="o">=</span> <span class="no">TheThing</span><span class="o">.</span><span class="n">new</span>
<span class="n">b</span> <span class="o">=</span> <span class="no">TheThing</span><span class="o">.</span><span class="n">new</span>

<span class="n">a</span><span class="o">.</span><span class="n">some_function</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">some_function</span><span class="p">()</span>

<span class="nb">puts</span> <span class="n">a</span><span class="o">.</span><span class="n">add_me_up</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">a</span><span class="o">.</span><span class="n">add_me_up</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">b</span><span class="o">.</span><span class="n">add_me_up</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">b</span><span class="o">.</span><span class="n">add_me_up</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>

<span class="nb">puts</span> <span class="n">a</span><span class="o">.</span><span class="n">number</span>
<span class="nb">puts</span> <span class="n">b</span><span class="o">.</span><span class="n">number</span>
</pre></div>
</div>
<p>See the <tt class="docutils literal"><span class="pre">@</span></tt> symbol before the <tt class="docutils literal"><span class="pre">@number</span></tt> variable? That makes it an
instance variable. Every instance of <tt class="docutils literal"><span class="pre">TheThing</span></tt> that you create will
have its own value for <tt class="docutils literal"><span class="pre">@number</span></tt>. Instance variables are hidden away
inside the object. We can't get at the name simply by typing
<tt class="docutils literal"><span class="pre">a.number</span></tt> <em>unless</em> we explicitly make that data readable to the
outside world.</p>
<p>By including the <tt class="docutils literal"><span class="pre">attr_reader</span> <span class="pre">:number</span></tt> line. To make <tt class="docutils literal"><span class="pre">@number</span></tt>
write-only, we could do <tt class="docutils literal"><span class="pre">attr_writer</span> <span class="pre">:number</span></tt>. And to make it read/write
we could do <tt class="docutils literal"><span class="pre">attr_accessor</span> <span class="pre">:number</span></tt>. Ruby uses the good object-oriented
principle of encapsulating data.</p>
<p>Next, see the <tt class="docutils literal"><span class="pre">initialize</span></tt> method? That is how you set up a Ruby class
with internal variables. You can set them with the <tt class="docutils literal"><span class="pre">@</span></tt> symbol just
like I showed you here. See also how we then use this in <tt class="docutils literal"><span class="pre">add_me_up()</span></tt>
later which lets you add to the <tt class="docutils literal"><span class="pre">@number</span></tt> you created. Later you can
see how we use this to add to our number and print it.</p>
<p>Classes are very powerful, so you should read everything you can about
them and play with them. You actually know how to use them, you just
have to try it. In fact, I want to play some guitar right now so I'm not
going to give you an exercise to type. You're going to write an exercise
using classes.</p>
<p>Here's how we'd do exercise 41 using classes instead of the thing we
created:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Game</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
    <span class="vi">@quips</span> <span class="o">=</span> <span class="o">[</span>
      <span class="s2">"You died.  You kinda suck at this."</span><span class="p">,</span>
      <span class="s2">"Nice job, you died ...jackass."</span><span class="p">,</span>
      <span class="s2">"Such a luser."</span><span class="p">,</span>
      <span class="s2">"I have a small puppy that's better at this."</span>
    <span class="o">]</span>
    <span class="vi">@start</span> <span class="o">=</span> <span class="n">start</span>
    <span class="nb">puts</span> <span class="s2">"in init @start = "</span> <span class="o">+</span> <span class="vi">@start</span><span class="o">.</span><span class="n">inspect</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">prompt</span><span class="p">()</span>
    <span class="nb">print</span> <span class="s2">"&gt; "</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">play</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"@start =&gt; "</span> <span class="o">+</span> <span class="vi">@start</span><span class="o">.</span><span class="n">inspect</span>
    <span class="n">next_room</span> <span class="o">=</span> <span class="vi">@start</span>

    <span class="k">while</span> <span class="kp">true</span>
      <span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">--------"</span>
      <span class="n">room</span> <span class="o">=</span> <span class="nb">method</span><span class="p">(</span><span class="n">next_room</span><span class="p">)</span>
      <span class="n">next_room</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">death</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="vi">@quips</span><span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="vi">@quips</span><span class="o">.</span><span class="n">length</span><span class="p">())</span><span class="o">]</span>
    <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">central_corridor</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"The Gothons of Planet Percal #25 have invaded your ship and destroyed"</span>
    <span class="nb">puts</span> <span class="s2">"your entire crew.  You are the last surviving member and your last"</span>
    <span class="nb">puts</span> <span class="s2">"mission is to get the neutron destruct bomb from the Weapons Armory,"</span>
    <span class="nb">puts</span> <span class="s2">"put it in the bridge, and blow the ship up after getting into an "</span>
    <span class="nb">puts</span> <span class="s2">"escape pod."</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>
    <span class="nb">puts</span> <span class="s2">"You're running down the central corridor to the Weapons Armory when"</span>
    <span class="nb">puts</span> <span class="s2">"a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume"</span>
    <span class="nb">puts</span> <span class="s2">"flowing around his hate filled body.  He's blocking the door to the"</span>
    <span class="nb">puts</span> <span class="s2">"Armory and about to pull a weapon to blast you."</span>

    <span class="n">prompt</span><span class="p">()</span>
    <span class="n">action</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"shoot!"</span>
      <span class="nb">puts</span> <span class="s2">"Quick on the draw you yank out your blaster and fire it at the Gothon."</span>
      <span class="nb">puts</span> <span class="s2">"His clown costume is flowing and moving around his body, which throws"</span>
      <span class="nb">puts</span> <span class="s2">"off your aim.  Your laser hits his costume but misses him entirely.  This"</span>
      <span class="nb">puts</span> <span class="s2">"completely ruins his brand new costume his mother bought him, which"</span>
      <span class="nb">puts</span> <span class="s2">"makes him fly into an insane rage and blast you repeatedly in the face until"</span>
      <span class="nb">puts</span> <span class="s2">"you are dead.  Then he eats you."</span>
      <span class="k">return</span> <span class="ss">:death</span>

    <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"dodge!"</span>
      <span class="nb">puts</span> <span class="s2">"Like a world class boxer you dodge, weave, slip and slide right"</span>
      <span class="nb">puts</span> <span class="s2">"as the Gothon's blaster cranks a laser past your head."</span>
      <span class="nb">puts</span> <span class="s2">"In the middle of your artful dodge your foot slips and you"</span>
      <span class="nb">puts</span> <span class="s2">"bang your head on the metal wall and pass out."</span>
      <span class="nb">puts</span> <span class="s2">"You wake up shortly after only to die as the Gothon stomps on"</span>
      <span class="nb">puts</span> <span class="s2">"your head and eats you."</span>
      <span class="k">return</span> <span class="ss">:death</span>

    <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"tell a joke"</span>
      <span class="nb">puts</span> <span class="s2">"Lucky for you they made you learn Gothon insults in the academy."</span>
      <span class="nb">puts</span> <span class="s2">"You tell the one Gothon joke you know:"</span>
      <span class="nb">puts</span> <span class="s2">"Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr."</span>
      <span class="nb">puts</span> <span class="s2">"The Gothon stops, tries not to laugh, then busts out laughing and can't move."</span>
      <span class="nb">puts</span> <span class="s2">"While he's laughing you run up and shoot him square in the head"</span>
      <span class="nb">puts</span> <span class="s2">"putting him down, then jump through the Weapon Armory door."</span>
      <span class="k">return</span> <span class="ss">:laser_weapon_armory</span>

    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"DOES NOT COMPUTE!"</span>
      <span class="k">return</span> <span class="ss">:central_corridor</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">laser_weapon_armory</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"You do a dive roll into the Weapon Armory, crouch and scan the room"</span>
    <span class="nb">puts</span> <span class="s2">"for more Gothons that might be hiding.  It's dead quiet, too quiet."</span>
    <span class="nb">puts</span> <span class="s2">"You stand up and run to the far side of the room and find the"</span>
    <span class="nb">puts</span> <span class="s2">"neutron bomb in its container.  There's a keypad lock on the box"</span>
    <span class="nb">puts</span> <span class="s2">"and you need the code to get the bomb out.  If you get the code"</span>
    <span class="nb">puts</span> <span class="s2">"wrong 10 times then the lock closes forever and you can't"</span>
    <span class="nb">puts</span> <span class="s2">"get the bomb.  The code is 3 digits."</span>
    <span class="n">code</span> <span class="o">=</span> <span class="s2">"%s%s%s"</span> <span class="o">%</span> <span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="o">]</span>
    <span class="nb">print</span> <span class="s2">"[keypad]&gt; "</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
    <span class="n">guesses</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="n">guess</span> <span class="o">!=</span> <span class="n">code</span> <span class="ow">and</span> <span class="n">guesses</span> <span class="o">&lt;</span> <span class="mi">10</span>
      <span class="nb">puts</span> <span class="s2">"BZZZZEDDD!"</span>
      <span class="n">guesses</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="nb">print</span> <span class="s2">"[keypad]&gt; "</span>
      <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
    <span class="k">end</span>

    <span class="k">if</span> <span class="n">guess</span> <span class="o">==</span> <span class="n">code</span>
      <span class="nb">puts</span> <span class="s2">"The container clicks open and the seal breaks, letting gas out."</span>
      <span class="nb">puts</span> <span class="s2">"You grab the neutron bomb and run as fast as you can to the"</span>
      <span class="nb">puts</span> <span class="s2">"bridge where you must place it in the right spot."</span>
      <span class="k">return</span> <span class="ss">:the_bridge</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"The lock buzzes one last time and then you hear a sickening"</span>
      <span class="nb">puts</span> <span class="s2">"melting sound as the mechanism is fused together."</span>
      <span class="nb">puts</span> <span class="s2">"You decide to sit there, and finally the Gothons blow up the"</span>
      <span class="nb">puts</span> <span class="s2">"ship from their ship and you die."</span>
      <span class="k">return</span> <span class="ss">:death</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">the_bridge</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"You burst onto the Bridge with the netron destruct bomb"</span>
    <span class="nb">puts</span> <span class="s2">"under your arm and surprise 5 Gothons who are trying to"</span>
    <span class="nb">puts</span> <span class="s2">"take control of the ship.  Each of them has an even uglier"</span>
    <span class="nb">puts</span> <span class="s2">"clown costume than the last.  They haven't pulled their"</span>
    <span class="nb">puts</span> <span class="s2">"weapons out yet, as they see the active bomb under your"</span>
    <span class="nb">puts</span> <span class="s2">"arm and don't want to set it off."</span>

    <span class="n">prompt</span><span class="p">()</span>
    <span class="n">action</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"throw the bomb"</span>
      <span class="nb">puts</span> <span class="s2">"In a panic you throw the bomb at the group of Gothons"</span>
      <span class="nb">puts</span> <span class="s2">"and make a leap for the door.  Right as you drop it a"</span>
      <span class="nb">puts</span> <span class="s2">"Gothon shoots you right in the back killing you."</span>
      <span class="nb">puts</span> <span class="s2">"As you die you see another Gothon frantically try to disarm"</span>
      <span class="nb">puts</span> <span class="s2">"the bomb. You die knowing they will probably blow up when"</span>
      <span class="nb">puts</span> <span class="s2">"it goes off."</span>
      <span class="k">return</span> <span class="ss">:death</span>

    <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"slowly place the bomb"</span>
      <span class="nb">puts</span> <span class="s2">"You point your blaster at the bomb under your arm"</span>
      <span class="nb">puts</span> <span class="s2">"and the Gothons put their hands up and start to sweat."</span>
      <span class="nb">puts</span> <span class="s2">"You inch backward to the door, open it, and then carefully"</span>
      <span class="nb">puts</span> <span class="s2">"place the bomb on the floor, pointing your blaster at it."</span>
      <span class="nb">puts</span> <span class="s2">"You then jump back through the door, punch the close button"</span>
      <span class="nb">puts</span> <span class="s2">"and blast the lock so the Gothons can't get out."</span>
      <span class="nb">puts</span> <span class="s2">"Now that the bomb is placed you run to the escape pod to"</span>
      <span class="nb">puts</span> <span class="s2">"get off this tin can."</span>
      <span class="k">return</span> <span class="ss">:escape_pod</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"DOES NOT COMPUTE!"</span>
      <span class="k">return</span> <span class="ss">:the_bridge</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">escape_pod</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"You rush through the ship desperately trying to make it to"</span>
    <span class="nb">puts</span> <span class="s2">"the escape pod before the whole ship explodes.  It seems like"</span>
    <span class="nb">puts</span> <span class="s2">"hardly any Gothons are on the ship, so your run is clear of"</span>
    <span class="nb">puts</span> <span class="s2">"interference.  You get to the chamber with the escape pods, and"</span>
    <span class="nb">puts</span> <span class="s2">"now need to pick one to take.  Some of them could be damaged"</span>
    <span class="nb">puts</span> <span class="s2">"but you don't have time to look.  There's 5 pods, which one"</span>
    <span class="nb">puts</span> <span class="s2">"do you take?"</span>

    <span class="n">good_pod</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span> 
    <span class="nb">print</span> <span class="s2">"[pod #]&gt;"</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">guess</span><span class="o">.</span><span class="n">to_i</span> <span class="o">!=</span> <span class="n">good_pod</span>
      <span class="nb">puts</span> <span class="s2">"You jump into pod %s and hit the eject button."</span> <span class="o">%</span> <span class="n">guess</span>
      <span class="nb">puts</span> <span class="s2">"The pod escapes out into the void of space, then"</span>
      <span class="nb">puts</span> <span class="s2">"implodes as the hull ruptures, crushing your body"</span>
      <span class="nb">puts</span> <span class="s2">"into jam jelly."</span>
      <span class="k">return</span> <span class="ss">:death</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"You jump into pod %s and hit the eject button."</span> <span class="o">%</span> <span class="n">guess</span>
      <span class="nb">puts</span> <span class="s2">"The pod easily slides out into space heading to"</span>
      <span class="nb">puts</span> <span class="s2">"the planet below.  As it flies to the planet, you look"</span>
      <span class="nb">puts</span> <span class="s2">"back and see your ship implode then explode like a"</span>
      <span class="nb">puts</span> <span class="s2">"bright star, taking out the Gothon ship at the same"</span>
      <span class="nb">puts</span> <span class="s2">"time.  You won!"</span>
      <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">a_game</span> <span class="o">=</span> <span class="no">Game</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:central_corridor</span><span class="p">)</span>
<span class="n">a_game</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<p>The output from this version of the game should be exactly the same as
the previous version. In fact you'll notice that some of the code is
nearly the same. Compare this new version of the game with the last one
so you understand the changes that were made. Key things to really get
are:</p>
<ol class="arabic simple">
<li>How you made a <tt class="docutils literal"><span class="pre">class</span> <span class="pre">Game</span></tt> and put functions inside it.</li>
<li>How <tt class="docutils literal"><span class="pre">initialize</span></tt> is a special initialization method that sets up
important variables.</li>
<li>How you added functions to the class by nesting their definitions
under the <tt class="docutils literal"><span class="pre">class</span></tt> keyword.</li>
<li>How you nested the contents of the functions under their names.</li>
<li>The concept of <tt class="docutils literal"><span class="pre">@</span></tt> and how it's used in <tt class="docutils literal"><span class="pre">initialize</span></tt>, <tt class="docutils literal"><span class="pre">play</span></tt>,
and <tt class="docutils literal"><span class="pre">death</span></tt>.</li>
<li>How a Game was created at the end and then told to <tt class="docutils literal"><span class="pre">play()</span></tt> and how
that got everything started.</li>
</ol>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Add some rooms to make sure you know how to work with a class.</li>
<li>Create a two-class version of this, where one is the <tt class="docutils literal"><span class="pre">Map</span></tt> and the
other is the <tt class="docutils literal"><span class="pre">Engine</span></tt>. Hint: <tt class="docutils literal"><span class="pre">play</span></tt> goes in the <tt class="docutils literal"><span class="pre">Engine</span></tt>.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>

    <a href="#top">Top of page</a>
		<div class="document" id="ex43">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-43-you-make-a-game">
<h1>Exercise 43: You Make A Game<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-43-you-make-a-game" title="Permalink to this headline">¶</a></h1>
<p>You need to start learning to feed yourself. Hopefully as you have
worked through this book, you have learned that all the information you
need is on the internet, you just have to go search for it. The only
thing you have been missing are the right words and what to look for
when you search. Now you should have a sense of it, so it's about time
you struggled through a big project and tried to get it working.</p>
<p>Here are your requirements:</p>
<ol class="arabic simple">
<li>Make a different game from the one I made.</li>
<li>Use more than one file, and use <tt class="docutils literal"><span class="pre">require</span></tt> to use them. Make sure
you know what that is.</li>
<li>Use one class per room and give the classes names that fit their
purpose. Like <tt class="docutils literal"><span class="pre">GoldRoom</span></tt>, <tt class="docutils literal"><span class="pre">KoiPondRoom</span></tt>.</li>
<li>Your runner will need to know about these rooms, so make a class that
runs them and knows about them. There's plenty of ways to do this,
but consider having each room return what room is next or setting a
variable of what room is next.</li>
</ol>
<p>Other than that I leave it to you. Spend a whole week on this and make
it the best game you can. Use classes, functions, dicts, lists anything
you can to make it nice. The purpose of this lesson is to teach you how
to structure classes that need other classes inside other files.</p>
<p>Remember, I'm not telling you exactly how to do this because you have to
do this yourself. Go figure it out. Programming is problem solving, and
that means trying things, experimenting, failing, scrapping your work,
and trying again. When you get stuck, ask for help and show people your
code. If they are mean to you, ignore them, focus on the people who are
not mean and offer to help. Keep working it and cleaning it until it's
good, then show it some more.</p>
<p>Good luck, and see you in a week with your game.</p>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex44">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-44-evaluating-your-game">
<h1>Exercise 44: Evaluating Your Game<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-44-evaluating-your-game" title="Permalink to this headline">¶</a></h1>
<p>In this exercise you will evaluate the game you just made. Maybe you got
part-way through it and you got stuck. Maybe you got it working but just
barely. Either way, we're going to go through a bunch of things you
should know now and make sure you covered them in your game. We're going
to study how to properly format a class, common conventions in using
classes, and a lot of "textbook" knowledge.</p>
<p>Why would I have you try to do it yourself and then show you how to do
it right? From now on in the book I'm going to try to make you
self-sufficient. I've been holding your hand mostly this whole time, and
I can't do that for much longer. I'm now instead going to give you
things to do, have you do them on your own, and then give you ways to
improve what you did.</p>
<p>You will struggle at first and probably be very frustrated but stick
with it and eventually you will build a mind for solving problems. You
will start to find creative solutions to problems rather than just copy
solutions out of textbooks.</p>
<div class="section" id="function-style">
<h2>Function Style<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#function-style" title="Permalink to this headline">¶</a></h2>
<p>All the other rules I've taught you about how to make a function nice
apply here, but add these things:</p>
<ul class="simple">
<li>For various reasons, programmers call functions that are part of
classes <tt class="docutils literal"><span class="pre">methods</span></tt>. It's mostly marketing but just be warned that
every time you say "function" they'll annoyingly correct you and say
"method". If they get too annoying, just ask them to demonstrate the
mathematical basis that determines how a "method" is different from a
"function" and they'll shut up.</li>
<li>When you work with classes much of your time is spent talking about
making the class "do things". Instead of naming your functions after
what the function does, instead name it as if it's a command you are
giving to the class. Same as <tt class="docutils literal"><span class="pre">pop</span></tt> is saying "Hey array, <tt class="docutils literal"><span class="pre">pop</span></tt>
this off." It isn't called <tt class="docutils literal"><span class="pre">remove_from_end_of_list</span></tt> because even
though that's what it does, that's not a command to an <tt class="docutils literal"><span class="pre">array</span></tt>.</li>
<li>Keep your functions small and simple. For some reason when people
start learning about classes they forget this.</li>
</ul>
</div>
<div class="section" id="class-style">
<h2>Class Style<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#class-style" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Your class should use "proper case" like <tt class="docutils literal"><span class="pre">SuperGoldFactory</span></tt> rather
than <tt class="docutils literal"><span class="pre">super_gold_factory</span></tt>.</li>
<li>Try not to do too much in your <tt class="docutils literal"><span class="pre">initialize</span></tt> functions. It makes
them harder to use.</li>
<li>Your other functions should use "underscore format" so write
<tt class="docutils literal"><span class="pre">my_awesome_hair</span></tt> and not <tt class="docutils literal"><span class="pre">myawesomehair</span></tt> or <tt class="docutils literal"><span class="pre">MyAwesomeHair</span></tt>.</li>
<li>Be consistent in how you organize your function arguments. If your
class has to deal with users, dogs, and cats, keep that order
throughout unless it really doesn't make sense. If you have one
function takes (<tt class="docutils literal"><span class="pre">dog</span></tt>, <tt class="docutils literal"><span class="pre">cat</span></tt>, <tt class="docutils literal"><span class="pre">user</span></tt>) and the other takes
(<tt class="docutils literal"><span class="pre">user</span></tt>, <tt class="docutils literal"><span class="pre">cat</span></tt>, <tt class="docutils literal"><span class="pre">dog</span></tt>), it'll be hard to use.</li>
<li>Try not to use variables that come from the module or globals. They
should be fairly self-contained.</li>
<li>A foolish consistency is the hobgoblin of little minds. Consistency
is good, but foolishly following some idiotic mantra because everyone
else does is bad style. Think for yourself.</li>
</ul>
</div>
<div class="section" id="code-style">
<h2>Code Style<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#code-style" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Give your code vertical space so people can read it. You will find
some very bad programmers who are able to write reasonable code, but
who do not add any spaces. This is bad style in any language because
the human eye and brain use space and vertical alignment to scan and
separate visual elements. Not having space is the same as giving your
code an awesome camouflage paint job.</li>
<li>If you can't read it out loud, it's probably hard to read. If you are
having a problem making something easy to use, try reading it out
loud. Not only does this force you to slow down and really read it,
but it also helps you find difficult passages and things to change
for readability.</li>
<li>Try to do what other people are doing in Ruby until you find your own
style.</li>
<li>Once you find your own style, do not be a jerk about it. Working with
other people's code is part of being a programmer, and other people
have really bad taste. Trust me, you will probably have really bad
taste too and not even realize it.</li>
<li>If you find someone who writes code in a style you like, try writing
something that mimics their style.</li>
</ul>
</div>
<div class="section" id="good-comments">
<h2>Good Comments<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#good-comments" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>There are programmers who will tell you that your code should be
readable enough that you do not need comments. They'll then tell you
in their most official sounding voice that, "Ergo you should never
write comments." Those programmers are either consultants who get
paid more if other people can't use their code, or incompetents who
tend to never work with other people. Ignore them and write comments.</li>
<li>When you write comments, describe why you are doing what you are
doing. The code already says how, but why you did things the way you
did is more important.</li>
<li>When you write here doc dcomments for your functions, make the
comments documentation for someone who will have to use your code.
You do not have to go crazy, but a nice little sentence about what
someone does with that function helps a lot.</li>
<li>Finally, while comments are good, too many are bad, and you have to
maintain them. Keep your comments relatively short and to the point,
and if you change a function, review the comment to make sure it's
still correct.</li>
</ul>
</div>
<div class="section" id="evaluate-your-game">
<h2>Evaluate Your Game<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#evaluate-your-game" title="Permalink to this headline">¶</a></h2>
<p>I want you now to pretend you are me. Adopt a very stern look, print out
your code, and take a red pen and mark every mistake you find. Anything
from this exercise and from other things you have known. Once you are
done marking your code up, I want you to fix everything you came up
with. Then repeat this a couple of times, looking for anything that
could be better. Use all the tricks I've given you to break your code
down into the smallest tiniest little analysis you can.</p>
<p>The purpose of this exercise is to train your attention to detail on
classes. Once you are done with this bit of code, find someone else's
code and do the same thing. Go through a printed copy of some part of it
and point out all the mistakes and style errors you find. Then fix it
and see if your fixes can be done without breaking their program.</p>
<p>I want you to do nothing but evaluate and fix code for the week. Your
own code and other people's. It'll be pretty hard work, but when you are
done your brain will be wired tight like a boxer's hands.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex45">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-45-is-a-has-a-objects-and-classes">
<h1>Exercise 45: Is-A, Has-A, Objects, and Classes<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-45-is-a-has-a-objects-and-classes" title="Permalink to this headline">¶</a></h1>
<p>An important concept that you have to understand is the difference
between a <tt class="docutils literal"><span class="pre">Class</span></tt> and an <tt class="docutils literal"><span class="pre">Object</span></tt>. The problem is, there is no real
"difference" between a class and an object. They are actually the same
thing at different points in time. I will demonstrate by a Zen koan:</p>
<p><tt class="docutils literal"><span class="pre">What</span> <span class="pre">is</span> <span class="pre">the</span> <span class="pre">difference</span> <span class="pre">between</span> <span class="pre">a</span> <span class="pre">Fish</span> <span class="pre">and</span> <span class="pre">a</span> <span class="pre">Salmon?</span></tt></p>
<p>Did that question sort of confuse you? Really sit down and think about
it for a minute. I mean, a Fish and a Salmon are different but, wait,
they are the same thing right? A Salmon is a kind of Fish, so I mean
it's not different. But at the same time, becase a Salmon is a
particular type of Fish and so it's actually different from all other
Fish. That's what makes it a Salmon and not a Halibut. So a Salmon and a
Fish are the same but different. Weird.</p>
<p>This question is confusing because most people do not think about real
things this way, but they intuitively understand them. You do not need
to think about the difference between a Fish and a Salmon because you
know how they are related. You know a Salmon is a kind of Fish and that
there are other kinds of Fish without having to understand that.</p>
<p>Let's take it one step further, let's say you have a bucket full of 3
Salmon and because you are a nice person, you have decided to name them
Frank, Joe, and Mary. Now, think about this question:</p>
<p><tt class="docutils literal"><span class="pre">What</span> <span class="pre">is</span> <span class="pre">the</span> <span class="pre">difference</span> <span class="pre">between</span> <span class="pre">Mary</span> <span class="pre">and</span> <span class="pre">a</span> <span class="pre">Salmon?</span></tt></p>
<p>Again this is a weird question, but it's a bit easier than the Fish vs.
Salmon question. You know that Mary is a Salmon, and so she's not really
different. She's just a specific "instance" of a Salmon. Joe and Frank
are also instances of Salmon. But, what do I mean when I say instance? I
mean they were created from some other Salmon and now represent a real
thing that has Salmon-like attributes.</p>
<p>Now for the mind bending idea: Fish is a <tt class="docutils literal"><span class="pre">Class</span></tt>, and Salmon is a
<tt class="docutils literal"><span class="pre">Class</span></tt>, and Mary is an <tt class="docutils literal"><span class="pre">Object</span></tt>. Think about that for a second.
Alright let's break it down real slow and see if you get it.</p>
<p>A Fish is a <tt class="docutils literal"><span class="pre">Class</span></tt>, meaning it's not a real thing, but rather a word
we attach to instances of things with similar attributes. Got fins? Got
gills? Lives in water? Alright it's probably a Fish.</p>
<p>Someone with a Ph.D. then comes along and says, "No my young friend,
this Fish is actually Salmo salar, affectionately known as a Salmon."
This professor has just clarified the Fish further and made a new
<tt class="docutils literal"><span class="pre">Class</span></tt> called "Salmon" that has more specific attributes. Longer
nose, reddish flesh, big, lives in the ocean or fresh water, tasty? Ok,
probably a Salmon.</p>
<p>Finally, a cook comes along and tells the Ph.D., "No, you see this
Salmon right here, I'll call her Mary and I'm going to make a tasty
fillet out of her with a nice sauce." Now you have this instance of a
Salmon (which also is an instance of a Fish) named Mary turned into
something real that is filling your belly. It has become an <tt class="docutils literal"><span class="pre">Object</span></tt>.</p>
<p>There you have it: Mary is a kind of Salmon that is a kind of Fish.
<tt class="docutils literal"><span class="pre">Object</span></tt> is a <tt class="docutils literal"><span class="pre">Class</span></tt> is a <tt class="docutils literal"><span class="pre">Class</span></tt>.</p>
<p>How This Looks In Code This is a weird concept, but to be very honest
you only have to worry about it when you make new classes, and when you
use a class. I will show you two tricks to help you figure out whether
something is a <tt class="docutils literal"><span class="pre">Class</span></tt> or <tt class="docutils literal"><span class="pre">Object</span></tt>.</p>
<p>First, you need to learn two catch phrases "is-a" and "has-a". You use
the phrase is-a when you talk about objects and classes being related to
each other by a class relationship. You use has-a when you talk about
objects and classes that are related only because they reference each
other.</p>
<p>Now, go through this piece of code and replace each <tt class="docutils literal"><span class="pre">##??</span></tt> comment
with a replacement comment that says whether the next line represents an
is-a or a has-a relationship, and what that relationship is. In the
beginning of the code, I've laid out a few examples, so you just have to
write the remaining ones.</p>
<p>Remember, <tt class="docutils literal"><span class="pre">is-a</span></tt> is the relationship between Fish and Salmon, while
<tt class="docutils literal"><span class="pre">has-a</span></tt> is the relationship between Salmon and Gills.</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">## Animal is-a object (yes, sort of confusing) look at the extra credit</span>
<span class="k">class</span> <span class="nc">Animal</span>

<span class="k">end</span>

<span class="c1">## ??</span>
<span class="k">class</span> <span class="nc">Dog</span> <span class="o">&lt;</span> <span class="no">Animal</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="c1">## ??</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="c1">## ??</span>
<span class="k">class</span> <span class="nc">Cat</span> <span class="o">&lt;</span> <span class="no">Animal</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="c1">## ??</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="c1">## ??</span>
<span class="k">class</span> <span class="nc">Person</span>

  <span class="kp">attr_accessor</span> <span class="ss">:pet</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="c1">## ??</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>

    <span class="c1">## Person has-a pet of some kind</span>
    <span class="vi">@pet</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="k">end</span>

<span class="k">end</span>
<span class="c1">## ??</span>
<span class="k">class</span> <span class="nc">Employee</span> <span class="o">&lt;</span> <span class="no">Person</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">salary</span><span class="p">)</span>
    <span class="c1">## ?? hmm what is this strange magic?</span>
    <span class="k">super</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="c1">## ??</span>
    <span class="vi">@salary</span> <span class="o">=</span> <span class="n">salary</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="c1">## ??</span>
<span class="k">class</span> <span class="nc">Fish</span>

<span class="k">end</span>

<span class="c1">## ??</span>
<span class="k">class</span> <span class="nc">Salmon</span> <span class="o">&lt;</span> <span class="no">Fish</span>

<span class="k">end</span>

<span class="c1">## ??</span>
<span class="k">class</span> <span class="nc">Halibut</span> <span class="o">&lt;</span> <span class="no">Fish</span>

<span class="k">end</span>

<span class="c1">## rover is-a Dog</span>
<span class="n">rover</span> <span class="o">=</span> <span class="no">Dog</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Rover"</span><span class="p">)</span>

<span class="c1">## ??</span>
<span class="n">satan</span> <span class="o">=</span> <span class="no">Cat</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Satan"</span><span class="p">)</span>

<span class="c1">## ??</span>
<span class="n">mary</span> <span class="o">=</span> <span class="no">Person</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Mary"</span><span class="p">)</span>

<span class="c1">## ??</span>
<span class="n">mary</span><span class="o">.</span><span class="n">pet</span> <span class="o">=</span> <span class="n">satan</span>

<span class="c1">## ??</span>
<span class="n">frank</span> <span class="o">=</span> <span class="no">Employee</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Frank"</span><span class="p">,</span> <span class="mi">120000</span><span class="p">)</span>

<span class="c1">## ??</span>
<span class="n">frank</span><span class="o">.</span><span class="n">pet</span> <span class="o">=</span> <span class="n">rover</span>

<span class="c1">## ??</span>
<span class="n">flipper</span> <span class="o">=</span> <span class="no">Fish</span><span class="o">.</span><span class="n">new</span>

<span class="c1">## ??</span>
<span class="n">crouse</span> <span class="o">=</span> <span class="no">Salmon</span><span class="o">.</span><span class="n">new</span>

<span class="c1">## ??</span>
<span class="n">harry</span> <span class="o">=</span> <span class="no">Halibut</span><span class="o">.</span><span class="n">new</span>
</pre></div>
</td></tr></tbody></table></div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Is it possible to use a <tt class="docutils literal"><span class="pre">Class</span></tt> like it's an <tt class="docutils literal"><span class="pre">Object</span></tt>?</li>
<li>Fill out the animals, fish, and people in this exercise with
functions that make them do things. See what happens when functions
are in a "base class" like Animal vs. in say Dog.</li>
<li>Find other people's code and work out all the <tt class="docutils literal"><span class="pre">is-a</span></tt> and <tt class="docutils literal"><span class="pre">has-a</span></tt>
relationships.</li>
<li>Make some new relationships that are lists and dicts so you can also
have "has-many" relationships.</li>
<li>Do you think there's a such thing as a "is-many" relationship? Read
about "multiple inheritance", then avoid it if you can.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex46">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-46-a-project-skeleton">
<h1>Exercise 46: A Project Skeleton<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-46-a-project-skeleton" title="Permalink to this headline">¶</a></h1>
<p>This will be where you start learning how to setup a good project
"skeleton" directory. This skeleton directory will have all the basics
you need to get a new project up and running. It will have your project
layout, automated tests, modules, and install scripts.</p>
<div class="section" id="skeleton-contents-linux-osx">
<h2>Skeleton Contents: Linux/OSX<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#skeleton-contents-linux-osx" title="Permalink to this headline">¶</a></h2>
<p>First, create the structure of your skeleton directory with these
commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> mkdir -p projects
<span class="gp">$</span> <span class="nb">cd </span>projects/
<span class="gp">$</span> mkdir skeleton
<span class="gp">$</span> <span class="nb">cd </span>skeleton
<span class="gp">$</span> mkdir bin lib lib/NAME <span class="nb">test</span>
</pre></div>
</div>
<p>I use a directory named projects to store all the various things I'm
working on. Inside that directory I have my skeleton directory that I
put the basis of my projects into. The directory NAME will be renamed to
whatever you are calling your project's main module when you use the
skeleton.</p>
<p>Next we need to setup some initial files:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> touch lib/NAME.rb
<span class="gp">$</span> touch lib/NAME/version.rb
</pre></div>
</div>
<p>Then we can create a <tt class="docutils literal"><span class="pre">NAME.gemspec</span></tt> file in our project's root
directory which we can use to install our project later if we want:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># -*- encoding: utf-8 -*-</span>
<span class="vg">$:</span><span class="o">.</span><span class="n">push</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s2">"../lib"</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
<span class="nb">require</span> <span class="s2">"NAME/version"</span>

<span class="no">Gem</span><span class="o">::</span><span class="no">Specification</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span>
  <span class="n">s</span><span class="o">.</span><span class="n">name</span>        <span class="o">=</span> <span class="s2">"NAME"</span>
  <span class="n">s</span><span class="o">.</span><span class="n">version</span>     <span class="o">=</span> <span class="no">NAME</span><span class="o">::</span><span class="no">VERSION</span>
  <span class="n">s</span><span class="o">.</span><span class="n">authors</span>     <span class="o">=</span> <span class="o">[</span><span class="s2">"Rob Sobers"</span><span class="o">]</span>
  <span class="n">s</span><span class="o">.</span><span class="n">email</span>       <span class="o">=</span> <span class="o">[</span><span class="s2">"rsobers@gmail.com"</span><span class="o">]</span>
  <span class="n">s</span><span class="o">.</span><span class="n">homepage</span>    <span class="o">=</span> <span class="s2">""</span>
  <span class="n">s</span><span class="o">.</span><span class="n">summary</span>     <span class="o">=</span> <span class="sx">%q{TODO: Write a gem summary}</span>
  <span class="n">s</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="sx">%q{TODO: Write a gem description}</span>

  <span class="n">s</span><span class="o">.</span><span class="n">rubyforge_project</span> <span class="o">=</span> <span class="s2">"NAME"</span>

  <span class="n">s</span><span class="o">.</span><span class="n">files</span>         <span class="o">=</span> <span class="sb">`git ls-files`</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
  <span class="n">s</span><span class="o">.</span><span class="n">test_files</span>    <span class="o">=</span> <span class="sb">`git ls-files -- {test,spec,features}/*`</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
  <span class="n">s</span><span class="o">.</span><span class="n">executables</span>   <span class="o">=</span> <span class="sb">`git ls-files -- bin/*`</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">s</span><span class="o">.</span><span class="n">require_paths</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"lib"</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Edit this file so that it has your contact information and is ready to
go for when you copy it.</p>
<p>Finally you will want a simple skeleton file for unit tests (which will
talk about more in the next lesson) named <tt class="docutils literal"><span class="pre">test/test_NAME.rb</span></tt>:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'test/unit'</span>

<span class="k">class</span> <span class="nc">MyUnitTests</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>

  <span class="k">def</span> <span class="nf">setup</span>
    <span class="nb">puts</span> <span class="s2">"setup!"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">teardown</span>
    <span class="nb">puts</span> <span class="s2">"teardown!"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_basic</span>
    <span class="nb">puts</span> <span class="s2">"I RAN!"</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
</div>
<div class="section" id="installing-gems">
<h2>Installing Gems<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#installing-gems" title="Permalink to this headline">¶</a></h2>
<p>Gems are packages of Ruby code that help you get things done, so you
will need to know how to install them and use them. Here's the problem
though. You are at a point where it's difficult for me to help you do
that and keep this book sane and clean. There are so many ways to
install software on so many computers that I'd have to spend 10 pages
walking you through every step, and let me tell you I am a lazy guy.</p>
<p>Rather than tell you how to do it exactly, I'm going to tell you what
you should install, and then tell you to figure it out and get it
working. This will be really good for you since it will open a whole
world of software you can use that other people have released to the
world.</p>
<p>Next, install the following software packages:</p>
<ul class="simple">
<li>git - <a class="reference external" href="http://git-scm.com/">http://git-scm.com/</a></li>
<li>rake - <a class="reference external" href="http://rake.rubyforge.org/">http://rake.rubyforge.org/</a></li>
<li>rvm - <a class="reference external" href="https://rvm.beginrescueend.com/">https://rvm.beginrescueend.com/</a></li>
<li>rubygems - <a class="reference external" href="http://rubygems.org/pages/download">http://rubygems.org/pages/download</a></li>
<li>bundler - <a class="reference external" href="http://gembundler.com/">http://gembundler.com/</a></li>
</ul>
<p>Do not just download these packages and install them by hand. Instead
see how other people recommend you install these packages and use them
for your particular system. The process will be different for most
versions of Linux, OSX, and definitely different for Windows.</p>
<p>I am warning you, this will be frustrating. In the business we call this
"yak shaving". Yak shaving is any activity that is mind numblingly
irritatingly boring and tedious that you have to do before you can do
something else that's more fun. You want to create cool Ruby projects,
but you can't do that until you setup a skeleton directory, but you
can't setup a skeleton directory until you install some packages, but
you can't install packages until you install package installers, and you
can't install package installers until you figure out how your system
installs software in general, and so on.</p>
<p>Struggle through this anyway. Consider it your trial-by-annoyance to get
into the programmer club. Every programmer has to do these annoying
tedious tasks before they can do something cool.</p>
</div>
<div class="section" id="using-the-skeleton">
<h2>Using The Skeleton<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#using-the-skeleton" title="Permalink to this headline">¶</a></h2>
<p>You are now done with most of your yak shaving. Whenever you want to
start a new project, just do this:</p>
<ol class="arabic simple">
<li>Make a copy of your skeleton directory. Name it after your new
project.</li>
<li>Rename (move) the NAME directory and <tt class="docutils literal"><span class="pre">NAME.rb</span></tt> file to be the name
of your project.</li>
<li>Edit your <tt class="docutils literal"><span class="pre">NAME.gemspec</span></tt> file to have all the information for your
project.</li>
<li>Rename <tt class="docutils literal"><span class="pre">test/test_NAME.rb</span></tt> to also have your project name.</li>
<li>Start coding.</li>
</ol>
</div>
<div class="section" id="required-quiz">
<h2>Required Quiz<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#required-quiz" title="Permalink to this headline">¶</a></h2>
<p>This exercise doesn't have extra credit but a quiz you should complete:</p>
<ol class="arabic simple">
<li>Read about how to use all of the things you installed.</li>
<li>Read about the <tt class="docutils literal"><span class="pre">NAME.gemspec</span></tt> file and all it has to offer.</li>
<li>Make a project and start writing some code in the <tt class="docutils literal"><span class="pre">NAME.rb</span></tt> script.</li>
<li>Put a script in the <tt class="docutils literal"><span class="pre">bin</span></tt> directory that you can run. Read about
how you can make a Ruby script that's runnable for your system.</li>
<li>Make sure the <tt class="docutils literal"><span class="pre">bin</span></tt> script you created is referenced in your
<tt class="docutils literal"><span class="pre">NAME.gemspec</span></tt> so that it gets installed.</li>
<li>Use your <tt class="docutils literal"><span class="pre">NAME.gemspec</span></tt> and <tt class="docutils literal"><span class="pre">gem</span> <span class="pre">build</span></tt> <tt class="docutils literal"><span class="pre">gem</span> <span class="pre">install</span></tt> to
install your own library and make sure it works, then use
<tt class="docutils literal"><span class="pre">gem</span> <span class="pre">uninstall</span></tt> to uninstall it.</li>
<li>Figure out how you can use Bundler to generate a skeleton directory
automatically.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    


    <a href="#top">Top of page</a>
		<div class="document" id="ex47">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-47-automated-testing">
<h1>Exercise 47: Automated Testing<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-47-automated-testing" title="Permalink to this headline">¶</a></h1>
<p>Having to type commands into your game over and over to make sure it's
working is annoying. Wouldn't it be better to write little pieces of
code that test your code? Then when you make a change, or add a new
thing to your program, you just "run your tests" and the tests make sure
things are still working. These automated tests won't catch all your
bugs, but they will cut down on the time you spend repeatedly typing and
running your code.</p>
<p>Every exercise after this one will not have a
<tt class="docutils literal"><span class="pre">What</span> <span class="pre">You</span> <span class="pre">Should</span> <span class="pre">See</span> <span class="pre">section</span></tt>, but instead it will have a
<tt class="docutils literal"><span class="pre">What</span> <span class="pre">You</span> <span class="pre">Should</span> <span class="pre">Test</span> <span class="pre">section</span></tt>. You will be writing automated tests
for all of your code starting now, and this will hopefully make you an
even better programmer.</p>
<p>I won't try to explain why you should write automated tests. I will only
say that, you are trying to be a programmer, and programmers automate
boring and tedious tasks. Testing a piece of software is definitely
boring and tedious, so you might as well write a little bit of code to
do it for you.</p>
<p>That should be all the explanation you need because your reason for
writing unit tests is to make your brain stronger. You have gone through
this book writing code to do things. Now you are going to take the next
leap and write code that knows about other code you have written. This
process of writing a test that runs some code you have written forces
you to understand clearly what you have just written. It solidifies in
your brain exactly what it does and why it works and gives you a new
level of attention to detail.</p>
<div class="section" id="writing-a-test-case">
<h2>Writing A Test Case<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#writing-a-test-case" title="Permalink to this headline">¶</a></h2>
<p>We're going to take a very simple piece of code and write one simple
test. We're going to base this little test on a new project from your
project skeleton.</p>
<p>First, make a <tt class="docutils literal"><span class="pre">ex47</span></tt> project from your project skeleton. Make sure you
do it right and rename the library and get that first
<tt class="docutils literal"><span class="pre">ex47/test/test_ex47.rb</span></tt> test file going right.</p>
<p>Next, create a simple file <tt class="docutils literal"><span class="pre">ex47/lib/ex47.rb</span></tt> where you can put the
code to test. This will be a very silly little class that we want to
test with this code in it:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Room</span>

  <span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">:paths</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
    <span class="vi">@description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="vi">@paths</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">go</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
    <span class="vi">@paths</span><span class="o">[</span><span class="n">direction</span><span class="o">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">add_paths</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
    <span class="vi">@paths</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Once you have that file, change unit test skeleton to this:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'test/unit'</span>
<span class="n">require_relative</span> <span class="s1">'../lib/ex47'</span>

<span class="k">class</span> <span class="nc">MyUnitTests</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>

  <span class="k">def</span> <span class="nf">test_room</span><span class="p">()</span>
    <span class="n">gold</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"GoldRoom"</span><span class="p">,</span> 
                    <span class="s2">"""This room has gold in it you can grab. There's a</span>
<span class="s2">                door to the north."""</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">gold</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">"GoldRoom"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">gold</span><span class="o">.</span><span class="n">paths</span><span class="p">,</span> <span class="p">{})</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_room_paths</span><span class="p">()</span>
    <span class="n">center</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Center"</span><span class="p">,</span> <span class="s2">"Test room in the center."</span><span class="p">)</span>
    <span class="n">north</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"North"</span><span class="p">,</span> <span class="s2">"Test room in the north."</span><span class="p">)</span>
    <span class="n">south</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"South"</span><span class="p">,</span> <span class="s2">"Test room in the south."</span><span class="p">)</span>

    <span class="n">center</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="ss">:north</span> <span class="o">=&gt;</span> <span class="n">north</span><span class="p">,</span> <span class="ss">:south</span> <span class="o">=&gt;</span> <span class="n">south</span><span class="p">})</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="ss">:north</span><span class="p">),</span> <span class="n">north</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="ss">:south</span><span class="p">),</span> <span class="n">south</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_map</span><span class="p">()</span>
    <span class="n">start</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Start"</span><span class="p">,</span> <span class="s2">"You can go west and down a hole."</span><span class="p">)</span>
    <span class="n">west</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Trees"</span><span class="p">,</span> <span class="s2">"There are trees here, you can go east."</span><span class="p">)</span>
    <span class="n">down</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Dungeon"</span><span class="p">,</span> <span class="s2">"It's dark down here, you can go up."</span><span class="p">)</span>

    <span class="n">start</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="ss">:west</span> <span class="o">=&gt;</span> <span class="n">west</span><span class="p">,</span> <span class="ss">:down</span> <span class="o">=&gt;</span> <span class="n">down</span><span class="p">})</span>
    <span class="n">west</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="ss">:east</span> <span class="o">=&gt;</span> <span class="n">start</span><span class="p">})</span>
    <span class="n">down</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="ss">:up</span> <span class="o">=&gt;</span> <span class="n">start</span><span class="p">})</span>

    <span class="n">assert_equal</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="ss">:west</span><span class="p">),</span> <span class="n">west</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="ss">:west</span><span class="p">)</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="ss">:east</span><span class="p">),</span> <span class="n">start</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="ss">:down</span><span class="p">)</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="ss">:up</span><span class="p">),</span> <span class="n">start</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>This file requires the <tt class="docutils literal"><span class="pre">Room</span></tt> class you made in the <tt class="docutils literal"><span class="pre">lib/ex47.rb</span></tt>
file so that you can do tests on it. There are then a set of tests that
are functions starting with <tt class="docutils literal"><span class="pre">test_</span></tt>. Inside each test case there's a
bit of code that makes a <tt class="docutils literal"><span class="pre">Room</span></tt> or a set of <tt class="docutils literal"><span class="pre">Rooms</span></tt>, and then makes
sure the rooms work the way you expect them to work. It tests out the
basic room features, then the paths, then tries out a whole map.</p>
<p>The important functions here are <tt class="docutils literal"><span class="pre">assert_equal</span></tt> which makes sure that
variables you have set or paths you have built in a <tt class="docutils literal"><span class="pre">Room</span></tt> are
actually what you think they are. If you get the wrong result, then
Ruby's <tt class="docutils literal"><span class="pre">Test::Unit</span></tt> module will print out an error message so you can
go figure it out.</p>
</div>
<div class="section" id="testing-guidelines">
<h2>Testing Guidelines<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#testing-guidelines" title="Permalink to this headline">¶</a></h2>
<p>Follow these general loose set of guidelines when making your tests:</p>
<ol class="arabic simple">
<li>Test files go in <tt class="docutils literal"><span class="pre">test/</span></tt> and are named <tt class="docutils literal"><span class="pre">test_NAME.rb</span></tt>. This keeps
your tests from clashing with your other code.</li>
<li>Write one test file for each module or class you make.</li>
<li>Keep your test cases (functions) short, but do not worry if they are
a bit messy. Test cases are usually kind of messy.</li>
<li>Even though test cases are messy, try to keep them clean and remove
any repetitive code you can. Create helper functions that get rid of
duplicate code. You will thank me later when you make a change and
then have to change your tests. Duplicated code will make changing
your tests more difficult.</li>
<li>Finally, do not get too attached to your tests. Sometimes, the best
way to redesign something is to just delete it, the tests, and start
over.</li>
</ol>
</div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-see" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby test_ex47.rb
<span class="go">Loaded suite test_ex47</span>
<span class="go">Started</span>
<span class="go">...</span>
<span class="go">Finished in 0.000353 seconds.</span>

<span class="go">3 tests, 7 assertions, 0 failures, 0 errors, 0 skips</span>

<span class="go">Test run options: --seed 63537</span>
</pre></div>
</div>
<p>That's what you should see if everything is working right. Try causing
an error to see what that looks like and then fix it.</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Go read about <tt class="docutils literal"><span class="pre">Test::Unit</span></tt> more, and also read about alternatives.</li>
<li>Learn about <tt class="docutils literal"><span class="pre">Rspec</span></tt> and see if you like it better.</li>
<li>Make your Room more advanced, and then use it to rebuild your game
yet again but this time, unit test as you go.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    <a href="#top">Top of page</a>
		<div class="document" id="ex48">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-48-advanced-user-input">
<h1>Exercise 48: Advanced User Input<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-48-advanced-user-input" title="Permalink to this headline">¶</a></h1>
<p>Your game probably was coming along great, but I bet how you handled
what the user typed was becoming tedious. Each room needed its own very
exact set of phrases that only worked if your player typed them
perfectly. What you'd rather have is a device that lets users type
phrases in various ways. For example, we'd like to have all of these
phrases work the same:</p>
<ul class="simple">
<li>open door</li>
<li>open the door</li>
<li>go THROUGH the door</li>
<li>punch bear</li>
<li>Punch The Bear in the FACE</li>
</ul>
<p>It should be alright for a user to write something a lot like English
for your game, and have your game figure out what it means. To do this,
we're going to write a library that does just that. This module will
have a few classes that work together to handle use input and convert it
into something your game can work with reliably.</p>
<p>In a simple version of English the following elements:</p>
<ul class="simple">
<li>Words separated by spaces.</li>
<li>Sentences composed of the words.</li>
<li>Grammar that structures the sentences into meaning.</li>
</ul>
<p>That means the best place to start is figuring out how to get words from
the user and what kinds of words those are.</p>
<div class="section" id="our-game-lexicon">
<h2>Our Game Lexicon<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#our-game-lexicon" title="Permalink to this headline">¶</a></h2>
<p>In our game we have to create a Lexicon of words:</p>
<ul class="simple">
<li>Direction words: north, south, east, west, down, up, left, right,
back.</li>
<li>Verbs: go, stop, kill, eat.</li>
<li>Stop words: the, in, of, from, at, it</li>
<li>Nouns: door, bear, princess, cabinet.</li>
<li>Numbers: any string of 0 through 9 characters.</li>
</ul>
<p>When we get to nouns, we have a slight problem since each room could
have a different set of Nouns, but let's just pick this small set to
work with for now and improve it later.</p>
</div>
<div class="section" id="breaking-up-a-sentence">
<h2>Breaking Up A Sentence<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#breaking-up-a-sentence" title="Permalink to this headline">¶</a></h2>
<p>Once we have our lexicon of words we need a way to break up sentences so
that we can figure out what they are. In our case, we've defined a
sentence as "words separated by spaces", so we really just need to do
this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">stuff</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">stuff</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</pre></div>
</div>
<p>That's really all we'll worry about for now, but this will work really
well for quite a while.</p>
</div>
<div class="section" id="lexicon-structs">
<h2>Lexicon Structs<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#lexicon-structs" title="Permalink to this headline">¶</a></h2>
<p>Once we know how to break up a sentence into words, we just have to go
through the list of words and figure out what "type" they are. To do
that we're going to use a handy little Ruby structure called a "struct".
A struct is a convenient way to bundle a number of attributes together,
using accessor methods, without having to write an explicit class. It's
created like this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="no">Pair</span> <span class="o">=</span> <span class="no">Struct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:token</span><span class="p">,</span> <span class="ss">:word</span><span class="p">)</span>
<span class="n">first_word</span> <span class="o">=</span> <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"direction"</span><span class="p">,</span> <span class="s2">"north"</span><span class="p">)</span>
<span class="n">second_word</span> <span class="o">=</span> <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"verb"</span><span class="p">,</span> <span class="s2">"go"</span><span class="p">)</span>
<span class="n">sentence</span> <span class="o">=</span> <span class="o">[</span><span class="n">first_word</span><span class="p">,</span> <span class="n">second_word</span><span class="o">]</span>
</pre></div>
</div>
<p>This creates a pair of (TOKEN, WORD) that lets you look at the word and
do things with it.</p>
<p>This is just an example, but that's basically the end result. You want
to take input from the user, carve it into words with split, then
analyze those words to identify their type, and finally make a sentence
out of them.</p>
</div>
<div class="section" id="scanning-input">
<h2>Scanning Input<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#scanning-input" title="Permalink to this headline">¶</a></h2>
<p>Now you are ready to write your scanner. This scanner will take a string
of input from a user and return a sentence that's composed of a list of
structs with the (TOKEN, WORD) pairings. If a word isn't part of the
lexicon then it should still return the WORD, but set the TOKEN to an
error token. These error tokens will tell the user they messed up.</p>
<p>Here's where it gets fun. I'm not going to tell you how to do this.
Instead I'm going to write a unit test und you are going to write the
scanner so that the unit test works.</p>
</div>
<div class="section" id="exceptions-and-numbers">
<h2>Exceptions And Numbers<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exceptions-and-numbers" title="Permalink to this headline">¶</a></h2>
<p>There is one tiny thing I will help you with first, and that's
converting numbers. In order to do this though, we're going to cheat and
use exceptions. An exception is an error that you get from some function
you may have run. What happens is your function "raises" an exception
when it encounters an error, then you have to handle that exception. For
example, if you type this into IRB:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">ruby-1.9.2-p180 :001 &gt; Integer("hell")</span>
<span class="go">ArgumentError: invalid value for Integer(): "hell"</span>
<span class="go">    from (irb):1:in `Integer'</span>
<span class="go">    from (irb):1</span>
<span class="go">    from /home/rob/.rvm/rubies/ruby-1.9.2-p180/bin/irb:16:in `&lt;main&gt;'</span>
</pre></div>
</div>
<p>That <tt class="docutils literal"><span class="pre">ArgumentError</span></tt> is an exception that the <tt class="docutils literal"><span class="pre">Integer()</span></tt> function
threw because what you handed <tt class="docutils literal"><span class="pre">Integer()</span></tt> is not a number. The
<tt class="docutils literal"><span class="pre">Integer()</span></tt> function could have returned a value to tell you it had an
error, but since it only returns numbers, it'd have a hard time doing
that. It can't return -1 since that's a number. Instead of trying to
figure out what to return when there's an error, the <tt class="docutils literal"><span class="pre">Integer()</span></tt>
function raises the <tt class="docutils literal"><span class="pre">TypeError</span></tt> exception and you deal with it.</p>
<p>You deal with an exception by using the <tt class="docutils literal"><span class="pre">begin</span></tt> and <tt class="docutils literal"><span class="pre">rescue</span></tt>
keywords:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="k">def</span> <span class="nf">convert_number</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
  <span class="k">begin</span>
    <span class="nb">Integer</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
  <span class="k">rescue</span> <span class="no">ArgumentError</span>
    <span class="kp">nil</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>You put the code you want to "begin" inside the <tt class="docutils literal"><span class="pre">begin</span></tt> block, and
then you put the code to run for the error inside the <tt class="docutils literal"><span class="pre">rescue</span></tt>. In
this case, we want to call <tt class="docutils literal"><span class="pre">Integer()</span></tt> on something that might be a
number. If that has an error, then we "rescue" it and return <tt class="docutils literal"><span class="pre">nil</span></tt>
instead.</p>
<p>In your scanner that you write, you should use this function to test if
something is a number. You should also do it as the last thing you check
for before declaring that word an error word.</p>
</div>
<div class="section" id="what-you-should-test">
<h2>What You Should Test<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-test" title="Permalink to this headline">¶</a></h2>
<p>Here are the files <tt class="docutils literal"><span class="pre">test/test_lexicon.rb</span></tt> that you should use:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'test/unit'</span>
<span class="n">require_relative</span> <span class="s2">"../lib/lexicon"</span>

<span class="k">class</span> <span class="nc">LexiconTests</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>

  <span class="no">Pair</span> <span class="o">=</span> <span class="no">Lexicon</span><span class="o">::</span><span class="no">Pair</span>
  <span class="vc">@@lexicon</span> <span class="o">=</span> <span class="no">Lexicon</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">test_directions</span><span class="p">()</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:direction</span><span class="p">,</span> <span class="s1">'north'</span><span class="p">)</span><span class="o">]</span><span class="p">,</span> <span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"north"</span><span class="p">))</span>
    <span class="n">result</span> <span class="o">=</span> <span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"north south east"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:direction</span><span class="p">,</span> <span class="s1">'north'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:direction</span><span class="p">,</span> <span class="s1">'south'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:direction</span><span class="p">,</span> <span class="s1">'east'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_verbs</span><span class="p">()</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"go"</span><span class="p">),</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:verb</span><span class="p">,</span> <span class="s1">'go'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"go kill eat"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:verb</span><span class="p">,</span> <span class="s1">'go'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:verb</span><span class="p">,</span> <span class="s1">'kill'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:verb</span><span class="p">,</span> <span class="s1">'eat'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_stops</span><span class="p">()</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"the"</span><span class="p">),</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:stop</span><span class="p">,</span> <span class="s1">'the'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"the in of"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:stop</span><span class="p">,</span> <span class="s1">'the'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:stop</span><span class="p">,</span> <span class="s1">'in'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:stop</span><span class="p">,</span> <span class="s1">'of'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_nouns</span><span class="p">()</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"bear"</span><span class="p">),</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:noun</span><span class="p">,</span> <span class="s1">'bear'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"bear princess"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:noun</span><span class="p">,</span> <span class="s1">'bear'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:noun</span><span class="p">,</span> <span class="s1">'princess'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_numbers</span><span class="p">()</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"1234"</span><span class="p">),</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:number</span><span class="p">,</span> <span class="mi">1234</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"3 91234"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:number</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:number</span><span class="p">,</span> <span class="mi">91234</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_errors</span><span class="p">()</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"ASDFADFASDF"</span><span class="p">),</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:error</span><span class="p">,</span> <span class="s1">'ASDFADFASDF'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="vc">@@lexicon</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s2">"bear IAS princess"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="o">[</span><span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:noun</span><span class="p">,</span> <span class="s1">'bear'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:error</span><span class="p">,</span> <span class="s1">'IAS'</span><span class="p">),</span>
                 <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:noun</span><span class="p">,</span> <span class="s1">'princess'</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Remember that you will want to make a new project with your skeleton,
type in this test case (do not copy-paste!) and write your scanner so
that the test runs. Focus on the details and make sure everything works
right.</p>
</div>
<div class="section" id="design-hints">
<h2>Design Hints<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#design-hints" title="Permalink to this headline">¶</a></h2>
<p>Focus on getting one test working at a time. Keep this simple and just
put all the words in your lexicon in lists that are in your
<tt class="docutils literal"><span class="pre">lexicon.rb</span></tt> file. Do not modify the input list of words, but instead
make your own new list with your lexicon pairs in it. Also, use the
<tt class="docutils literal"><span class="pre">include?</span></tt> method with these lexicon arrays to check if a word is in
the lexicon.</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Improve the unit test to make sure you cover more of the lexicon.</li>
<li>Add to the lexicon and then update the unit test.</li>
<li>Make your scanner handles user input in any capitalization and case.
Update the test to make sure this actually works.</li>
<li>Find another way to convert the number.</li>
<li>My solution was 37 lines long. Is yours longer? Shorter?</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex49">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-49-making-sentences">
<h1>Exercise 49: Making Sentences<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-49-making-sentences" title="Permalink to this headline">¶</a></h1>
<p>What we should be able to get from our little game lexicon scanner is a
list that looks like this (yours will be formatted differently):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">ruby-1.9.2-p180 :003 &gt; print Lexicon.scan("go north")</span>
<span class="go">[#&lt;struct Lexicon::Pair token=:verb, word="go"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:direction, word="north"&gt;] =&gt; nil</span>
<span class="go">ruby-1.9.2-p180 :004 &gt; print Lexicon.scan("kill the princess")</span>
<span class="go">[#&lt;struct Lexicon::Pair token=:verb, word="kill"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:stop, word="the"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:noun, word="princess"&gt;] =&gt; nil</span>
<span class="go">ruby-1.9.2-p180 :005 &gt; print Lexicon.scan("eat the bear")</span>
<span class="go">[#&lt;struct Lexicon::Pair token=:verb, word="eat"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:stop, word="the"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:noun, word="bear"&gt;] =&gt; nil</span>
<span class="go">ruby-1.9.2-p180 :006 &gt; print Lexicon.scan("open the door and smack the bear in the nose")</span>
<span class="go">[#&lt;struct Lexicon::Pair token=:error, word="open"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:stop, word="the"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:noun, word="door"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:error, word="and"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:error, word="smack"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:stop, word="the"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:noun, word="bear"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:stop, word="in"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:stop, word="the"&gt;,</span>
<span class="go">    #&lt;struct Lexicon::Pair token=:error, word="nose"&gt;] =&gt; nil</span>
<span class="go">ruby-1.9.2-p180 :007 &gt;</span>
</pre></div>
</div>
<p>Now let us turn this into something the game can work with, which would
be some kind of Sentence class.</p>
<p>If you remember grade school, a sentence can be a simple structure like:</p>
<blockquote>
<div>Subject Verb Object</div></blockquote>
<p>Obviously it gets more complex than that, and you probably did many days
of annoying sentence graphs for English class. What we want is to turn
the above lists of structs into a nice Sentence object that has subject,
verb, and object.</p>
<div class="section" id="match-and-peek">
<h2>Match And Peek<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#match-and-peek" title="Permalink to this headline">¶</a></h2>
<p>To do this we need four tools:</p>
<ol class="arabic simple">
<li>A way to loop through the list of structs. That's easy.</li>
<li>A way to "match" different types of structs that we expect in our
Subject Verb Object setup.</li>
<li>A way to "peek" at a potential struct so we can make some decisions.</li>
<li>A way to "skip" things we do not care about, like stop words.</li>
<li>We use the peek function to say look at the next element in our
struct array, and then match to take one off and work with it. Let's
take a look at a first peek function:</li>
</ol>
<div class="highlight-ruby"><div class="highlight"><pre><span class="k">def</span> <span class="nf">peek</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
  <span class="k">begin</span>
    <span class="n">word_list</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">token</span>
  <span class="k">rescue</span>
    <span class="kp">nil</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Very easy. Now for the match function:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">expecting</span><span class="p">)</span>
  <span class="k">begin</span>
    <span class="n">word</span> <span class="o">=</span> <span class="n">word_list</span><span class="o">.</span><span class="n">shift</span>

    <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">token</span> <span class="o">==</span> <span class="n">expecting</span>
      <span class="n">word</span>
    <span class="k">else</span>
      <span class="kp">nil</span>
    <span class="k">end</span>
  <span class="k">rescue</span>
     <span class="kp">nil</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Again, very easy, and finally our skip function:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="k">def</span> <span class="nf">skip</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">word_type</span><span class="p">)</span>
  <span class="k">while</span> <span class="n">peek</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span> <span class="o">==</span> <span class="n">word_type</span>
    <span class="n">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">word_type</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>By now you should be able to figure out what these do. Make sure you
understand them.</p>
</div>
<div class="section" id="the-sentence-grammar">
<h2>The Sentence Grammar<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#the-sentence-grammar" title="Permalink to this headline">¶</a></h2>
<p>With our tools we can now begin to build Sentence objects from our array
of structs. What we do is a process of:</p>
<ol class="arabic simple">
<li>Identify the next word with <tt class="docutils literal"><span class="pre">peek</span></tt>.</li>
<li>If that word fits in our grammar, we call a function to handle that
part of the grammar, say <tt class="docutils literal"><span class="pre">parse_subject</span></tt>.</li>
<li>If it doesn't, we <tt class="docutils literal"><span class="pre">raise</span></tt> an error, which you will learn about in
this lesson.</li>
<li>When we're all done, we should have a Sentence object to work with in
our game.</li>
</ol>
<p>The best way to demonstrate this is to give you the code to read, but
here's where this exercise is different from the previous one: You will
write the test for the parser code I give you. Rather than giving you
the test so you can write the code, I will give you the code, and you
have to write the test.</p>
<p>Here's the code that I wrote for parsing simple sentences using the
<tt class="docutils literal"><span class="pre">ex48</span></tt> Lexicon class:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ParserError</span> <span class="o">&lt;</span> <span class="no">Exception</span>

<span class="k">end</span>

<span class="k">class</span> <span class="nc">Sentence</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">verb</span><span class="p">,</span> <span class="n">object</span><span class="p">)</span>
    <span class="c1"># remember we take Pair.new(:noun, "princess") structs and convert them</span>
    <span class="vi">@subject</span> <span class="o">=</span> <span class="n">subject</span><span class="o">.</span><span class="n">word</span>
    <span class="vi">@verb</span> <span class="o">=</span> <span class="n">verb</span><span class="o">.</span><span class="n">word</span>
    <span class="vi">@object</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="n">word</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="k">module</span> <span class="nn">Parser</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">peek</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
    <span class="k">begin</span>
      <span class="n">word_list</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">token</span>
    <span class="k">rescue</span>
      <span class="kp">nil</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">expecting</span><span class="p">)</span>
    <span class="k">begin</span>
      <span class="n">word</span> <span class="o">=</span> <span class="n">word_list</span><span class="o">.</span><span class="n">shift</span>
      <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">token</span> <span class="o">==</span> <span class="n">expecting</span>
        <span class="n">word</span>
      <span class="k">else</span>
        <span class="kp">nil</span>
      <span class="k">end</span>
    <span class="k">rescue</span>
      <span class="kp">nil</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">skip</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">peek</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span> <span class="o">==</span> <span class="n">token</span>
      <span class="n">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">parse_verb</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
    <span class="n">skip</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="ss">:stop</span><span class="p">)</span>
  
    <span class="k">if</span> <span class="n">peek</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span> <span class="o">==</span> <span class="ss">:verb</span>
      <span class="k">return</span> <span class="n">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="ss">:verb</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="k">raise</span> <span class="no">ParserError</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Expected a verb next."</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">parse_object</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
    <span class="n">skip</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="ss">:stop</span><span class="p">)</span>
    <span class="n">next_word</span> <span class="o">=</span> <span class="n">peek</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
  
    <span class="k">if</span> <span class="n">next_word</span> <span class="o">==</span> <span class="ss">:noun</span>
      <span class="k">return</span> <span class="n">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="ss">:noun</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="k">if</span> <span class="n">next_word</span> <span class="o">==</span> <span class="ss">:direction</span>
      <span class="k">return</span> <span class="n">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="ss">:direction</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="k">raise</span> <span class="no">ParserError</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Expected a noun or direction next."</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">parse_subject</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">subj</span><span class="p">)</span>
    <span class="n">verb</span> <span class="o">=</span> <span class="n">parse_verb</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">parse_object</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
  
    <span class="k">return</span> <span class="no">Sentence</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">subj</span><span class="p">,</span> <span class="n">verb</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">parse_sentence</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
    <span class="n">skip</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="ss">:stop</span><span class="p">)</span>
  
    <span class="n">start</span> <span class="o">=</span> <span class="n">peek</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
  
    <span class="k">if</span> <span class="n">start</span> <span class="o">==</span> <span class="ss">:noun</span>
      <span class="n">subj</span> <span class="o">=</span> <span class="n">match</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="ss">:noun</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">parse_subject</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="n">subj</span><span class="p">)</span>
    <span class="k">elsif</span> <span class="n">start</span> <span class="o">==</span> <span class="ss">:verb</span>
      <span class="c1"># assume the subject is the player then</span>
      <span class="k">return</span> <span class="n">parse_subject</span><span class="p">(</span><span class="n">word_list</span><span class="p">,</span> <span class="no">Pair</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:noun</span><span class="p">,</span> <span class="s2">"player"</span><span class="p">))</span>
    <span class="k">else</span>
      <span class="k">raise</span> <span class="no">ParserError</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Must start with subject, object, or verb not: </span><span class="si">#{</span><span class="n">start</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
</div>
<div class="section" id="a-word-on-modules">
<h2>A Word On Modules<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#a-word-on-modules" title="Permalink to this headline">¶</a></h2>
<p>This code uses something in Ruby called a "module" named <tt class="docutils literal"><span class="pre">Parser</span></tt>.  A module
(created with <tt class="docutils literal"><span class="pre">module</span> <span class="pre">Parser</span></tt>) is a way to package up the functions so that
they don't conflict with other parts of Ruby.  In Ruby 1.9 there was a change
to the testing system that created a <tt class="docutils literal"><span class="pre">skip</span></tt> method which conflicted with the
<tt class="docutils literal"><span class="pre">Parser.skip</span></tt> method.  The solution was to do what you see here and wrap all
the functions in this module.</p>
<p>You use a module by simply calling functions on it with the <tt class="docutils literal"><span class="pre">.</span></tt> operator,
similar to an object you've made.  In this case if you wanted to call
the <tt class="docutils literal"><span class="pre">parse_verb()</span></tt> function you'd write <tt class="docutils literal"><span class="pre">Parser.parse_verb()</span></tt>.  You'll
see a demonstration of this when I give you a sample unit test.</p>
</div>
<div class="section" id="a-word-on-exceptions">
<h2>A Word On Exceptions<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#a-word-on-exceptions" title="Permalink to this headline">¶</a></h2>
<p>You briefly learned about exceptions, but not how to raise them. This
code demonstrates how to do that with the <tt class="docutils literal"><span class="pre">ParserError</span></tt> at the top.
Notice that it uses classes to give it the type of <tt class="docutils literal"><span class="pre">Exception</span></tt>. Also
notice the use of <tt class="docutils literal"><span class="pre">raise</span></tt> keyword to raise the exception.</p>
<p>In your tests, you will want to work with these exceptions, which I'll
show you how to do.</p>
</div>
<div class="section" id="what-you-should-test">
<h2>What You Should Test<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-you-should-test" title="Permalink to this headline">¶</a></h2>
<p>For Exercise 49 is write a complete test that confirms everything in
this code is working. That includes making exceptions happen by giving
it bad sentences.  Here is a starter sample so you can see how you would
call a function in a module:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'test/unit'</span>
<span class="n">require_relative</span> <span class="s1">'../lib/ex49'</span>

<span class="k">class</span> <span class="nc">ParserTests</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>

    <span class="k">def</span> <span class="nf">test_parse_verb</span><span class="p">()</span>
        <span class="c1"># WARNING: THIS FAILS ON PURPOSE SEE THE BOOK</span>
        <span class="no">Parser</span><span class="o">.</span><span class="n">parse_verb</span><span class="p">(</span><span class="o">[</span><span class="kp">false</span><span class="o">]</span><span class="p">)</span>
    <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>You can see I make the basic test class, then create a <tt class="docutils literal"><span class="pre">test_parse_verb</span></tt>
to test out the <tt class="docutils literal"><span class="pre">Parser.parse_verb</span></tt> function.  I don't want to do
the work for you, so I've made this fail <em>on purpose</em>.  This shows
you how to use the <tt class="docutils literal"><span class="pre">Parser</span></tt> module and call functions on it, and you
should work on making this test actually test all the code.</p>
<p>Check for an exception by using the function <tt class="docutils literal"><span class="pre">assert_raise</span></tt> from the
Test::Unit documentation. Learn how to use this so you can write a test
that is expected to fail, which is very important in testing. Learn
about this function (and others) by reading the Test::Unit
documentation.</p>
<p>When you are done, you should know how this bit of code works, and how
to write a test for other people's code even if they do not want you to.
Trust me, it's a very handy skill to have.</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Change the <tt class="docutils literal"><span class="pre">parse_</span></tt> methods and try to put them into a class rather
than be just methods. Which design do you like better?</li>
<li>Make the parser more error resistant so that you can avoid annoying
your users if they type words your lexicon doesn't understand.</li>
<li>Improve the grammar by handling more things like numbers.</li>
<li>Think about how you might use this Sentence class in your game to do
more fun things with a user's input.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex50">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-50-your-first-website">
<h1>Exercise 50: Your First Website<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-50-your-first-website" title="Permalink to this headline">¶</a></h1>
<p>These final three exercises will be very hard and you should take your
time with them. In this first one you'll build a simple web version of
one of your games. Before you attempt this exercise you must have
completed Exercise 46 successfully and have a working <strong>RubyGems</strong>
installed such that you can install packages and know how to make a
skeleton project directory. If you don't remember how to do this, go
back to Exercise 46 and do it all over again.</p>
<div class="section" id="installing-sinatra">
<h2>Installing Sinatra<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#installing-sinatra" title="Permalink to this headline">¶</a></h2>
<p>Before creating your first web application, you'll first need to install
the "web framework" called <strong>Sinatra</strong>. The term "framework" generally
means "some package that makes it easier for me to do something". In the
world of web applications, people create "web frameworks" to compensate
for the difficult problems they've encountered when making their own
sites. They share these common solutions in the form of a package you
can download to bootstrap your own projects.</p>
<p>In our case, we'll be using the Sinatra framework, but there are many,
many, many others you can choose from. For now, learn Sinatra then
branch out to another one when you're ready (or just keep using Sinatra
since it's good enough).</p>
<p>Using <tt class="docutils literal"><span class="pre">gem</span></tt> install Sinatra:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> gem install sinatra
<span class="go">Fetching: tilt-1.3.2.gem (100%)</span>
<span class="go">Fetching: sinatra-1.2.6.gem (100%)</span>
<span class="go">Successfully installed tilt-1.3.2</span>
<span class="go">Successfully installed sinatra-1.2.6</span>
<span class="go">2 gems installed</span>
<span class="go">Installing ri documentation for tilt-1.3.2...</span>
<span class="go">Installing ri documentation for sinatra-1.2.6...</span>
<span class="go">Installing RDoc documentation for tilt-1.3.2...</span>
<span class="go">Installing RDoc documentation for sinatra-1.2.6...</span>
</pre></div>
</div>
</div>
<div class="section" id="make-a-simple-hello-world-project">
<h2>Make A Simple "Hello World" Project<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#make-a-simple-hello-world-project" title="Permalink to this headline">¶</a></h2>
<p>Now you're going to make an initial very simple "Hello World" web
application and project directory using Sinatra. First, make your
project directory:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>projects
<span class="gp">$</span> bundle gem gothonweb
</pre></div>
</div>
<p>You'll be taking the game from Exercise 42 and making it into a web
application, so that's why you're calling it <tt class="docutils literal"><span class="pre">gothonweb</span></tt>. Before you
do that, we need to create the most basic Sinatra application possible.
Put the following code into <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt>:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">require_relative</span> <span class="s2">"gothonweb/version"</span>
<span class="nb">require</span> <span class="s2">"sinatra"</span>

<span class="k">module</span> <span class="nn">Gothonweb</span>
  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="s2">"Hello, World!"</span>
    <span class="k">return</span> <span class="n">greeting</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Then run the application like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby lib/gothonweb.rb
<span class="go">== Sinatra/1.2.6 has taken the stage on 4567 for development with backup from WEBrick</span>
<span class="go">[2011-07-18 11:27:07] INFO  WEBrick 1.3.1</span>
<span class="go">[2011-07-18 11:27:07] INFO  ruby 1.9.2 (2011-02-18) [x86_64-linux]</span>
<span class="go">[2011-07-18 11:27:07] INFO  WEBrick::HTTPServer#start: pid=6599 port=4567</span>
</pre></div>
</div>
<p>Finally, use your web browser and go to the URL
<tt class="docutils literal"><span class="pre">http://localhost:4567/</span></tt> and you should see two things. First, in your
browser you'll see <tt class="docutils literal"><span class="pre">Hello,</span> <span class="pre">World!</span></tt>. Second, you'll see your terminal
with new output like this:</p>
<div class="highlight-python"><pre>127.0.0.1 - - [18/Jul/2011 11:29:10] "GET / HTTP/1.1" 200 12 0.0015
localhost - - [18/Jul/2011:11:29:10 EDT] "GET / HTTP/1.1" 200 12
- -&gt; /
127.0.0.1 - - [18/Jul/2011 11:29:10] "GET /favicon.ico HTTP/1.1" 404 447 0.0008
localhost - - [18/Jul/2011:11:29:10 EDT] "GET /favicon.ico HTTP/1.1" 404 447
- -&gt; /favicon.ico</pre>
</div>
<p>Those are log messages that Sinatra prints out so you can see that the
server is working, and what the browser is doing behind the scenes. The
log messages help you debug and figure out when you have problems. For
example, it's saying that your browser tried to get <tt class="docutils literal"><span class="pre">/favicon.ico</span></tt> but
that file didn't exist so it returned <tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt> status code.</p>
<p>I haven't explained the way any of this web stuff works yet, because I
want to get you setup and ready to roll so that I can explain it better
in the next two exercises. To accomplish this, I'll have you break your
Sinatra application in various ways and then restructure it so that you
know how it's setup.</p>
</div>
<div class="section" id="what-s-going-on">
<h2>What's Going On?<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#what-s-going-on" title="Permalink to this headline">¶</a></h2>
<p>Here's what's happening when your browser hits your application:</p>
<ol class="arabic simple">
<li>Your browser makes a network connection to your own computer, which
is called <tt class="docutils literal"><span class="pre">localhost</span></tt> and is a standard way of saying "whatever my
own computer is called on the network". It also uses <tt class="docutils literal"><span class="pre">port</span> <span class="pre">4567</span></tt>.</li>
<li>Once it connects, it makes an HTTP request to the
<tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> application and asks for the <tt class="docutils literal"><span class="pre">/</span></tt> URL, which is
commonly the first URL on any website.</li>
<li>Inside <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> you've got blocks of code that map to
URLs. The only one we have is the <tt class="docutils literal"><span class="pre">'/'</span></tt> mapping. This means that
whenever someone goes to <tt class="docutils literal"><span class="pre">/</span></tt> with a browser, Sinatra will find the
code block to handle the request.</li>
<li>Sinatra calls the matching block, which simply returns a string for
what Sinatra should send to the browser.</li>
<li>Finally, Sinatra has handled the request and sends this response to
the browser which is what you are seeing.</li>
</ol>
<p>Make sure you really understand this. Draw up a diagram of how this
information flows from your browser, to Sinatra, then to the <tt class="docutils literal"><span class="pre">/</span></tt> block
and back to your browser.</p>
</div>
<div class="section" id="fixing-errors">
<h2>Fixing Errors<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#fixing-errors" title="Permalink to this headline">¶</a></h2>
<p>First, delete line 6 where you assign the <tt class="docutils literal"><span class="pre">greeting</span></tt> variable, then
hit refresh in your browser. You should see an error page now that gives
you lots of information on how your application just exploded. You know
that the variable <tt class="docutils literal"><span class="pre">greeting</span></tt> is now missing, but Sinatra gives you
this nice error page to track down exactly where. Do each of the
following with this page:</p>
<ol class="arabic simple">
<li>Look at the <tt class="docutils literal"><span class="pre">sinatra.error</span></tt> variable.</li>
<li>Look at the <tt class="docutils literal"><span class="pre">REQUEST_</span></tt> variables and see if they match anything
you're already familiar with. This is information that your web
browser is sending to your gothonweb application. You normally don't
even know that it's sending this stuff, so now you get to see what it
does.</li>
</ol>
</div>
<div class="section" id="create-basic-templates">
<h2>Create Basic Templates<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#create-basic-templates" title="Permalink to this headline">¶</a></h2>
<p>You can break your Sinatra application, but did you notice that "Hello
World" isn't a very good HTML page? This is a web application, and as
such it needs a proper HTML response. To do that you will create a
simple template that says "Hello World" in a big green font.</p>
<p>The first step is to create a <tt class="docutils literal"><span class="pre">lib/views/index.erb</span></tt> file that looks
like this:</p>
<div class="highlight-erb"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">&lt;html&gt;</span>
<span class="x">  &lt;head&gt;</span>
<span class="x">    &lt;title&gt;Gothons Of Planet Percal #25&lt;/title&gt;</span>
<span class="x">  &lt;/head&gt;</span>
<span class="x">  &lt;body&gt;</span>

<span class="x">    </span><span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">greeting</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">      &lt;p&gt;I just wanted to say &lt;em style="color: green; font-size: 2em;"&gt;</span><span class="cp">&lt;%=</span> <span class="n">greeting</span> <span class="cp">%&gt;</span><span class="x">&lt;/em&gt;.</span>
<span class="x">    </span><span class="cp">&lt;%</span> <span class="k">else</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">      &lt;em&gt;Hello&lt;/em&gt;, world!</span>
<span class="x">    </span><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>

<span class="x">  &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>What is a <tt class="docutils literal"><span class="pre">.erb</span></tt> file? ERB stands for Embedded Ruby.
<tt class="docutils literal"><span class="pre">.erb</span></tt> files are HTML with bits of Ruby code embedded within. If you
know what HTML is then this should look fairly familiar. If not,
research HTML and try writing a few web pages by hand so you know how it
works. Since this is an <tt class="docutils literal"><span class="pre">erb</span></tt> template, Sinatra will fill in "holes"
in the text depending on variables you pass in to the template. Every
place you see <tt class="docutils literal"><span class="pre">&lt;%=</span> <span class="pre">greeting</span> <span class="pre">%&gt;</span></tt> will be a variable you'll pass to the
template that alters its contents.</p>
<p>To make your <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> script do this, you need to add some
code to tell Sinatra where to load the template and to render it. Take
that file and change it like this:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">require_relative</span> <span class="s2">"gothonweb/version"</span>
<span class="nb">require</span> <span class="s2">"sinatra"</span>
<span class="nb">require</span> <span class="s2">"erb"</span>

<span class="k">module</span> <span class="nn">Gothonweb</span>
  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="s2">"Hello, World!"</span>
    <span class="n">erb</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:greeting</span> <span class="o">=&gt;</span> <span class="n">greeting</span><span class="p">}</span> 
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Pay close attention to how I changed the last line of the <tt class="docutils literal"><span class="pre">/</span></tt> block so
it calls <tt class="docutils literal"><span class="pre">erb</span></tt> passing in your greeting variable.</p>
<p>Once you have that in place, reload the web page in your browser and you
should see a different message in green. You should also be able to do a
View Source on the page in your browser to see that it is valid HTML.</p>
<p>This may have flown by you very fast, so let me explain how a template
works:</p>
<ol class="arabic simple">
<li>In your <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> you've added a new <tt class="docutils literal"><span class="pre">erb</span></tt> method call.</li>
<li>The <tt class="docutils literal"><span class="pre">erb</span></tt> method knows how to load <tt class="docutils literal"><span class="pre">.erb</span></tt> files out of the
<tt class="docutils literal"><span class="pre">lib/views/</span></tt> directory. It knows which file to grab (<tt class="docutils literal"><span class="pre">index.erb</span></tt>
in this case) because you pass it as a parameter
(<tt class="docutils literal"><span class="pre">erb</span> <span class="pre">:index</span> <span class="pre">...</span></tt>).</li>
<li>Now, when the browser hits <tt class="docutils literal"><span class="pre">/</span></tt> and <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> matches and
executes the <tt class="docutils literal"><span class="pre">get</span> <span class="pre">'/'</span> <span class="pre">do</span></tt> block, instead of just returning the
string <tt class="docutils literal"><span class="pre">greeting</span></tt>, it calls <tt class="docutils literal"><span class="pre">erb</span></tt> and pass <tt class="docutils literal"><span class="pre">greeting</span></tt> to it as
a variable.</li>
<li>Finally, you have the HTML in <tt class="docutils literal"><span class="pre">lib/views/index.erb</span></tt> that contains a
bit of Ruby code that tests the <tt class="docutils literal"><span class="pre">greeting</span> <span class="pre">variable</span></tt>, and if it's
there, prints one message using the <tt class="docutils literal"><span class="pre">greeting</span></tt>, or a default
message.</li>
</ol>
<p>To get deeper into this, change the <tt class="docutils literal"><span class="pre">greeting</span></tt> variable and the HTML
to see what effect it has. Also create another template named
<tt class="docutils literal"><span class="pre">lib/views/foo.lib</span></tt> and render that using <tt class="docutils literal"><span class="pre">erb</span> <span class="pre">:foo</span></tt> instead of
<tt class="docutils literal"><span class="pre">erb</span> <span class="pre">:index</span></tt> like before. This will show you how the first parameter
you pass to <tt class="docutils literal"><span class="pre">erb</span></tt> is just matched to a <tt class="docutils literal"><span class="pre">.erb</span></tt> file in
<tt class="docutils literal"><span class="pre">lib/views/</span></tt>.</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Read the documentation at
<a class="reference external" href="http://www.sinatrarb.com/">http://www.sinatrarb.com</a>.</li>
<li>Experiment with everything you can find there, including their
example code.</li>
<li>Read about HTML5 and CSS3 and make some <tt class="docutils literal"><span class="pre">.html</span></tt> and <tt class="docutils literal"><span class="pre">.css</span></tt> files
for practice.</li>
<li>If you have a friend who knows <strong>Rails</strong> and is willing to help you,
then consider doing Ex 50, 51, and 52 in Rails instead to see what
that's like.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex51">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-51-getting-input-from-a-browser">
<h1>Exercise 51: Getting Input From A Browser<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-51-getting-input-from-a-browser" title="Permalink to this headline">¶</a></h1>
<p>While it's exciting to see the browser display "Hello World", it's even
more exciting to let the user submit text to your application from a
form. In this exercise we'll improve our starter web application using
forms and figure out how to do automated testing for a web application.</p>
<div class="section" id="how-the-web-works">
<h2>How The Web Works<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#how-the-web-works" title="Permalink to this headline">¶</a></h2>
<p>Time for some boring stuff. You need to understand a bit more about how
the web works before you can make a form. This description isn't
complete, but it's accurate and will help you figure out what might be
going wrong with your application. Also, creating forms will be easier
if you know what they do.</p>
<p>I'll start with a simple diagram that shows you the different parts of a
web request and how the information flows:</p>
<div class="figure align-center">
<img alt="http request diagram" src="./ruby_files/http_request_diagram.png">
<p class="caption">http request diagram</p>
</div>
<p>I've labeled the lines with letters so I can walk you through a regular
request process:</p>
<ol class="arabic simple">
<li>You type in the url <a class="reference external" href="http://learnpythonthehardway.org/">http://learnpythonthehardway.org/</a> into your
browser and it sends the request out on <tt class="docutils literal"><span class="pre">line</span> <span class="pre">(A)</span></tt> to your
computer's network interface.</li>
<li>Your request goes out over the internet on <tt class="docutils literal"><span class="pre">line</span> <span class="pre">(B)</span></tt> and then to
the remote computer on <tt class="docutils literal"><span class="pre">line</span> <span class="pre">(C)</span></tt> where my server accepts the
request.</li>
<li>Once my computer accepts it, my web application gets it on
<tt class="docutils literal"><span class="pre">line</span> <span class="pre">(D)</span></tt>, and my web application code runs the <tt class="docutils literal"><span class="pre">/</span></tt> (index)
handler.</li>
<li>The response comes out of my web server when I return it, and goes
back to your browser over <tt class="docutils literal"><span class="pre">line</span> <span class="pre">(D)</span></tt> again.</li>
<li>The server running this site takes the response off <tt class="docutils literal"><span class="pre">line</span> <span class="pre">(D)</span></tt> then
sends it back over the internet on <tt class="docutils literal"><span class="pre">line</span> <span class="pre">(C)</span></tt>.</li>
<li>The response from the server then comes off the internet on
<tt class="docutils literal"><span class="pre">line</span> <span class="pre">(B)</span></tt>, and your computer's network interface hands it to your
browser on <tt class="docutils literal"><span class="pre">line</span> <span class="pre">(A)</span></tt>.</li>
<li>Finally, your browser then displays the response.</li>
</ol>
<p>In this description there are a few terms you should know so that you
have a common vocabulary to work with when talking about your web
application:</p>
<div class="section" id="browser">
<h3>Browser<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#browser" title="Permalink to this headline">¶</a></h3>
<p>The software that you're probably using every day. Most people don't
know what it really does, they just call it "the internet". Its job is
to take addresses (like <a class="reference external" href="http://learnpythonthehardway.org/">http://learnpythonthehardway.org</a>) you type into
the URL bar, then use that information to make requests to the server at
that address.</p>
</div>
<div class="section" id="address">
<h3>Address<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#address" title="Permalink to this headline">¶</a></h3>
<p>This is normally a URL (Uniform Resource Locator) like
<a class="reference external" href="http://learnpythonthehardway.org/">http://learnpythonthehardway.org/</a> and indicates where a browser should
go. The first part <tt class="docutils literal"><span class="pre">http</span></tt> indicates the protocol you want to use, in
this case "Hyper-Text Transport Protocol". You can also try
<a class="reference external" href="ftp://ibiblio.org/">ftp://ibiblio.org/</a> to see how "File Transport Protocol" works. The
<tt class="docutils literal"><span class="pre">learnpythonthehardway.org</span></tt> part is the "hostname", or a human
readable address you can remember and which maps to a number called an
IP address, similar to a telephone number for a computer on the
Internet. Finally, URLs can have a trailing <tt class="docutils literal"><span class="pre">path</span></tt> like the <tt class="docutils literal"><span class="pre">/book/</span></tt>
part of <a class="reference external" href="http://learnpythonthehardway.org/book/">http://learnpythonthehardway.org/book/</a> which indicates a file or
some resource <em>on</em> the server to retrieve with a request. There are many
other parts, but those are the main ones.</p>
</div>
<div class="section" id="connection">
<h3>Connection<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#connection" title="Permalink to this headline">¶</a></h3>
<p>Once a browser knows what protocol you want to use (http), what server
you want to talk to (learnpythonthehardway.org), and what resource on
that server to get, it must make a connection. The browser simply asks
your Operating System (OS) to open a "port" to the computer, usually
port 80. When it works the OS hands back to your program something that
works like a file, but is actually sending and receiving bytes over the
network wires between your computer and the other computer at
"learnpythonthehardway.org". This is also the same thing that happens
with <a class="reference external" href="http://localhost:8080/">http://localhost:8080/</a> but in this case you're telling the browser
to connect to your own computer (localhost) and use port 4567 rather
than the default of 80. You could also do
<a class="reference external" href="http://learnpythonthehardway.org/">http://learnpythonthehardway.org:80/</a> and get the same result, except
you're explicitly saying to use port 80 instead of letting it be that by
default.</p>
</div>
<div class="section" id="request">
<h3>Request<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#request" title="Permalink to this headline">¶</a></h3>
<p>Your browser is connected using the address you gave. Now it needs to
ask for the resource it wants (or you want) on the remote server. If you
gave <tt class="docutils literal"><span class="pre">/book/</span></tt> at the end of the URL, then you want the file (resource)
at <tt class="docutils literal"><span class="pre">/book/</span></tt>, and most servers will use the real file
<tt class="docutils literal"><span class="pre">/book/index.html</span></tt> but pretend it doesn't exist. What the browser does
to get this resource is send a request to the server. I won't get into
exactly how it does this, but just understand that it has to send
something to query the server for the request. The interesting thing is
that these "resources" don't have to be files. For instance, when the
browser in your application asks for something, the server is returning
something your code generated.</p>
</div>
<div class="section" id="server">
<h3>Server<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#server" title="Permalink to this headline">¶</a></h3>
<p>The server is the computer at the end of a browser's connection that
knows how to answer your browser's requests for files/resources. Most
web servers just send files, and that's actually the majority of
traffic. But you're actually building a server in Ruby that knows how to
take requests for resources, and then return strings that you craft
using Ruby. When you do this crafting, <em>you</em> are pretending to be a file
to the browser, but really it's just code. As you can see from Ex. 50,
it also doesn't take much code to create a response.</p>
</div>
<div class="section" id="response">
<h3>Response<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#response" title="Permalink to this headline">¶</a></h3>
<p>This is the HTML (css, javascript, or images) your server wants to send
back to the browser as the answer to the browser's request. In the case
of files, it just reads them off the disk and sends them to the browser,
but it wraps the contents of the disk in a special "header" so the
browser knows what it's getting. In the case of your application, you're
still sending the same thing, including the header, but you generate
that data on the fly with your Ruby code.</p>
<p>That is the fastest crash course in how a web browser accesses
information on servers on the internet. It should work well enough for
you to understand this exercise, but if not, read about it as much as
you can until you get it. A really good way to do that is to take the
diagram, and break different parts of the web application you did in
Exercise 50. If you can break your web application in predictable ways
using the diagram, you'll start to understand how it works.</p>
</div>
</div>
<div class="section" id="how-forms-work">
<h2>How Forms Work<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#how-forms-work" title="Permalink to this headline">¶</a></h2>
<p>The best way to play with forms is to write some code that accepts form
data, and then see what you can do. Take your <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> file
and make it look like this:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">require_relative</span> <span class="s2">"gothonweb/version"</span>
<span class="nb">require</span> <span class="s2">"sinatra"</span>
<span class="nb">require</span> <span class="s2">"erb"</span>

<span class="k">module</span> <span class="nn">Gothonweb</span>
  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="s2">"Hello, World!"</span>
    <span class="n">erb</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:greeting</span> <span class="o">=&gt;</span> <span class="n">greeting</span><span class="p">}</span>
  <span class="k">end</span>
  
  <span class="n">get</span> <span class="s1">'/hello'</span> <span class="k">do</span>
    <span class="nb">name</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span> <span class="o">||</span> <span class="s2">"Nobody"</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="s2">"Hello, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">erb</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:greeting</span> <span class="o">=&gt;</span> <span class="n">greeting</span><span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Restart Sinatra (hit CTRL-C and then run it again) to make sure it loads
again, then with your browser go to <tt class="docutils literal"><span class="pre">http://localhost:4567/hello</span></tt>
which should display, "I just wanted to say Hello, Nobody." Next, change
the URL in your browser to <tt class="docutils literal"><span class="pre">http://localhost:4567/hello?name=Frank</span></tt>
and you'll see it say "Hello, Frank." Finally, change the <tt class="docutils literal"><span class="pre">name=Frank</span></tt>
part to be your name. Now it's saying hello to you.</p>
<p>Let's break down the changes I made to your script.</p>
<ol class="arabic simple">
<li>Instead of just a string for greeting I'm now using the <tt class="docutils literal"><span class="pre">params</span></tt>
hash to get data from the browser. Sinatra takes all of the key/value
pairs after the <tt class="docutils literal"><span class="pre">?</span></tt> part of the URL and adds them to the <tt class="docutils literal"><span class="pre">params</span></tt>
hash for you to work with.</li>
<li>I then construct the <tt class="docutils literal"><span class="pre">greeting</span></tt> from the <tt class="docutils literal"><span class="pre">name</span></tt> value we
extracted via the <tt class="docutils literal"><span class="pre">params[:name]</span></tt> hash lookup, which should be very
familiar to you by now.</li>
<li>Everything else about the file is the same as before.</li>
</ol>
<p>You're also not restricted to just one parameter on the URL. Change this
example to give two variables like this:
<tt class="docutils literal"><span class="pre">http://localhost:4567/hello?name=Frank&amp;greet=Hola</span></tt>. Then change the
code to get <tt class="docutils literal"><span class="pre">params[:name]</span></tt> and <tt class="docutils literal"><span class="pre">params[:greet]</span></tt> like this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">greeting</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">greet</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-html-forms">
<h2>Creating HTML Forms<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#creating-html-forms" title="Permalink to this headline">¶</a></h2>
<p>Passing the parameters on the URL works, but it's kind of ugly and not
easy to use for regular people. What you really want is a "POST form",
which is a special HTML file that has a <tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> tag in it. This form
will collect information from the user, then send it to your web
application just like you did above.</p>
<p>Let's make a quick one so you can see how it works. Here's the new HTML
file you need to create, in <tt class="docutils literal"><span class="pre">lib/views/hello_form.erb</span></tt>:</p>
<div class="highlight-erb"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">&lt;html&gt;</span>
<span class="x">    &lt;head&gt;</span>
<span class="x">        &lt;title&gt;Sample Web Form&lt;/title&gt;</span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;h1&gt;Fill Out This Form&lt;/h1&gt;</span>

<span class="x">&lt;form action="/hello" method="POST"&gt;</span>
<span class="x">    A Greeting: &lt;input type="text" name="greet"&gt;</span>
<span class="x">    &lt;br/&gt;</span>
<span class="x">    Your Name: &lt;input type="text" name="name"&gt;</span>
<span class="x">    &lt;br/&gt;</span>
<span class="x">    &lt;input type="submit"&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>You should then change <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> to look like this:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">require_relative</span> <span class="s2">"gothonweb/version"</span>
<span class="nb">require</span> <span class="s2">"sinatra"</span>
<span class="nb">require</span> <span class="s2">"erb"</span>

<span class="k">module</span> <span class="nn">Gothonweb</span>

  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="s2">"Hello, World!"</span>
    <span class="n">erb</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:greeting</span> <span class="o">=&gt;</span> <span class="n">greeting</span><span class="p">}</span>
  <span class="k">end</span>
  
  <span class="n">get</span> <span class="s1">'/hello'</span> <span class="k">do</span>
    <span class="n">erb</span> <span class="ss">:hello_form</span>
  <span class="k">end</span>

  <span class="n">post</span> <span class="s1">'/hello'</span> <span class="k">do</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:greet</span><span class="o">]</span> <span class="o">||</span> <span class="s2">"Hello"</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span> <span class="o">||</span> <span class="s2">"Nobody"</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">erb</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:greeting</span> <span class="o">=&gt;</span> <span class="n">greeting</span><span class="p">}</span> 
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Once you've got those written up, simply restart the web application
again and hit it with your browser like before.</p>
<p>This time you'll get a form asking you for "A Greeting" and "Your Name".
When you hit the Submit button on the form, it will give you the same
greeting you normally get, but this time look at the URL in your
browser. See how it's <tt class="docutils literal"><span class="pre">http://localhost:4567/hello</span></tt> even though you
sent in parameters.</p>
<p>The part of the <tt class="docutils literal"><span class="pre">hello_form.erb</span></tt> file that makes this work is the line
with <tt class="docutils literal"><span class="pre">&lt;form</span> <span class="pre">action="/hello"</span> <span class="pre">method="POST"&gt;</span></tt>. This tells your browser
to:</p>
<ol class="arabic simple">
<li>Collect data from the user using the form fields inside the form.</li>
<li>Send them to the server using a POST type of request, which is just
another browser request that "hides" the form fields.</li>
<li>Send that to the <tt class="docutils literal"><span class="pre">/hello</span></tt> URL (as shown in the <tt class="docutils literal"><span class="pre">action="/hello"</span></tt>
part).</li>
<li>You can then see how the two <tt class="docutils literal"><span class="pre">&lt;input&gt;</span></tt> tags match the names of the
variables in your new code. Also notice that instead of just a GET
method inside class index, I have another method POST.</li>
</ol>
<p>How this new application works is:</p>
<ol class="arabic simple">
<li>The browser first hits the web application at <tt class="docutils literal"><span class="pre">/hello</span></tt> but it sends
a GET, so our <tt class="docutils literal"><span class="pre">get</span> <span class="pre">'/hello/'</span></tt> block runs and returns the
<tt class="docutils literal"><span class="pre">hello_form</span></tt>.</li>
<li>You fill out the form in the browser, and the browser does what the
<tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> says and sends the data as a POST.</li>
<li>The web application then runs the <tt class="docutils literal"><span class="pre">post</span> <span class="pre">'/hello'</span></tt> block rather than
the <tt class="docutils literal"><span class="pre">get</span> <span class="pre">'/hello'</span></tt> block to handle this request.</li>
<li>This <tt class="docutils literal"><span class="pre">post</span> <span class="pre">'/hello'</span></tt> block then does what it normally does to send
back the <tt class="docutils literal"><span class="pre">hello</span></tt> page like before. There's really nothing new in
here, it's just moved into a new block.</li>
</ol>
<p>As an exercise, go into the <tt class="docutils literal"><span class="pre">lib/views/index.erb</span></tt> file and add a link
back to just <tt class="docutils literal"><span class="pre">/hello</span></tt> so that you can keep filling out the form and
seeing the results. Make sure you can explain how this link works and
how it's letting you cycle between <tt class="docutils literal"><span class="pre">lib/views/index.erb</span></tt> and
<tt class="docutils literal"><span class="pre">lib/views/hello_form.erb</span></tt> and what's being run inside this latest
Ruby code.</p>
</div>
<div class="section" id="creating-a-layout-template">
<h2>Creating A Layout Template<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#creating-a-layout-template" title="Permalink to this headline">¶</a></h2>
<p>When you work on your game in the next Exercise, you'll need to make a
bunch of little HTML pages. Writing a full web page each time will
quickly become tedious. Luckily you can create a "layout" template, or a
kind of shell that will wrap all your other pages with common headers
and footers. Good programmers try to reduce repetition, so layouts are
essential for being a good programmer.</p>
<p>Change <tt class="docutils literal"><span class="pre">lib/views/index.erb</span></tt> to be like this:</p>
<div class="highlight-erb"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">greeting</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;p&gt;I just wanted to say &lt;em style="color: green; font-size: 2em;"&gt;</span><span class="cp">&lt;%=</span> <span class="n">greeting</span> <span class="cp">%&gt;</span><span class="x">&lt;/em&gt;.</span>
<span class="cp">&lt;%</span> <span class="k">else</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;em&gt;Hello&lt;/em&gt;, world!</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x">&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Change <tt class="docutils literal"><span class="pre">lib/views/hello_form.erb</span></tt> to be like this:</p>
<div class="highlight-erb"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">&lt;h1&gt;Fill Out This Form&lt;/h1&gt;</span>

<span class="x">&lt;form action="/hello" method="POST"&gt;</span>
<span class="x">  A Greeting: &lt;input type="text" name="greet"&gt;</span>
<span class="x">  &lt;br/&gt;</span>
<span class="x">  Your Name: &lt;input type="text" name="name"&gt;</span>
<span class="x">  &lt;br/&gt;</span>
<span class="x">  &lt;input type="submit"&gt;</span>
<span class="x">&lt;/form&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>All we're doing is stripping out the "boilerplate" at the top and the
bottom which is always on every page. We'll put that back into a single
<tt class="docutils literal"><span class="pre">lib/views/layout.erb</span></tt> file that handles it for us from now on.</p>
<p>Once you have those changes, create a <tt class="docutils literal"><span class="pre">lib/views/layout.erb</span></tt> file with
this in it:</p>
<div class="highlight-erb"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">&lt;html&gt;</span>
<span class="x">  &lt;head&gt;</span>
<span class="x">    &lt;title&gt;Gothons From Planet Percal #25&lt;/title&gt;</span>
<span class="x">  &lt;/head&gt;</span>
<span class="x">  &lt;body&gt;</span>
<span class="x">    </span><span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Sinatra automatically looks for a layout template called <tt class="docutils literal"><span class="pre">layout</span></tt> by
default to use as the <em>base</em> template for all other templates. You can
customize which template is used as the base for any given page, too.
Restart your application and then try to change the layout in
interesting ways, but without changing the other templates.</p>
</div>
<div class="section" id="writing-automated-tests-for-forms">
<h2>Writing Automated Tests For Forms<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#writing-automated-tests-for-forms" title="Permalink to this headline">¶</a></h2>
<p>It's easy to test a web application with your browser by just hitting
refresh, but come on, we're programmers here. Why do some repetitive
task when we can write some code to test our application? What you're
going to do next is write a little test for your web application form
based on what you learned in Exercise 47. If you don't remember Exercise
47, read it again.</p>
<p>I've created a simple little function for that lets you assert things
about your web application's response, aptly named <tt class="docutils literal"><span class="pre">assert_response</span></tt>.
Create the file <tt class="docutils literal"><span class="pre">test/test_gothonweb.rb</span></tt> with these contents:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">require_relative</span> <span class="s1">'../lib/gothonweb.rb'</span>
<span class="nb">require</span> <span class="s1">'test/unit'</span>
<span class="nb">require</span> <span class="s1">'rack/test'</span>

<span class="no">ENV</span><span class="o">[</span><span class="s1">'RACK_ENV'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'test'</span>

<span class="k">class</span> <span class="nc">GothonwebTest</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="kp">include</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Test</span><span class="o">::</span><span class="no">Methods</span>
  
  <span class="k">def</span> <span class="nf">app</span>
    <span class="no">Sinatra</span><span class="o">::</span><span class="no">Application</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">assert_response</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="n">contains</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">matches</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="s2">"Expected response </span><span class="si">#{</span><span class="n">status</span><span class="si">}</span><span class="s2"> not in </span><span class="si">#{</span><span class="n">resp</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">200</span>
      <span class="n">assert</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="s2">"Response data is empty."</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">if</span> <span class="n">contains</span>
      <span class="n">assert</span><span class="p">((</span><span class="n">resp</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">include?</span> <span class="n">contains</span><span class="p">),</span> <span class="s2">"Response does not contain </span><span class="si">#{</span><span class="n">contains</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">if</span> <span class="n">matches</span>
      <span class="n">reg</span> <span class="o">=</span> <span class="no">Regexp</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span>
      <span class="n">assert</span> <span class="n">reg</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">contains</span><span class="p">),</span> <span class="s2">"Response does not match </span><span class="si">#{</span><span class="n">matches</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">end</span>

    <span class="k">if</span> <span class="n">headers</span>
      <span class="n">assert_equal</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_index</span>
    <span class="c1"># check that we get a 404 on the / URL</span>
    <span class="n">get</span><span class="p">(</span><span class="s2">"/foo"</span><span class="p">)</span>
    <span class="n">assert_response</span><span class="p">(</span><span class="n">last_response</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>

    <span class="c1"># test our first GET request to /hello</span>
    <span class="n">get</span><span class="p">(</span><span class="s2">"/hello"</span><span class="p">)</span>
    <span class="n">assert_response</span><span class="p">(</span><span class="n">last_response</span><span class="p">)</span>

    <span class="c1"># make sure default values work for the form</span>
    <span class="n">post</span><span class="p">(</span><span class="s2">"/hello"</span><span class="p">)</span>
    <span class="n">assert_response</span><span class="p">(</span><span class="n">last_response</span><span class="p">,</span> <span class="s2">"Nobody"</span><span class="p">)</span>

    <span class="c1"># test that we get expected values</span>
    <span class="n">post</span><span class="p">(</span><span class="s2">"/hello"</span><span class="p">,</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">'Zed'</span><span class="p">,</span> <span class="ss">:greet</span> <span class="o">=&gt;</span> <span class="s1">'Hola'</span><span class="p">)</span>
    <span class="n">assert_response</span><span class="p">(</span><span class="n">last_response</span><span class="p">,</span> <span class="s2">"Zed"</span><span class="p">)</span>
    <span class="n">assert_response</span><span class="p">(</span><span class="n">last_response</span><span class="p">,</span> <span class="s2">"Hola"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Finally, run <tt class="docutils literal"><span class="pre">test/test_gothonweb.rb</span></tt> to test your web application:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ruby <span class="nb">test</span>/test_gothonweb.rb
<span class="go">Loaded suite test/test_gothonweb</span>
<span class="go">Started</span>
<span class="go">.</span>
<span class="go">Finished in 0.023839 seconds.</span>

<span class="go">1 tests, 9 assertions, 0 failures, 0 errors, 0 skips</span>

<span class="go">Test run options: --seed 57414</span>
</pre></div>
</div>
<p>What I'm doing here is I'm actually importing the whole application from
the <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> library, then running it manually.</p>
<p>The <tt class="docutils literal"><span class="pre">rack/test</span></tt> library we have included has a very simple API for
processing requests. Its <tt class="docutils literal"><span class="pre">get</span></tt>, <tt class="docutils literal"><span class="pre">put</span></tt>, <tt class="docutils literal"><span class="pre">post</span></tt>, <tt class="docutils literal"><span class="pre">delete</span></tt>, and
<tt class="docutils literal"><span class="pre">head</span></tt> methods simulate the respective type of request on the
application.</p>
<p>All mock request methods have the same argument signature:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">get</span> <span class="s1">'/path'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{},</span> <span class="n">rack_env</span><span class="o">=</span><span class="p">{}</span>
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">/path</span></tt> is the request path and may optionally include a query
string.</li>
<li><tt class="docutils literal"><span class="pre">params</span></tt> is a Hash of query/post parameters, a String request body,
or nil.</li>
<li><tt class="docutils literal"><span class="pre">rack_env</span></tt> is a Hash of Rack environment values. This can be used
to set request headers and other request related information, such as
session data.</li>
</ul>
<p>This works without running an actual web server so you can do tests with
automated tests and also use your browser to test a running server.</p>
<p>To validate responses from this function, use the <tt class="docutils literal"><span class="pre">assert_response</span></tt>
function from <tt class="docutils literal"><span class="pre">test/test_gothonweb.rb</span></tt> which has:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">assert_response</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="n">contains</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">matches</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<p>Pass in the response you get from calling <tt class="docutils literal"><span class="pre">get</span></tt> or <tt class="docutils literal"><span class="pre">post</span></tt> then add
things you want checked. Use the <tt class="docutils literal"><span class="pre">contains</span></tt> parameter to make sure
that the response contains certain values. Use the <tt class="docutils literal"><span class="pre">status</span></tt> parameter
to check for certain responses. There's actually quite a lot of
information in this little function so it would be good for you to study
it.</p>
<p>In the <tt class="docutils literal"><span class="pre">test/test_gothonweb.rb</span></tt> automated test I'm first making sure
the <tt class="docutils literal"><span class="pre">/foo</span></tt> URL returns a "404 Not Found" response, since it actually
doesn't exist. Then I'm checking that <tt class="docutils literal"><span class="pre">/hello</span></tt> works with both a GET
and POST form. Following the test should be fairly simple, even if you
might not totally know what's going on.</p>
<p>Take some time studying this latest application, especially how the
automated testing works.</p>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#extra-credit" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Read even more about HTML, and give the simple form a better layout.
It helps to draw what you want to do on paper and <em>then</em> implement it
with HTML.</li>
<li>This one is hard, but try to figure out how you'd do a file upload
form so that you can upload an image and save it to the disk.</li>
<li>This is even more mind-numbing, but go find the HTTP RFC (which is
the document that describes how HTTP works) and read as much of it as
you can. It is really boring, but comes in handy once in a while.</li>
<li>This will also be really difficult, but see if you can find someone
to help you setup a web server like Apache, Nginx, or thttpd. Try to
serve a couple of your .html and .css files with it just to see if
you can. Don't worry if you can't, web servers kind of suck.</li>
<li>Take a break after this and just try making as many different web
applications as you can. You should definitely read about sessions in
Sinatra so you can understand how to keep state for a user.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex52">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="exercise-52-the-start-of-your-web-game">
<h1>Exercise 52: The Start Of Your Web Game<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#exercise-52-the-start-of-your-web-game" title="Permalink to this headline">¶</a></h1>
<p>We're coming to the end of the book, and in this exercise I'm going to
really challenge you. When you're done, you'll be a reasonably competent
Ruby beginner. You'll still need to go through a few more books and
write a couple more projects, but you'll have the skills to complete
them. The only thing in your way will be time, motivation, and
resources.</p>
<p>In this exercise, we won't make a complete game, but instead we'll make
an "engine" that can run the game from Exercise 42 in the browser. This
will involve refactoring Exercise 42, mixing in the structure from
Exercise 47, adding automated tests, and finally creating a web engine
that can run the games.</p>
<p>This exercise will be <em>huge</em>, and I predict you could spend anywhere
from a week to months on it before moving on. It's best to attack it in
little chunks and do a bit a night, taking your time to make everything
work before moving on.</p>
<div class="section" id="refactoring-the-exercise-42-game">
<h2>Refactoring The Exercise 42 Game<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#refactoring-the-exercise-42-game" title="Permalink to this headline">¶</a></h2>
<p>You've been altering the <tt class="docutils literal"><span class="pre">gothonweb</span></tt> project for two exercises and
you'll do it one more time in this exercise. The skill you're learning
is called "refactoring", or as I like to call it, "fixing stuff".
Refactoring is a term programmers use to describe the process of taking
old code, and changing it to have new features or just to clean it up.
You've been doing this without even knowing it, as it's second nature to
building software.</p>
<p>What you'll do in this part is take the ideas from Exercise 47 of a
testable "map" of Rooms, and the game from Exercise 42, and combine them
together to create a new game structure. It will have the same content,
just "refactored" to have a better structure.</p>
<p>First step is to grab the code from <tt class="docutils literal"><span class="pre">ex47.rb</span></tt> and copy it to
<tt class="docutils literal"><span class="pre">gothonweb/lib/map.rb</span></tt> and copy <tt class="docutils literal"><span class="pre">ex47_tests.rb</span></tt> file to
<tt class="docutils literal"><span class="pre">gothonweb/test/test_map.rb</span></tt> and run the test suite again to make sure
it keeps working.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">From now on I won't show you the output of a test run,
just assume that you should be doing it and it'll look like the
above unless you have an error.</p>
</div>
<p>Once you have the code from Exercise 47 copied over, it's time to
refactor it to have the Exercise 42 map in it. I'm going to start off by
laying down the basic structure, and then you'll have an assignment to
make the <tt class="docutils literal"><span class="pre">map.rb</span></tt> file and the <tt class="docutils literal"><span class="pre">map_tests.rb</span></tt> file complete.</p>
<p>First thing to do is lay out the basic structure of the map using the
<tt class="docutils literal"><span class="pre">Room</span></tt> class as it is now:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Room</span>

  <span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">:paths</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
    <span class="vi">@description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="vi">@paths</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">go</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
    <span class="vi">@paths</span><span class="o">[</span><span class="n">direction</span><span class="o">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">add_paths</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
    <span class="vi">@paths</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="n">central_corridor</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Central Corridor"</span><span class="p">,</span>
<span class="sx">%q{</span>
<span class="sx">The Gothons of Planet Percal #25 have invaded your ship and destroyed</span>
<span class="sx">your entire crew.  You are the last surviving member and your last</span>
<span class="sx">mission is to get the neutron destruct bomb from the Weapons Armory,</span>
<span class="sx">put it in the bridge, and blow the ship up after getting into an </span>
<span class="sx">escape pod.</span>

<span class="sx">You're running down the central corridor to the Weapons Armory when</span>
<span class="sx">a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume</span>
<span class="sx">flowing around his hate filled body.  He's blocking the door to the</span>
<span class="sx">Armory and about to pull a weapon to blast you.</span>
<span class="sx">}</span><span class="p">)</span>


<span class="n">laser_weapon_armory</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Laser Weapon Armory"</span><span class="p">,</span>
<span class="sx">%q{</span>
<span class="sx">Lucky for you they made you learn Gothon insults in the academy.</span>
<span class="sx">You tell the one Gothon joke you know:</span>
<span class="sx">Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr.</span>
<span class="sx">The Gothon stops, tries not to laugh, then busts out laughing and can't move.</span>
<span class="sx">While he's laughing you run up and shoot him square in the head</span>
<span class="sx">putting him down, then jump through the Weapon Armory door.</span>

<span class="sx">You do a dive roll into the Weapon Armory, crouch and scan the room</span>
<span class="sx">for more Gothons that might be hiding.  It's dead quiet, too quiet.</span>
<span class="sx">You stand up and run to the far side of the room and find the</span>
<span class="sx">neutron bomb in its container.  There's a keypad lock on the box</span>
<span class="sx">and you need the code to get the bomb out.  If you get the code</span>
<span class="sx">wrong 10 times then the lock closes forever and you can't</span>
<span class="sx">get the bomb.  The code is 3 digits.</span>
<span class="sx">}</span><span class="p">)</span>


<span class="n">the_bridge</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"The Bridge"</span><span class="p">,</span>
<span class="sx">%q{</span>
<span class="sx">The container clicks open and the seal breaks, letting gas out.</span>
<span class="sx">You grab the neutron bomb and run as fast as you can to the</span>
<span class="sx">bridge where you must place it in the right spot.</span>

<span class="sx">You burst onto the Bridge with the netron destruct bomb</span>
<span class="sx">under your arm and surprise 5 Gothons who are trying to</span>
<span class="sx">take control of the ship.  Each of them has an even uglier</span>
<span class="sx">clown costume than the last.  They haven't pulled their</span>
<span class="sx">weapons out yet, as they see the active bomb under your</span>
<span class="sx">arm and don't want to set it off.</span>
<span class="sx">}</span><span class="p">)</span>


<span class="n">escape_pod</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Escape Pod"</span><span class="p">,</span>
<span class="sx">%q{</span>
<span class="sx">You point your blaster at the bomb under your arm</span>
<span class="sx">and the Gothons put their hands up and start to sweat.</span>
<span class="sx">You inch backward to the door, open it, and then carefully</span>
<span class="sx">place the bomb on the floor, pointing your blaster at it.</span>
<span class="sx">You then jump back through the door, punch the close button</span>
<span class="sx">and blast the lock so the Gothons can't get out.</span>
<span class="sx">Now that the bomb is placed you run to the escape pod to</span>
<span class="sx">get off this tin can.</span>

<span class="sx">You rush through the ship desperately trying to make it to</span>
<span class="sx">the escape pod before the whole ship explodes.  It seems like</span>
<span class="sx">hardly any Gothons are on the ship, so your run is clear of</span>
<span class="sx">interference.  You get to the chamber with the escape pods, and</span>
<span class="sx">now need to pick one to take.  Some of them could be damaged</span>
<span class="sx">but you don't have time to look.  There's 5 pods, which one</span>
<span class="sx">do you take?</span>
<span class="sx">}</span><span class="p">)</span>


<span class="n">the_end_winner</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"The End"</span><span class="p">,</span>
<span class="sx">%q{</span>
<span class="sx">You jump into pod 2 and hit the eject button.</span>
<span class="sx">The pod easily slides out into space heading to</span>
<span class="sx">the planet below.  As it flies to the planet, you look</span>
<span class="sx">back and see your ship implode then explode like a</span>
<span class="sx">bright star, taking out the Gothon ship at the same</span>
<span class="sx">time.  You won!</span>
<span class="sx">}</span><span class="p">)</span>


<span class="n">the_end_loser</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"The End"</span><span class="p">,</span>
<span class="sx">%q{</span>
<span class="sx">You jump into a random pod and hit the eject button.</span>
<span class="sx">The pod escapes out into the void of space, then</span>
<span class="sx">implodes as the hull ruptures, crushing your body</span>
<span class="sx">into jam jelly.</span>
<span class="sx">}</span><span class="p">)</span>

<span class="n">escape_pod</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span>
    <span class="s1">'2'</span> <span class="o">=&gt;</span> <span class="n">the_end_winner</span><span class="p">,</span>
    <span class="s1">'*'</span> <span class="o">=&gt;</span> <span class="n">the_end_loser</span>
<span class="p">})</span>

<span class="n">generic_death</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"death"</span><span class="p">,</span> <span class="s2">"You died."</span><span class="p">)</span>

<span class="n">the_bridge</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span>
    <span class="s1">'throw the bomb'</span> <span class="o">=&gt;</span> <span class="n">generic_death</span><span class="p">,</span>
    <span class="s1">'slowly place the bomb'</span> <span class="o">=&gt;</span> <span class="n">escape_pod</span>
<span class="p">})</span>

<span class="n">laser_weapon_armory</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span>
    <span class="s1">'0132'</span> <span class="o">=&gt;</span> <span class="n">the_bridge</span><span class="p">,</span>
    <span class="s1">'*'</span> <span class="o">=&gt;</span> <span class="n">generic_death</span>
<span class="p">})</span>

<span class="n">central_corridor</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span>
    <span class="s1">'shoot!'</span> <span class="o">=&gt;</span> <span class="n">generic_death</span><span class="p">,</span>
    <span class="s1">'dodge!'</span><span class="o">=&gt;</span> <span class="n">generic_death</span><span class="p">,</span>
    <span class="s1">'tell a joke'</span> <span class="o">=&gt;</span> <span class="n">laser_weapon_armory</span>
<span class="p">})</span>

<span class="no">START</span> <span class="o">=</span> <span class="n">central_corridor</span>
</pre></div>
</td></tr></tbody></table></div>
<p>You'll notice that there are a couple of problems with our Room class
and this map:</p>
<ol class="arabic simple">
<li>We have to put the text that was in the <tt class="docutils literal"><span class="pre">if-else</span></tt> clauses that got
printed before entering a room as part of each room. This means you
can't shuffle the map around which would be nice. You'll be fixing
that up in this exercise.</li>
<li>There are parts in the original game where we ran code that
determined things like the bomb's keypad code, or the right pod. In
this game we just pick some defaults and go with it, but later you'll
be given extra credit to make this work again.</li>
<li>I've just made a <tt class="docutils literal"><span class="pre">generic_death</span></tt> ending for all of the bad
decisions, which you'll have to finish for me. You'll need to go back
through and add in all the original endings and make sure they work.</li>
<li>I've got a new kind of transition labeled <tt class="docutils literal"><span class="pre">"*"</span></tt> that will be used
for a "catch-all" action in the engine.</li>
</ol>
<p>Once you've got that basically written out, here's the new automated
test <tt class="docutils literal"><span class="pre">test/test_map.rb</span></tt> that you should have to get yourself started:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'test/unit'</span>
<span class="n">require_relative</span> <span class="s1">'../lib/map'</span>

<span class="k">class</span> <span class="nc">MapTests</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>

  <span class="k">def</span> <span class="nf">test_room</span><span class="p">()</span>
    <span class="n">gold</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"GoldRoom"</span><span class="p">,</span> 
                <span class="sx">%q{This room has gold in it you can grab. There's a</span>
<span class="sx">                door to the north.}</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">gold</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">"GoldRoom"</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">gold</span><span class="o">.</span><span class="n">paths</span><span class="p">,</span> <span class="p">{})</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_room_paths</span><span class="p">()</span>
    <span class="n">center</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Center"</span><span class="p">,</span> <span class="s2">"Test room in the center."</span><span class="p">)</span>
    <span class="n">north</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"North"</span><span class="p">,</span> <span class="s2">"Test room in the north."</span><span class="p">)</span>
    <span class="n">south</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"South"</span><span class="p">,</span> <span class="s2">"Test room in the south."</span><span class="p">)</span>

    <span class="n">center</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="s1">'north'</span> <span class="o">=&gt;</span> <span class="n">north</span><span class="p">,</span> <span class="s1">'south'</span> <span class="o">=&gt;</span> <span class="n">south</span><span class="p">})</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'north'</span><span class="p">),</span> <span class="n">north</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'south'</span><span class="p">),</span> <span class="n">south</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_map</span><span class="p">()</span>
    <span class="n">start</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Start"</span><span class="p">,</span> <span class="s2">"You can go west and down a hole."</span><span class="p">)</span>
    <span class="n">west</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Trees"</span><span class="p">,</span> <span class="s2">"There are trees here, you can go east."</span><span class="p">)</span>
    <span class="n">down</span> <span class="o">=</span> <span class="no">Room</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"Dungeon"</span><span class="p">,</span> <span class="s2">"It's dark down here, you can go up."</span><span class="p">)</span>

    <span class="n">start</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="s1">'west'</span> <span class="o">=&gt;</span> <span class="n">west</span><span class="p">,</span> <span class="s1">'down'</span> <span class="o">=&gt;</span> <span class="n">down</span><span class="p">})</span>
    <span class="n">west</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="s1">'east'</span> <span class="o">=&gt;</span> <span class="n">start</span><span class="p">})</span>
    <span class="n">down</span><span class="o">.</span><span class="n">add_paths</span><span class="p">({</span><span class="s1">'up'</span> <span class="o">=&gt;</span> <span class="n">start</span><span class="p">})</span>

    <span class="n">assert_equal</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'west'</span><span class="p">),</span> <span class="n">west</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'west'</span><span class="p">)</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'east'</span><span class="p">),</span> <span class="n">start</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'down'</span><span class="p">)</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'up'</span><span class="p">),</span> <span class="n">start</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_gothon_game_map</span><span class="p">()</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="no">START</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'shoot!'</span><span class="p">),</span> <span class="n">generic_death</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="no">START</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'dodge!'</span><span class="p">),</span> <span class="n">generic_death</span><span class="p">)</span>

    <span class="n">room</span> <span class="o">=</span> <span class="no">START</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">'tell a joke'</span><span class="p">)</span>
    <span class="n">assert_equal</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">laser_weapon_armory</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Your task in this part of the exercise is to complete the map, and make
the automated test completely validate the whole map. This includes
fixing all the <tt class="docutils literal"><span class="pre">generic_death</span></tt> objects to be real endings. Make sure
this works really well and that your test is as complete as possible
because we'll be changing this map later and you'll use the tests to
make sure it keeps working.</p>
</div>
<div class="section" id="sessions-and-tracking-users">
<h2>Sessions And Tracking Users<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#sessions-and-tracking-users" title="Permalink to this headline">¶</a></h2>
<p>At a certain point in your web application you'll need to keep track of
some information and associate it with the user's browser. The web
(because of HTTP) is what we like to call "stateless", which means each
request you make is independent of any other requests being made. If you
request page A, put in some data, and click a link to page B, all the
data you sent to page A just disappears.</p>
<p>The solution to this is to create a little data store (usually in a
database, on disk, or in cookies) that uses a number unique to each
browser to keep track of what that browser was doing. In Sinatra it's
fairly easy, and here's an example showing how it's done using Rack
middleware:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'sinatra'</span>

<span class="n">use</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Session</span><span class="o">::</span><span class="no">Pool</span>

<span class="n">get</span> <span class="s1">'/count'</span> <span class="k">do</span>
  <span class="n">session</span><span class="o">[</span><span class="ss">:count</span><span class="o">]</span> <span class="o">||=</span> <span class="mi">0</span>
  <span class="n">session</span><span class="o">[</span><span class="ss">:count</span><span class="o">]</span> <span class="o">+=</span><span class="mi">1</span>
  <span class="s2">"Count: </span><span class="si">#{</span><span class="n">session</span><span class="o">[</span><span class="ss">:count</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="n">get</span> <span class="s1">'/reset'</span> <span class="k">do</span>
  <span class="n">session</span><span class="o">.</span><span class="n">clear</span>
  <span class="s2">"Count reset to 0."</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-an-engine">
<h2>Creating An Engine<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#creating-an-engine" title="Permalink to this headline">¶</a></h2>
<p>You should have your game map working and a good unit test for it. I now
want to make a simple little game engine that will run the rooms,
collect input from the player, and keep track of where a play is in the
game. We'll be using the sessions you just learned to make a simple game
engine that will:</p>
<ol class="arabic simple">
<li>Start a new game for new users.</li>
<li>Present the room to the user.</li>
<li>Take input from the user.</li>
<li>Run their input through the game.</li>
<li>Display the results and keep going until they die.</li>
</ol>
<p>To do this, you're going to take the trusty <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> you've
been hacking on and create a fully working, session based, game engine.
The catch is I'm going to make a very simple one with basic HTML files,
and it'll be up to you to complete it. Here's the base engine:</p>
<div class="highlight-ruby"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">require_relative</span> <span class="s2">"gothonweb/version"</span>
<span class="n">require_relative</span> <span class="s2">"map"</span>
<span class="nb">require</span> <span class="s2">"sinatra"</span>
<span class="nb">require</span> <span class="s2">"erb"</span>

<span class="k">module</span> <span class="nn">Gothonweb</span>

  <span class="n">use</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Session</span><span class="o">::</span><span class="no">Pool</span>

  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="c1"># this is used to "setup" the session with starting values</span>
    <span class="nb">p</span> <span class="no">START</span>
    <span class="n">session</span><span class="o">[</span><span class="ss">:room</span><span class="o">]</span> <span class="o">=</span> <span class="no">START</span>
    <span class="n">redirect</span><span class="p">(</span><span class="s2">"/game"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">get</span> <span class="s1">'/game'</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">session</span><span class="o">[</span><span class="ss">:room</span><span class="o">]</span>
      <span class="n">erb</span> <span class="ss">:show_room</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:room</span> <span class="o">=&gt;</span> <span class="n">session</span><span class="o">[</span><span class="ss">:room</span><span class="o">]</span><span class="p">}</span>
    <span class="k">else</span>
      <span class="c1"># why is this here? do you need it?</span>
      <span class="n">erb</span> <span class="ss">:you_died</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">post</span> <span class="s1">'/game'</span> <span class="k">do</span>
    <span class="n">action</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:action</span><span class="o">]</span> <span class="o">||</span> <span class="kp">nil</span><span class="si">}</span><span class="s2">"</span>
    <span class="c1"># there is a bug here, can you fix it?</span>
    <span class="k">if</span> <span class="n">session</span><span class="o">[</span><span class="ss">:room</span><span class="o">]</span>
      <span class="n">session</span><span class="o">[</span><span class="ss">:room</span><span class="o">]</span> <span class="o">=</span> <span class="n">session</span><span class="o">[</span><span class="ss">:room</span><span class="o">].</span><span class="n">go</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:action</span><span class="o">]</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">redirect</span><span class="p">(</span><span class="s2">"/game"</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></tbody></table></div>
<p>You should next delete <tt class="docutils literal"><span class="pre">lib/views/hello_form.erb</span></tt> and
<tt class="docutils literal"><span class="pre">lib/views/index.erb</span></tt> and create the two templates mentioned in the
above code. Here's a very simple <tt class="docutils literal"><span class="pre">lib/views/show_room.erb</span></tt>:</p>
<div class="highlight-erb"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="n">room</span><span class="o">.</span><span class="n">name</span> <span class="cp">%&gt;</span><span class="x">&lt;/h1&gt;</span>

<span class="x">&lt;pre&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">room</span><span class="o">.</span><span class="n">description</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">&lt;/pre&gt;</span>

<span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"death"</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;p&gt;</span>
<span class="x">  &lt;a href="/"&gt;Play Again?&lt;/a&gt;</span>
<span class="x">  &lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">else</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;p&gt;</span>
<span class="x">  &lt;form action="/game" method="POST"&gt;</span>
<span class="x">    - &lt;input type="text" name="action"&gt; &lt;input type="SUBMIT"&gt;</span>
<span class="x">  &lt;/form&gt;</span>
<span class="x">  &lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>That is the template to show a room as you travel through the game. Next
you need one to tell someone they died in the case that they got to the
end of the map on accident, which is <tt class="docutils literal"><span class="pre">lib/views/you_died.erb</span></tt>:</p>
<div class="highlight-erb"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">&lt;h1&gt;You Died!&lt;/h1&gt;</span>

<span class="x">&lt;p&gt;Looks like you bit the dust.&lt;/p&gt;</span>
<span class="x">&lt;p&gt;&lt;a href="/"&gt;Play Again&lt;/a&gt;&lt;/p&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>With those in place, you should now be able to do the following:</p>
<ol class="arabic simple">
<li>Get the test <tt class="docutils literal"><span class="pre">test/test_gothonweb.rb</span></tt> working again so that you are
testing the game. You won't be able to do much more than a few clicks
in the game because of sessions, but you should be able to do some
basics.</li>
<li>Run the <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> script and test out the game.</li>
<li>You should be able to refresh and fix the game like normal, and work
with the game HTML and engine until it does all the things you want
it to do.</li>
</ol>
</div>
<div class="section" id="your-final-exam">
<h2>Your Final Exam<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#your-final-exam" title="Permalink to this headline">¶</a></h2>
<p>Do you feel like this was a huge amount of information thrown at you all
at once? Good, I want you to have something to tinker with while you
build your skills. To complete this exercise, I'm going to give you a
final set of exercises for you to complete on your own. You'll notice
that what you've written so far isn't very well built, it is just a
first version of the code. Your task now is to make the game more
complete by doing these things:</p>
<ol class="arabic simple">
<li>Fix all the bugs I mention in the code, and any that I didn't
mention. If you find new bugs, let me know.</li>
<li>Improve all of the automated tests so that you test more of the
application and get to a point where you use a test rather than your
browser to check the application while you work.</li>
<li>Make the HTML look better.</li>
<li>Research logins and create a signup system for the application, so
people can have logins and high scores.</li>
<li>Complete the game map, making it as large and feature complete as
possible.</li>
<li>Give people a "help" system that lets them ask what they can do at
each room in the game.</li>
<li>Add any other features you can think of to the game.</li>
<li>Create several "maps" and let people choose a game they want to run.
Your <tt class="docutils literal"><span class="pre">lib/gothonweb.rb</span></tt> engine should be able to run any map of
rooms you give it, so you can support multiple games.</li>
<li>Finally, use what you learned in Exercises 48 and 49 to create a
better input processor. You have most of the code necessary, you just
need to improve the grammar and hook it up to your input form and the
GameEngine.</li>
</ol>
<p>Good luck!</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <a href="#top">Top of page</a>
		<div class="document" id="ex53">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="next-steps">
<h1>Next Steps<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#next-steps" title="Permalink to this headline">¶</a></h1>
<p>You're not a programmer quite yet. I like to think of this book as
giving you your "programming brown belt". You know enough to start
another book on programming and handle it just fine. This book should
have given you the mental tools and attitude you need to go through most
Ruby books and actually learn something. It might even make it easy.</p>
<blockquote>
<div><strong>Rob says:</strong> For fun, I recommend you check out Why's (Poignant)
Guide to Ruby: <a class="reference external" href="http://mislav.uniqpath.com/poignant-guide">http://mislav.uniqpath.com/poignant-guide</a> Most of the
actual programming content will be review by now, but Why is a
brilliant mind and his book is a work of art. Check out some of his
open source projects, which are still floating around. You can learn
a lot by reading his code.</div></blockquote>
<p>You could probably start hacking away at some programs right now, and if
you have that itch, go ahead. Just understand anything you write will
probably suck. That's alright though, I suck at every programming
language I first start using. Nobody writes pure perfect gold when
they're a beginner, and anyone who tells you they did is a huge liar.</p>
<p>Finally, remember that this is something you have to do at least a
couple hours a night for a while before you can get good. If it helps,
while you're struggling to learn Ruby every night, I'm hard at work
learning to play guitar. I work at it about 2 or 4 hours a day and still
practice scales.</p>
<p>Everyone is a beginner at something.</p>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    


    <a href="#top">Top of page</a>
		<div class="document" id="ex54">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="advice-from-an-old-programmer">
<h1>Advice From An Old Programmer<a class="headerlink" href="http://ruby.learncodethehardway.org/book/#advice-from-an-old-programmer" title="Permalink to this headline">¶</a></h1>
<p>You've finished this book and have decided to continue with programming.
Maybe it will be a career for you, or maybe it will be a hobby. You'll
need some advice to make sure you continue on the right path, and get
the most enjoyment out of your newly chosen activity.</p>
<p>I've been programming for a very long time. So long that it's incredibly
boring to me. At the time that I wrote this book, I knew about 20
programming languages and could learn new ones in about a day to a week
depending on how weird they were. Eventually though this just became
boring and couldn't hold my interest anymore. This doesn't mean I think
programming <em>is</em> boring, or that <em>you</em> will think it's boring, only that
I find it uninteresting at this point in my journey.</p>
<p>What I discovered after this journey of learning is that it's not the
languages that matter but what you do with them. Actually, I always knew
that, but I'd get distracted by the languages and forget it
periodically. Now I never forget it, and neither should you.</p>
<p>Which programming language you learn and use doesn't matter. Do <em>not</em>
get sucked into the religion surrounding programming languages as that
will only blind you to their true purpose of being your tool for doing
interesting things.</p>
<p>Programming as an intellectual activity is the <em>only</em> art form that
allows you to create interactive art. You can create projects that other
people can play with, and you can talk to them indirectly. No other art
form is quite this interactive. Movies flow to the audience in one
direction. Paintings do not move. Code goes both ways.</p>
<p>Programming as a profession is only moderately interesting. It can be a
good job, but you could make about the same money and be happier running
a fast food joint. You're much better off using code as your secret
weapon in another profession.</p>
<p>People who can code in the world of technology companies are a dime a
dozen and get no respect. People who can code in biology, medicine,
government, sociology, physics, history, and mathematics are respected
and can do amazing things to advance those disciplines.</p>
<p>Of course, all of this advice is pointless. If you liked learning to
write software with this book, you should try to use it to improve your
life any way you can. Go out and explore this weird wonderful new
intellectual pursuit that barely anyone in the last 50 years has been
able to explore. Might as well enjoy it while you can.</p>
<p>Finally, I'll say that learning to create software changes you and makes
you different. Not better or worse, just different. You may find that
people treat you harshly because you can create software, maybe using
words like "nerd". Maybe you'll find that because you can dissect their
logic that they hate arguing with you. You may even find that simply
knowing how a computer works makes you annoying and weird to them.</p>
<p>To this I have just one piece of advice: they can go to hell. The world
needs more weird people who know how things work and who love to figure
it all out. When they treat you like this, just remember that this is
<em>your</em> journey, not theirs. Being different is not a crime, and people
who tell you it is are just jealous that you've picked up a skill they
never in their wildest dreams could acquire.</p>
<p>You can code. They cannot. That is pretty damn cool.</p>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
        <ul>
        <li class="right"><a style="color: #C40B46;" href="http://learncodethehardway.org/contact.html" title="Need Help?">Need Help?</a></li>
        <li class="right"><a style="color: #C40B46;" href="http://regex.learncodethehardway.org/" title="Learn Regex">Learn Regex</a> | </li>
        <li class="right"><a style="color: #C40B46;" href="http://sql.learncodethehardway.org/" title="Learn SQL">Learn SQL</a> | </li>
        <li class="right"><a style="color: #C40B46;" href="http://c.learncodethehardway.org/" title="Learn C">Learn C</a> | </li>
        <li class="right"><a style="color: #C40B46;" href="http://learnpythonthehardway.org/" title="Learn Python">Learn Python</a> | </li>
        <li><a style="color: #C40B46;" href="https://getdpd.com/v2/cart/add/8273/26787/26335?referer=http%3A//ruby.learncodethehardway.com/book/"><b>Buy PDF - $2.99</b></a> |
        </li><li><a style="color: #C40B46;" href="https://getdpd.com/v2/cart/add/8273/26789/26337?referer=http%3A//ruby.learncodethehardway.com/book/"><b>ePub - $2.99</b></a> |
        </li><li><a style="color: #C40B46;" href="https://getdpd.com/v2/cart/add/8273/26793/26341?referer=http%3A//ruby.learncodethehardway.com/book/"><b>Both - $5</b></a></li>
        </ul>
    </div>

   


  </div></div></body></html>